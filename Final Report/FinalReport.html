<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_n5euz220wizo-7{list-style-type:none}ul.lst-kix_n5euz220wizo-8{list-style-type:none}ul.lst-kix_n5euz220wizo-5{list-style-type:none}ul.lst-kix_n5euz220wizo-6{list-style-type:none}.lst-kix_s1tlcbif19zp-8>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-3,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-4,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-5,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-6,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-7,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-8,decimal) ". "}ul.lst-kix_n5euz220wizo-3{list-style-type:none}ul.lst-kix_n5euz220wizo-4{list-style-type:none}ul.lst-kix_n5euz220wizo-1{list-style-type:none}ul.lst-kix_n5euz220wizo-2{list-style-type:none}ol.lst-kix_a8rxp583gbxi-4.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-4 0}ul.lst-kix_n5euz220wizo-0{list-style-type:none}ol.lst-kix_65ys8kkzrj5c-8.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-8 0}ol.lst-kix_bp9hz8yehz1d-1.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-1 0}.lst-kix_xshn85mjycb9-2>li{counter-increment:lst-ctn-kix_xshn85mjycb9-2}.lst-kix_copbltb02th5-7>li{counter-increment:lst-ctn-kix_copbltb02th5-7}.lst-kix_5k6l0dwe4053-1>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-1}.lst-kix_s1tlcbif19zp-0>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) ". "}.lst-kix_s1tlcbif19zp-1>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) ". "}.lst-kix_bq7g8rf0rrj4-5>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-5}.lst-kix_bv8t4tqsyhv3-5>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-5}.lst-kix_s1tlcbif19zp-2>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) ". "}ol.lst-kix_k4q9goalbvhz-7.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-7 0}.lst-kix_s1tlcbif19zp-4>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-3,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-4,decimal) ". "}.lst-kix_s1tlcbif19zp-3>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-3,decimal) ". "}.lst-kix_s1tlcbif19zp-5>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-3,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-4,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-5,decimal) ". "}ol.lst-kix_bv8t4tqsyhv3-0.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-0 0}.lst-kix_a8rxp583gbxi-8>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-8}.lst-kix_mi4o6g2do3md-7>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-7}ol.lst-kix_4m0mdyjfxvwq-5.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-5 0}.lst-kix_s1tlcbif19zp-7>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-3,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-4,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-5,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-6,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-7,decimal) ". "}.lst-kix_s1tlcbif19zp-6>li:before{content:"" counter(lst-ctn-kix_s1tlcbif19zp-0,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-1,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-2,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-3,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-4,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-5,decimal) "." counter(lst-ctn-kix_s1tlcbif19zp-6,decimal) ". "}ol.lst-kix_mi4o6g2do3md-6.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-6 0}.lst-kix_a8rxp583gbxi-1>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-1}.lst-kix_copbltb02th5-0>li{counter-increment:lst-ctn-kix_copbltb02th5-0}ol.lst-kix_bp9hz8yehz1d-6.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-6 0}.lst-kix_gauh31kqom6-2>li{counter-increment:lst-ctn-kix_gauh31kqom6-2}.lst-kix_608j9sd8cqoy-2>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-2}.lst-kix_tfn897j8ydy5-5>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-5}.lst-kix_v9n3g8b4bso2-8>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-8}ol.lst-kix_65ys8kkzrj5c-3.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-3 0}.lst-kix_4m0mdyjfxvwq-7>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-7,lower-latin) ". "}.lst-kix_4m0mdyjfxvwq-5>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-5,lower-roman) ". "}.lst-kix_4m0mdyjfxvwq-6>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-6,decimal) ". "}ol.lst-kix_bv8t4tqsyhv3-5.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-5 0}.lst-kix_weg6rfcz2wrz-8>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-8}ol.lst-kix_k4q9goalbvhz-2.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-2 0}.lst-kix_lofcf5qgynoy-2>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-2}.lst-kix_4m0mdyjfxvwq-0>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-0,decimal) ". "}.lst-kix_4m0mdyjfxvwq-8>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-8,lower-roman) ". "}.lst-kix_4m0mdyjfxvwq-1>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-1,lower-latin) ". "}.lst-kix_4m0mdyjfxvwq-2>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-2,lower-roman) ". "}.lst-kix_4m0mdyjfxvwq-3>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-3,decimal) ". "}ol.lst-kix_8mhje5df4oh5-8.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-8 0}ul.lst-kix_homsmz78n1gf-1{list-style-type:none}ul.lst-kix_homsmz78n1gf-0{list-style-type:none}.lst-kix_4m0mdyjfxvwq-4>li:before{content:"" counter(lst-ctn-kix_4m0mdyjfxvwq-4,lower-latin) ". "}ul.lst-kix_homsmz78n1gf-3{list-style-type:none}ul.lst-kix_homsmz78n1gf-2{list-style-type:none}ul.lst-kix_homsmz78n1gf-5{list-style-type:none}ul.lst-kix_homsmz78n1gf-4{list-style-type:none}ul.lst-kix_homsmz78n1gf-7{list-style-type:none}ul.lst-kix_homsmz78n1gf-6{list-style-type:none}ol.lst-kix_a8rxp583gbxi-7{list-style-type:none}ol.lst-kix_a8rxp583gbxi-6{list-style-type:none}ul.lst-kix_homsmz78n1gf-8{list-style-type:none}.lst-kix_qv6q6ohs5rjd-2>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-2}ol.lst-kix_a8rxp583gbxi-8{list-style-type:none}.lst-kix_bp9hz8yehz1d-3>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-3}ol.lst-kix_a8rxp583gbxi-3{list-style-type:none}ol.lst-kix_mi4o6g2do3md-1.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-1 0}ol.lst-kix_a8rxp583gbxi-2{list-style-type:none}ol.lst-kix_a8rxp583gbxi-5{list-style-type:none}ol.lst-kix_a8rxp583gbxi-4{list-style-type:none}ol.lst-kix_a8rxp583gbxi-1{list-style-type:none}ol.lst-kix_a8rxp583gbxi-0{list-style-type:none}ol.lst-kix_gauh31kqom6-8{list-style-type:none}.lst-kix_8fcjh41mfjmf-4>li:before{content:"\0025cb  "}ol.lst-kix_qv6q6ohs5rjd-8{list-style-type:none}ol.lst-kix_lofcf5qgynoy-1.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-1 0}ol.lst-kix_gauh31kqom6-4{list-style-type:none}.lst-kix_qv6q6ohs5rjd-3>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-3}ol.lst-kix_qv6q6ohs5rjd-7{list-style-type:none}ol.lst-kix_gauh31kqom6-5{list-style-type:none}.lst-kix_8fcjh41mfjmf-2>li:before{content:"\0025a0  "}ol.lst-kix_qv6q6ohs5rjd-6{list-style-type:none}ol.lst-kix_gauh31kqom6-6{list-style-type:none}ol.lst-kix_608j9sd8cqoy-1.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-1 0}ol.lst-kix_qv6q6ohs5rjd-5{list-style-type:none}ol.lst-kix_gauh31kqom6-7{list-style-type:none}ol.lst-kix_qv6q6ohs5rjd-4{list-style-type:none}ol.lst-kix_gauh31kqom6-0{list-style-type:none}ol.lst-kix_qv6q6ohs5rjd-3{list-style-type:none}ol.lst-kix_27hxptg4gai7-3.start{counter-reset:lst-ctn-kix_27hxptg4gai7-3 0}ol.lst-kix_gauh31kqom6-1{list-style-type:none}.lst-kix_8fcjh41mfjmf-0>li:before{content:"\0025cf  "}ol.lst-kix_qv6q6ohs5rjd-2{list-style-type:none}ol.lst-kix_gauh31kqom6-2{list-style-type:none}ol.lst-kix_qv6q6ohs5rjd-1{list-style-type:none}ol.lst-kix_gauh31kqom6-3{list-style-type:none}ol.lst-kix_qv6q6ohs5rjd-0{list-style-type:none}ol.lst-kix_copbltb02th5-2.start{counter-reset:lst-ctn-kix_copbltb02th5-2 0}.lst-kix_mi4o6g2do3md-5>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-5,decimal) ". "}ol.lst-kix_pv0lc9ud52rj-3.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-3 0}.lst-kix_mi4o6g2do3md-3>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-3,lower-latin) ". "}ol.lst-kix_bq7g8rf0rrj4-0.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-0 0}ol.lst-kix_gauh31kqom6-3.start{counter-reset:lst-ctn-kix_gauh31kqom6-3 0}.lst-kix_8fcjh41mfjmf-6>li:before{content:"\0025cf  "}.lst-kix_s1tlcbif19zp-8>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-8}ol.lst-kix_xshn85mjycb9-4.start{counter-reset:lst-ctn-kix_xshn85mjycb9-4 0}.lst-kix_8fcjh41mfjmf-8>li:before{content:"\0025a0  "}.lst-kix_alu4m0l7kzsu-4>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-4}ol.lst-kix_alu4m0l7kzsu-1.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-1 0}.lst-kix_mi4o6g2do3md-7>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-7,lower-roman) ". "}ol.lst-kix_8mhje5df4oh5-3.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-3 0}.lst-kix_k4q9goalbvhz-5>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-5}.lst-kix_weg6rfcz2wrz-1>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-1}ol.lst-kix_weg6rfcz2wrz-8.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-8 0}.lst-kix_65ys8kkzrj5c-1>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-1}.lst-kix_s1tlcbif19zp-1>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-1}ol.lst-kix_hm07poadd9ox-3.start{counter-reset:lst-ctn-kix_hm07poadd9ox-3 0}.lst-kix_hm07poadd9ox-5>li{counter-increment:lst-ctn-kix_hm07poadd9ox-5}.lst-kix_weg6rfcz2wrz-0>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-0}.lst-kix_5k6l0dwe4053-8>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-8}.lst-kix_m0c1udlgfhd3-4>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-4}.lst-kix_mi4o6g2do3md-1>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-1,lower-roman) ". "}ol.lst-kix_5k6l0dwe4053-6.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-6 0}.lst-kix_27hxptg4gai7-4>li{counter-increment:lst-ctn-kix_27hxptg4gai7-4}.lst-kix_4m0mdyjfxvwq-4>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-4}.lst-kix_alu4m0l7kzsu-5>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-5}ol.lst-kix_mi4o6g2do3md-0{list-style-type:none}ol.lst-kix_mi4o6g2do3md-1{list-style-type:none}ol.lst-kix_mi4o6g2do3md-8{list-style-type:none}ol.lst-kix_mi4o6g2do3md-6{list-style-type:none}ol.lst-kix_mi4o6g2do3md-7{list-style-type:none}ol.lst-kix_mi4o6g2do3md-4{list-style-type:none}ol.lst-kix_mi4o6g2do3md-5{list-style-type:none}ol.lst-kix_mi4o6g2do3md-2{list-style-type:none}ol.lst-kix_mi4o6g2do3md-3{list-style-type:none}.lst-kix_mi4o6g2do3md-0>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-0}ol.lst-kix_alu4m0l7kzsu-4{list-style-type:none}.lst-kix_lofcf5qgynoy-3>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-3}.lst-kix_j85vvjrsn575-6>li:before{content:"\0025cf  "}ol.lst-kix_alu4m0l7kzsu-5{list-style-type:none}ol.lst-kix_alu4m0l7kzsu-2{list-style-type:none}.lst-kix_j85vvjrsn575-5>li:before{content:"\0025a0  "}ol.lst-kix_alu4m0l7kzsu-3{list-style-type:none}.lst-kix_mi4o6g2do3md-8>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-8}ol.lst-kix_alu4m0l7kzsu-0{list-style-type:none}ol.lst-kix_alu4m0l7kzsu-1{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-7.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-7 0}.lst-kix_xshn85mjycb9-1>li{counter-increment:lst-ctn-kix_xshn85mjycb9-1}.lst-kix_j85vvjrsn575-2>li:before{content:"\0025a0  "}ol.lst-kix_qv6q6ohs5rjd-5.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-5 0}ol.lst-kix_alu4m0l7kzsu-8{list-style-type:none}ol.lst-kix_alu4m0l7kzsu-6{list-style-type:none}ol.lst-kix_alu4m0l7kzsu-7{list-style-type:none}ol.lst-kix_5k6l0dwe4053-1.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-1 0}ol.lst-kix_m0c1udlgfhd3-2.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-2 0}.lst-kix_j85vvjrsn575-1>li:before{content:"\0025cb  "}.lst-kix_bv8t4tqsyhv3-4>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-4}ol.lst-kix_tfn897j8ydy5-1{list-style-type:none}.lst-kix_m0c1udlgfhd3-3>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-3}ol.lst-kix_tfn897j8ydy5-0{list-style-type:none}ol.lst-kix_tfn897j8ydy5-3{list-style-type:none}ol.lst-kix_tfn897j8ydy5-2{list-style-type:none}ol.lst-kix_tfn897j8ydy5-5{list-style-type:none}.lst-kix_xshn85mjycb9-3>li{counter-increment:lst-ctn-kix_xshn85mjycb9-3}ol.lst-kix_tfn897j8ydy5-4{list-style-type:none}ol.lst-kix_s1tlcbif19zp-3.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-3 0}ol.lst-kix_tfn897j8ydy5-7{list-style-type:none}ol.lst-kix_tfn897j8ydy5-6{list-style-type:none}.lst-kix_a8rxp583gbxi-0>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-0}ol.lst-kix_v9n3g8b4bso2-0.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-0 0}ol.lst-kix_8mhje5df4oh5-5{list-style-type:none}ol.lst-kix_8mhje5df4oh5-4{list-style-type:none}ol.lst-kix_8mhje5df4oh5-3{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-1.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-1 0}ol.lst-kix_8mhje5df4oh5-2{list-style-type:none}ol.lst-kix_8mhje5df4oh5-1{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-7.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-7 0}ol.lst-kix_8mhje5df4oh5-0{list-style-type:none}ol.lst-kix_hm07poadd9ox-4.start{counter-reset:lst-ctn-kix_hm07poadd9ox-4 0}ol.lst-kix_5k6l0dwe4053-7{list-style-type:none}ol.lst-kix_5k6l0dwe4053-8{list-style-type:none}ol.lst-kix_mi4o6g2do3md-2.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-2 0}ol.lst-kix_8mhje5df4oh5-8{list-style-type:none}ol.lst-kix_8mhje5df4oh5-7{list-style-type:none}ol.lst-kix_8mhje5df4oh5-6{list-style-type:none}.lst-kix_608j9sd8cqoy-1>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-1}ol.lst-kix_5k6l0dwe4053-3{list-style-type:none}ol.lst-kix_tfn897j8ydy5-8{list-style-type:none}ol.lst-kix_5k6l0dwe4053-4{list-style-type:none}.lst-kix_copbltb02th5-7>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-7,lower-latin) ". "}ol.lst-kix_5k6l0dwe4053-5{list-style-type:none}.lst-kix_s1tlcbif19zp-2>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-2}ol.lst-kix_5k6l0dwe4053-6{list-style-type:none}ol.lst-kix_608j9sd8cqoy-2.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-2 0}ol.lst-kix_5k6l0dwe4053-0{list-style-type:none}ol.lst-kix_27hxptg4gai7-7.start{counter-reset:lst-ctn-kix_27hxptg4gai7-7 0}ol.lst-kix_5k6l0dwe4053-1{list-style-type:none}ol.lst-kix_5k6l0dwe4053-2{list-style-type:none}.lst-kix_a8rxp583gbxi-7>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-7}.lst-kix_copbltb02th5-3>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-3,decimal) ". "}.lst-kix_tfn897j8ydy5-6>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-6}.lst-kix_copbltb02th5-2>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-2,lower-roman) ". "}.lst-kix_copbltb02th5-6>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-6,decimal) ". "}.lst-kix_8mhje5df4oh5-6>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-6}ol.lst-kix_s1tlcbif19zp-4.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-4 0}.lst-kix_608j9sd8cqoy-8>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-8}ol.lst-kix_65ys8kkzrj5c-8{list-style-type:none}ol.lst-kix_65ys8kkzrj5c-7{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-8.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-8 0}ol.lst-kix_65ys8kkzrj5c-6{list-style-type:none}.lst-kix_pv0lc9ud52rj-8>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-8}ol.lst-kix_alu4m0l7kzsu-5.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-5 0}.lst-kix_8mhje5df4oh5-1>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-1,lower-latin) ". "}.lst-kix_65ys8kkzrj5c-2>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-2}ol.lst-kix_65ys8kkzrj5c-1{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-3.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-3 0}.lst-kix_4m0mdyjfxvwq-5>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-5}ol.lst-kix_65ys8kkzrj5c-0{list-style-type:none}.lst-kix_8mhje5df4oh5-2>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-2,lower-roman) ". "}ol.lst-kix_a8rxp583gbxi-0.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-0 0}ol.lst-kix_65ys8kkzrj5c-5{list-style-type:none}ol.lst-kix_65ys8kkzrj5c-4{list-style-type:none}ol.lst-kix_qv6q6ohs5rjd-4.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-4 0}ol.lst-kix_65ys8kkzrj5c-3{list-style-type:none}.lst-kix_hm07poadd9ox-4>li{counter-increment:lst-ctn-kix_hm07poadd9ox-4}ol.lst-kix_65ys8kkzrj5c-2{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-6.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-6 0}.lst-kix_27hxptg4gai7-3>li{counter-increment:lst-ctn-kix_27hxptg4gai7-3}ol.lst-kix_alu4m0l7kzsu-6.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-6 0}ol.lst-kix_bq7g8rf0rrj4-1{list-style-type:none}.lst-kix_bq7g8rf0rrj4-4>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-4}ol.lst-kix_bq7g8rf0rrj4-0{list-style-type:none}.lst-kix_8mhje5df4oh5-6>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-6,decimal) ". "}.lst-kix_8mhje5df4oh5-5>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-5,lower-roman) ". "}.lst-kix_alu4m0l7kzsu-3>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-3,decimal) ". "}.lst-kix_weg6rfcz2wrz-2>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-2}ol.lst-kix_bq7g8rf0rrj4-8{list-style-type:none}.lst-kix_alu4m0l7kzsu-4>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-4,lower-latin) ". "}ol.lst-kix_bq7g8rf0rrj4-7{list-style-type:none}ol.lst-kix_bq7g8rf0rrj4-6{list-style-type:none}ol.lst-kix_65ys8kkzrj5c-4.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-4 0}ol.lst-kix_bq7g8rf0rrj4-5{list-style-type:none}ol.lst-kix_bq7g8rf0rrj4-4{list-style-type:none}ol.lst-kix_bq7g8rf0rrj4-3{list-style-type:none}ol.lst-kix_5k6l0dwe4053-2.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-2 0}ol.lst-kix_bq7g8rf0rrj4-2{list-style-type:none}.lst-kix_alu4m0l7kzsu-0>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-0,decimal) ". "}.lst-kix_lofcf5qgynoy-5>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-5,lower-roman) ". "}.lst-kix_alu4m0l7kzsu-7>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-7,lower-latin) ". "}.lst-kix_lofcf5qgynoy-1>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-1,lower-latin) ". "}.lst-kix_n5euz220wizo-1>li:before{content:"\0025cb  "}.lst-kix_lofcf5qgynoy-8>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-8}.lst-kix_8fcjh41mfjmf-1>li:before{content:"\0025cb  "}.lst-kix_bq7g8rf0rrj4-6>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-6,decimal) ". "}.lst-kix_mi4o6g2do3md-2>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-2,decimal) ". "}.lst-kix_mi4o6g2do3md-6>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-6,lower-latin) ". "}ol.lst-kix_a8rxp583gbxi-5.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-5 0}.lst-kix_8fcjh41mfjmf-5>li:before{content:"\0025a0  "}ol.lst-kix_v9n3g8b4bso2-4.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-4 0}.lst-kix_a8rxp583gbxi-2>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-2}.lst-kix_bq7g8rf0rrj4-2>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-2,lower-roman) ". "}.lst-kix_5k6l0dwe4053-7>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-7,lower-latin) ". "}.lst-kix_5k6l0dwe4053-3>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-3,decimal) ". "}.lst-kix_bp9hz8yehz1d-4>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-4}ol.lst-kix_qv6q6ohs5rjd-0.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-0 0}.lst-kix_pv0lc9ud52rj-1>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-1}ol.lst-kix_4m0mdyjfxvwq-1.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-1 0}.lst-kix_608j9sd8cqoy-3>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-3}.lst-kix_qv6q6ohs5rjd-0>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-0,decimal) ". "}.lst-kix_pv0lc9ud52rj-1>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-1,lower-latin) ". "}.lst-kix_pv0lc9ud52rj-5>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-5,lower-roman) ". "}.lst-kix_weg6rfcz2wrz-2>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-2,lower-roman) ". "}.lst-kix_v9n3g8b4bso2-1>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-1}ol.lst-kix_ywj8w8u4kf85-2.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-2 0}ol.lst-kix_608j9sd8cqoy-6.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-6 0}.lst-kix_weg6rfcz2wrz-6>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-6,decimal) ". "}ul.lst-kix_tx2rtpvvwi5y-3{list-style-type:none}ul.lst-kix_tx2rtpvvwi5y-4{list-style-type:none}ul.lst-kix_tx2rtpvvwi5y-5{list-style-type:none}ul.lst-kix_tx2rtpvvwi5y-6{list-style-type:none}ul.lst-kix_tx2rtpvvwi5y-7{list-style-type:none}ul.lst-kix_tx2rtpvvwi5y-8{list-style-type:none}.lst-kix_qv6q6ohs5rjd-4>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-4,lower-latin) ". "}.lst-kix_lofcf5qgynoy-1>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-1}ul.lst-kix_tx2rtpvvwi5y-0{list-style-type:none}.lst-kix_bp9hz8yehz1d-5>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-5,lower-roman) ". "}ul.lst-kix_tx2rtpvvwi5y-1{list-style-type:none}ul.lst-kix_tx2rtpvvwi5y-2{list-style-type:none}ol.lst-kix_s1tlcbif19zp-8.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-8 0}ol.lst-kix_4m0mdyjfxvwq-0.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-0 0}ol.lst-kix_27hxptg4gai7-8.start{counter-reset:lst-ctn-kix_27hxptg4gai7-8 0}.lst-kix_k4q9goalbvhz-3>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-3}ol.lst-kix_weg6rfcz2wrz-4{list-style-type:none}ol.lst-kix_weg6rfcz2wrz-5{list-style-type:none}ol.lst-kix_a8rxp583gbxi-3.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-3 0}ol.lst-kix_weg6rfcz2wrz-2{list-style-type:none}.lst-kix_n5euz220wizo-5>li:before{content:"\0025a0  "}ol.lst-kix_weg6rfcz2wrz-3{list-style-type:none}ol.lst-kix_weg6rfcz2wrz-8{list-style-type:none}ol.lst-kix_hm07poadd9ox-8.start{counter-reset:lst-ctn-kix_hm07poadd9ox-8 0}.lst-kix_8mhje5df4oh5-8>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-8}.lst-kix_ywj8w8u4kf85-2>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-2}ol.lst-kix_weg6rfcz2wrz-6{list-style-type:none}ol.lst-kix_weg6rfcz2wrz-7{list-style-type:none}ol.lst-kix_v9n3g8b4bso2-5.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-5 0}ol.lst-kix_weg6rfcz2wrz-0{list-style-type:none}ol.lst-kix_65ys8kkzrj5c-7.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-7 0}ol.lst-kix_weg6rfcz2wrz-1{list-style-type:none}ol.lst-kix_608j9sd8cqoy-7.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-7 0}.lst-kix_tfn897j8ydy5-4>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-4}.lst-kix_gauh31kqom6-4>li{counter-increment:lst-ctn-kix_gauh31kqom6-4}.lst-kix_27hxptg4gai7-0>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-0,decimal) ". "}.lst-kix_608j9sd8cqoy-6>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-6,lower-latin) ". "}.lst-kix_608j9sd8cqoy-3>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-3,lower-latin) ". "}.lst-kix_4m0mdyjfxvwq-6>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-6}ol.lst-kix_lofcf5qgynoy-5.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-5 0}.lst-kix_27hxptg4gai7-3>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-3,decimal) ". "}.lst-kix_27hxptg4gai7-4>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-4,lower-latin) ". "}.lst-kix_tfn897j8ydy5-3>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-3}ol.lst-kix_608j9sd8cqoy-0.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-0 0}.lst-kix_homsmz78n1gf-2>li:before{content:"-  "}.lst-kix_27hxptg4gai7-6>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-6,decimal) ". "}.lst-kix_homsmz78n1gf-0>li:before{content:"-  "}.lst-kix_lofcf5qgynoy-4>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-4}ol.lst-kix_8mhje5df4oh5-2.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-2 0}ol.lst-kix_v9n3g8b4bso2-3.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-3 0}.lst-kix_608j9sd8cqoy-8>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-8,decimal) ". "}ol.lst-kix_copbltb02th5-3.start{counter-reset:lst-ctn-kix_copbltb02th5-3 0}.lst-kix_homsmz78n1gf-8>li:before{content:"-  "}.lst-kix_bp9hz8yehz1d-3>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-3,decimal) ". "}ol.lst-kix_608j9sd8cqoy-5.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-5 0}.lst-kix_bp9hz8yehz1d-0>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-0,decimal) ". "}.lst-kix_65ys8kkzrj5c-3>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-3}ol.lst-kix_xshn85mjycb9-7{list-style-type:none}ol.lst-kix_xshn85mjycb9-8{list-style-type:none}.lst-kix_qv6q6ohs5rjd-7>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-7,lower-latin) ". "}ol.lst-kix_27hxptg4gai7-4.start{counter-reset:lst-ctn-kix_27hxptg4gai7-4 0}ol.lst-kix_xshn85mjycb9-3{list-style-type:none}ol.lst-kix_xshn85mjycb9-4{list-style-type:none}ol.lst-kix_xshn85mjycb9-5{list-style-type:none}.lst-kix_qv6q6ohs5rjd-8>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-8,lower-roman) ". "}ol.lst-kix_xshn85mjycb9-6{list-style-type:none}.lst-kix_608j9sd8cqoy-1>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-1,lower-roman) ". "}ol.lst-kix_xshn85mjycb9-0{list-style-type:none}.lst-kix_608j9sd8cqoy-0>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-0,lower-latin) ". "}ol.lst-kix_xshn85mjycb9-1{list-style-type:none}.lst-kix_homsmz78n1gf-5>li:before{content:"-  "}.lst-kix_homsmz78n1gf-7>li:before{content:"-  "}ol.lst-kix_xshn85mjycb9-2{list-style-type:none}ol.lst-kix_hm07poadd9ox-0.start{counter-reset:lst-ctn-kix_hm07poadd9ox-0 0}ol.lst-kix_m0c1udlgfhd3-4.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-4 0}.lst-kix_alu4m0l7kzsu-3>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-3}ol.lst-kix_4m0mdyjfxvwq-4.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-4 0}ol.lst-kix_8mhje5df4oh5-7.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-7 0}.lst-kix_ywj8w8u4kf85-4>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-4}ol.lst-kix_5k6l0dwe4053-3.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-3 0}.lst-kix_mi4o6g2do3md-5>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-5}.lst-kix_4m0mdyjfxvwq-2>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-2}ol.lst-kix_gauh31kqom6-4.start{counter-reset:lst-ctn-kix_gauh31kqom6-4 0}.lst-kix_bq7g8rf0rrj4-7>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-7}.lst-kix_5k6l0dwe4053-6>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-6}.lst-kix_5k6l0dwe4053-3>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-3}ol.lst-kix_5k6l0dwe4053-5.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-5 0}.lst-kix_alu4m0l7kzsu-1>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-1,lower-latin) ". "}.lst-kix_lofcf5qgynoy-8>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-8,lower-roman) ". "}ol.lst-kix_hm07poadd9ox-5.start{counter-reset:lst-ctn-kix_hm07poadd9ox-5 0}.lst-kix_5k6l0dwe4053-2>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-2,lower-roman) ". "}.lst-kix_bq7g8rf0rrj4-0>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-0}.lst-kix_lofcf5qgynoy-6>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-6,decimal) ". "}.lst-kix_5k6l0dwe4053-0>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-0,decimal) ". "}.lst-kix_5k6l0dwe4053-8>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-8,lower-roman) ". "}ol.lst-kix_5k6l0dwe4053-8.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-8 0}.lst-kix_lofcf5qgynoy-0>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-0,decimal) ". "}.lst-kix_n5euz220wizo-0>li:before{content:"  "}.lst-kix_k4q9goalbvhz-7>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-7}.lst-kix_bq7g8rf0rrj4-7>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-7,lower-latin) ". "}.lst-kix_tfn897j8ydy5-4>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-4,lower-latin) ". "}ol.lst-kix_4m0mdyjfxvwq-6.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-6 0}.lst-kix_tfn897j8ydy5-6>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-6,decimal) ". "}.lst-kix_5k6l0dwe4053-7>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-7}.lst-kix_gauh31kqom6-0>li{counter-increment:lst-ctn-kix_gauh31kqom6-0}ol.lst-kix_a8rxp583gbxi-8.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-8 0}ol.lst-kix_m0c1udlgfhd3-1.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-1 0}.lst-kix_bq7g8rf0rrj4-1>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-1,lower-latin) ". "}.lst-kix_65ys8kkzrj5c-0>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-0}.lst-kix_4m0mdyjfxvwq-3>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-3}ol.lst-kix_bv8t4tqsyhv3-0{list-style-type:none}.lst-kix_65ys8kkzrj5c-0>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-0,decimal) ". "}ol.lst-kix_bv8t4tqsyhv3-1{list-style-type:none}.lst-kix_pv0lc9ud52rj-6>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-6,decimal) ". "}.lst-kix_65ys8kkzrj5c-7>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-7}ol.lst-kix_bv8t4tqsyhv3-2{list-style-type:none}ol.lst-kix_bv8t4tqsyhv3-3{list-style-type:none}.lst-kix_weg6rfcz2wrz-1>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-1,lower-latin) ". "}ol.lst-kix_lofcf5qgynoy-0.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-0 0}ol.lst-kix_bv8t4tqsyhv3-4{list-style-type:none}.lst-kix_qv6q6ohs5rjd-5>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-5,lower-roman) ". "}.lst-kix_pv0lc9ud52rj-0>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-0,decimal) ". "}.lst-kix_65ys8kkzrj5c-2>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-2,lower-roman) ". "}ol.lst-kix_bv8t4tqsyhv3-5{list-style-type:none}ol.lst-kix_bv8t4tqsyhv3-6{list-style-type:none}ol.lst-kix_bv8t4tqsyhv3-7{list-style-type:none}ol.lst-kix_bv8t4tqsyhv3-8{list-style-type:none}ol.lst-kix_copbltb02th5-0.start{counter-reset:lst-ctn-kix_copbltb02th5-0 0}.lst-kix_weg6rfcz2wrz-7>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-7,lower-latin) ". "}ol.lst-kix_gauh31kqom6-2.start{counter-reset:lst-ctn-kix_gauh31kqom6-2 0}.lst-kix_xshn85mjycb9-2>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-2,lower-roman) ". "}.lst-kix_bp9hz8yehz1d-6>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-6,decimal) ". "}ul.lst-kix_j85vvjrsn575-5{list-style-type:none}ul.lst-kix_j85vvjrsn575-4{list-style-type:none}.lst-kix_k4q9goalbvhz-0>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-0}ul.lst-kix_j85vvjrsn575-7{list-style-type:none}ul.lst-kix_j85vvjrsn575-6{list-style-type:none}ul.lst-kix_j85vvjrsn575-1{list-style-type:none}ul.lst-kix_j85vvjrsn575-0{list-style-type:none}ul.lst-kix_j85vvjrsn575-3{list-style-type:none}ol.lst-kix_8mhje5df4oh5-4.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-4 0}.lst-kix_n5euz220wizo-8>li:before{content:"\0025a0  "}ul.lst-kix_j85vvjrsn575-2{list-style-type:none}.lst-kix_mi4o6g2do3md-6>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-6}.lst-kix_bp9hz8yehz1d-8>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-8,lower-roman) ". "}.lst-kix_8mhje5df4oh5-5>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-5}.lst-kix_n5euz220wizo-6>li:before{content:"\0025cf  "}ol.lst-kix_bp9hz8yehz1d-0{list-style-type:none}.lst-kix_pv0lc9ud52rj-8>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-8,lower-roman) ". "}ol.lst-kix_bp9hz8yehz1d-2{list-style-type:none}ol.lst-kix_copbltb02th5-1.start{counter-reset:lst-ctn-kix_copbltb02th5-1 0}ol.lst-kix_bp9hz8yehz1d-1{list-style-type:none}ol.lst-kix_bp9hz8yehz1d-4{list-style-type:none}.lst-kix_gauh31kqom6-7>li{counter-increment:lst-ctn-kix_gauh31kqom6-7}ol.lst-kix_bp9hz8yehz1d-3{list-style-type:none}.lst-kix_27hxptg4gai7-1>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-1,lower-latin) ". "}.lst-kix_copbltb02th5-2>li{counter-increment:lst-ctn-kix_copbltb02th5-2}ol.lst-kix_bp9hz8yehz1d-6{list-style-type:none}ol.lst-kix_gauh31kqom6-1.start{counter-reset:lst-ctn-kix_gauh31kqom6-1 0}ol.lst-kix_bp9hz8yehz1d-5{list-style-type:none}ol.lst-kix_bp9hz8yehz1d-8{list-style-type:none}ol.lst-kix_bp9hz8yehz1d-7{list-style-type:none}ol.lst-kix_hm07poadd9ox-2.start{counter-reset:lst-ctn-kix_hm07poadd9ox-2 0}ul.lst-kix_j85vvjrsn575-8{list-style-type:none}ol.lst-kix_27hxptg4gai7-2.start{counter-reset:lst-ctn-kix_27hxptg4gai7-2 0}.lst-kix_tfn897j8ydy5-7>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-7}.lst-kix_j85vvjrsn575-7>li:before{content:"\0025cb  "}.lst-kix_bq7g8rf0rrj4-6>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-6}.lst-kix_j85vvjrsn575-4>li:before{content:"\0025cb  "}.lst-kix_5k6l0dwe4053-0>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-0}.lst-kix_a8rxp583gbxi-0>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-0,decimal) ". "}.lst-kix_a8rxp583gbxi-8>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-8,lower-roman) ". "}ol.lst-kix_lofcf5qgynoy-8.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-8 0}ol.lst-kix_ywj8w8u4kf85-0{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-1{list-style-type:none}.lst-kix_8mhje5df4oh5-2>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-2}ol.lst-kix_gauh31kqom6-7.start{counter-reset:lst-ctn-kix_gauh31kqom6-7 0}ol.lst-kix_ywj8w8u4kf85-2{list-style-type:none}.lst-kix_ywj8w8u4kf85-1>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-1}.lst-kix_hm07poadd9ox-8>li{counter-increment:lst-ctn-kix_hm07poadd9ox-8}.lst-kix_gauh31kqom6-3>li{counter-increment:lst-ctn-kix_gauh31kqom6-3}ol.lst-kix_27hxptg4gai7-1.start{counter-reset:lst-ctn-kix_27hxptg4gai7-1 0}.lst-kix_65ys8kkzrj5c-8>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-8,lower-roman) ". "}ol.lst-kix_ywj8w8u4kf85-3{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-4{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-5{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-6{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-7{list-style-type:none}ol.lst-kix_ywj8w8u4kf85-8{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-5{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-6{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-3{list-style-type:none}ol.lst-kix_copbltb02th5-6.start{counter-reset:lst-ctn-kix_copbltb02th5-6 0}ol.lst-kix_m0c1udlgfhd3-4{list-style-type:none}ol.lst-kix_5k6l0dwe4053-7.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-7 0}ol.lst-kix_8mhje5df4oh5-0.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-0 0}ol.lst-kix_m0c1udlgfhd3-7{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-8{list-style-type:none}.lst-kix_copbltb02th5-8>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-8,lower-roman) ". "}ol.lst-kix_m0c1udlgfhd3-1{list-style-type:none}ol.lst-kix_m0c1udlgfhd3-2{list-style-type:none}.lst-kix_65ys8kkzrj5c-5>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-5,lower-roman) ". "}ol.lst-kix_m0c1udlgfhd3-0{list-style-type:none}.lst-kix_xshn85mjycb9-7>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-7,lower-latin) ". "}.lst-kix_tfn897j8ydy5-0>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-0}.lst-kix_copbltb02th5-5>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-5,lower-roman) ". "}.lst-kix_k4q9goalbvhz-5>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-5,lower-roman) ". "}.lst-kix_k4q9goalbvhz-4>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-4}.lst-kix_v9n3g8b4bso2-2>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-2}.lst-kix_copbltb02th5-6>li{counter-increment:lst-ctn-kix_copbltb02th5-6}.lst-kix_k4q9goalbvhz-0>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-0,decimal) ". "}.lst-kix_copbltb02th5-0>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-0,decimal) ". "}ol.lst-kix_lofcf5qgynoy-3.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-3 0}.lst-kix_hm07poadd9ox-1>li{counter-increment:lst-ctn-kix_hm07poadd9ox-1}.lst-kix_8mhje5df4oh5-0>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-0,decimal) ". "}.lst-kix_weg6rfcz2wrz-5>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-5}.lst-kix_m0c1udlgfhd3-1>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-1,lower-latin) ". "}.lst-kix_pv0lc9ud52rj-2>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-2}.lst-kix_8mhje5df4oh5-3>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-3,decimal) ". "}ol.lst-kix_copbltb02th5-5.start{counter-reset:lst-ctn-kix_copbltb02th5-5 0}.lst-kix_alu4m0l7kzsu-0>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-0}.lst-kix_alu4m0l7kzsu-6>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-6,decimal) ". "}ol.lst-kix_lofcf5qgynoy-2.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-2 0}.lst-kix_8mhje5df4oh5-8>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-8,lower-roman) ". "}.lst-kix_a8rxp583gbxi-5>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-5,lower-roman) ". "}ol.lst-kix_pv0lc9ud52rj-4{list-style-type:none}.lst-kix_mi4o6g2do3md-2>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-2}ol.lst-kix_pv0lc9ud52rj-3{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-6{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-5{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-8{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-7{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-0{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-2{list-style-type:none}ol.lst-kix_8mhje5df4oh5-1.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-1 0}ol.lst-kix_pv0lc9ud52rj-1{list-style-type:none}.lst-kix_35o00nmc9uck-2>li:before{content:"\0025a0  "}.lst-kix_8fcjh41mfjmf-3>li:before{content:"\0025cf  "}.lst-kix_tfn897j8ydy5-1>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-1,lower-latin) ". "}.lst-kix_bq7g8rf0rrj4-4>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-4,lower-latin) ". "}ol.lst-kix_copbltb02th5-5{list-style-type:none}ol.lst-kix_copbltb02th5-4{list-style-type:none}ol.lst-kix_copbltb02th5-7{list-style-type:none}.lst-kix_n5euz220wizo-3>li:before{content:"\0025cf  "}ol.lst-kix_copbltb02th5-6{list-style-type:none}.lst-kix_m0c1udlgfhd3-7>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-7}ol.lst-kix_copbltb02th5-8{list-style-type:none}.lst-kix_lofcf5qgynoy-3>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-3,decimal) ". "}.lst-kix_27hxptg4gai7-7>li{counter-increment:lst-ctn-kix_27hxptg4gai7-7}ol.lst-kix_lofcf5qgynoy-4.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-4 0}ol.lst-kix_copbltb02th5-1{list-style-type:none}ol.lst-kix_copbltb02th5-0{list-style-type:none}ol.lst-kix_copbltb02th5-3{list-style-type:none}ol.lst-kix_copbltb02th5-2{list-style-type:none}.lst-kix_bv8t4tqsyhv3-8>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-8}.lst-kix_n6b2eg7t7coe-3>li:before{content:"\0025cf  "}.lst-kix_alu4m0l7kzsu-7>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-7}.lst-kix_5k6l0dwe4053-5>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-5,lower-roman) ". "}ol.lst-kix_gauh31kqom6-6.start{counter-reset:lst-ctn-kix_gauh31kqom6-6 0}ol.lst-kix_lofcf5qgynoy-7.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-7 0}.lst-kix_mi4o6g2do3md-8>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-8,decimal) ". "}.lst-kix_tx2rtpvvwi5y-4>li:before{content:"-  "}.lst-kix_k4q9goalbvhz-8>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-8,lower-roman) ". "}.lst-kix_lofcf5qgynoy-0>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-0}.lst-kix_bq7g8rf0rrj4-3>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-3}.lst-kix_bv8t4tqsyhv3-2>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-2,lower-roman) ". "}.lst-kix_qv6q6ohs5rjd-6>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-6}.lst-kix_ywj8w8u4kf85-8>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-8}ol.lst-kix_lofcf5qgynoy-6.start{counter-reset:lst-ctn-kix_lofcf5qgynoy-6 0}ol.lst-kix_copbltb02th5-7.start{counter-reset:lst-ctn-kix_copbltb02th5-7 0}.lst-kix_weg6rfcz2wrz-4>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-4,lower-latin) ". "}.lst-kix_mi4o6g2do3md-0>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-0,lower-latin) ". "}.lst-kix_qv6q6ohs5rjd-2>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-2,lower-roman) ". "}.lst-kix_pv0lc9ud52rj-3>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-3,decimal) ". "}.lst-kix_lofcf5qgynoy-7>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-7}.lst-kix_v9n3g8b4bso2-6>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-6,decimal) ". "}ol.lst-kix_copbltb02th5-8.start{counter-reset:lst-ctn-kix_copbltb02th5-8 0}ol.lst-kix_gauh31kqom6-8.start{counter-reset:lst-ctn-kix_gauh31kqom6-8 0}.lst-kix_8mhje5df4oh5-3>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-3}.lst-kix_k4q9goalbvhz-1>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-1}ol.lst-kix_xshn85mjycb9-6.start{counter-reset:lst-ctn-kix_xshn85mjycb9-6 0}ol.lst-kix_pv0lc9ud52rj-1.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-1 0}.lst-kix_hm07poadd9ox-4>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-4,lower-latin) ". "}.lst-kix_hm07poadd9ox-5>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-5,lower-roman) ". "}ol.lst-kix_hm07poadd9ox-1.start{counter-reset:lst-ctn-kix_hm07poadd9ox-1 0}ol.lst-kix_s1tlcbif19zp-6.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-6 0}.lst-kix_hm07poadd9ox-6>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-6,decimal) ". "}.lst-kix_hm07poadd9ox-8>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-8,lower-roman) ". "}.lst-kix_65ys8kkzrj5c-5>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-5}ol.lst-kix_qv6q6ohs5rjd-2.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-2 0}ol.lst-kix_m0c1udlgfhd3-5.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-5 0}.lst-kix_hm07poadd9ox-7>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-7,lower-latin) ". "}.lst-kix_gauh31kqom6-6>li{counter-increment:lst-ctn-kix_gauh31kqom6-6}.lst-kix_m0c1udlgfhd3-0>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-0}ol.lst-kix_s1tlcbif19zp-1.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-1 0}ol.lst-kix_alu4m0l7kzsu-8.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-8 0}ol.lst-kix_5k6l0dwe4053-4.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-4 0}.lst-kix_hm07poadd9ox-3>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-3,decimal) ". "}.lst-kix_bp9hz8yehz1d-7>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-7}.lst-kix_hm07poadd9ox-2>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-2,lower-roman) ". "}.lst-kix_hm07poadd9ox-1>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-1,lower-latin) ". "}.lst-kix_alu4m0l7kzsu-1>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-1}.lst-kix_hm07poadd9ox-0>li:before{content:"" counter(lst-ctn-kix_hm07poadd9ox-0,decimal) ". "}ol.lst-kix_ywj8w8u4kf85-4.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-4 0}.lst-kix_s1tlcbif19zp-5>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-5}ol.lst-kix_gauh31kqom6-5.start{counter-reset:lst-ctn-kix_gauh31kqom6-5 0}.lst-kix_ywj8w8u4kf85-8>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-8,lower-roman) ". "}ol.lst-kix_copbltb02th5-4.start{counter-reset:lst-ctn-kix_copbltb02th5-4 0}.lst-kix_bp9hz8yehz1d-0>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-0}.lst-kix_ywj8w8u4kf85-6>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-6,decimal) ". "}.lst-kix_gauh31kqom6-8>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-8,lower-roman) ". "}.lst-kix_bv8t4tqsyhv3-1>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-1}.lst-kix_gauh31kqom6-6>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-6,decimal) ". "}.lst-kix_ywj8w8u4kf85-3>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-3,decimal) ". "}.lst-kix_ywj8w8u4kf85-7>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-7,lower-latin) ". "}ol.lst-kix_pv0lc9ud52rj-6.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-6 0}.lst-kix_ywj8w8u4kf85-4>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-4,lower-latin) ". "}.lst-kix_gauh31kqom6-7>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-7,lower-latin) ". "}.lst-kix_ywj8w8u4kf85-5>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-5,lower-roman) ". "}ol.lst-kix_hm07poadd9ox-6.start{counter-reset:lst-ctn-kix_hm07poadd9ox-6 0}.lst-kix_gauh31kqom6-0>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-0,decimal) ". "}.lst-kix_gauh31kqom6-1>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-1,lower-latin) ". "}.lst-kix_27hxptg4gai7-0>li{counter-increment:lst-ctn-kix_27hxptg4gai7-0}.lst-kix_gauh31kqom6-2>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-2,lower-roman) ". "}.lst-kix_ywj8w8u4kf85-2>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-2,lower-roman) ". "}.lst-kix_pv0lc9ud52rj-5>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-5}.lst-kix_gauh31kqom6-4>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-4,lower-latin) ". "}.lst-kix_gauh31kqom6-5>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-5,lower-roman) ". "}.lst-kix_ywj8w8u4kf85-0>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-0,decimal) ". "}.lst-kix_gauh31kqom6-3>li:before{content:"" counter(lst-ctn-kix_gauh31kqom6-3,decimal) ". "}.lst-kix_ywj8w8u4kf85-1>li:before{content:"" counter(lst-ctn-kix_ywj8w8u4kf85-1,lower-latin) ". "}.lst-kix_4m0mdyjfxvwq-8>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-8}.lst-kix_bq7g8rf0rrj4-1>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-1}ol.lst-kix_27hxptg4gai7-5.start{counter-reset:lst-ctn-kix_27hxptg4gai7-5 0}ol.lst-kix_v9n3g8b4bso2-2.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-2 0}ol.lst-kix_weg6rfcz2wrz-6.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-6 0}ol.lst-kix_gauh31kqom6-0.start{counter-reset:lst-ctn-kix_gauh31kqom6-0 0}.lst-kix_v9n3g8b4bso2-4>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-4}.lst-kix_608j9sd8cqoy-6>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-6}ol.lst-kix_27hxptg4gai7-0.start{counter-reset:lst-ctn-kix_27hxptg4gai7-0 0}ol.lst-kix_bv8t4tqsyhv3-2.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-2 0}.lst-kix_copbltb02th5-3>li{counter-increment:lst-ctn-kix_copbltb02th5-3}.lst-kix_tfn897j8ydy5-8>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-8}.lst-kix_v9n3g8b4bso2-5>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-5}.lst-kix_608j9sd8cqoy-5>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-5}.lst-kix_35o00nmc9uck-1>li:before{content:"\0025cb  "}.lst-kix_n6b2eg7t7coe-6>li:before{content:"\0025cf  "}.lst-kix_m0c1udlgfhd3-6>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-6,decimal) ". "}.lst-kix_tx2rtpvvwi5y-1>li:before{content:"-  "}.lst-kix_xshn85mjycb9-6>li{counter-increment:lst-ctn-kix_xshn85mjycb9-6}.lst-kix_n6b2eg7t7coe-4>li:before{content:"\0025cb  "}.lst-kix_35o00nmc9uck-3>li:before{content:"\0025cf  "}.lst-kix_m0c1udlgfhd3-8>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-8,lower-roman) ". "}.lst-kix_tx2rtpvvwi5y-5>li:before{content:"-  "}.lst-kix_tx2rtpvvwi5y-7>li:before{content:"-  "}.lst-kix_a8rxp583gbxi-5>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-5}ol.lst-kix_8mhje5df4oh5-6.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-6 0}ol.lst-kix_bp9hz8yehz1d-8.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-8 0}.lst-kix_35o00nmc9uck-5>li:before{content:"\0025a0  "}ol.lst-kix_tfn897j8ydy5-7.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-7 0}.lst-kix_tx2rtpvvwi5y-3>li:before{content:"-  "}.lst-kix_n6b2eg7t7coe-8>li:before{content:"\0025a0  "}.lst-kix_35o00nmc9uck-7>li:before{content:"\0025cb  "}.lst-kix_ywj8w8u4kf85-6>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-6}.lst-kix_bv8t4tqsyhv3-7>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-7,lower-latin) ". "}ol.lst-kix_v9n3g8b4bso2-8{list-style-type:none}ol.lst-kix_xshn85mjycb9-1.start{counter-reset:lst-ctn-kix_xshn85mjycb9-1 0}.lst-kix_bv8t4tqsyhv3-1>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-1,lower-latin) ". "}ol.lst-kix_4m0mdyjfxvwq-8.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-8 0}.lst-kix_v9n3g8b4bso2-7>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-7,lower-latin) ". "}.lst-kix_n6b2eg7t7coe-2>li:before{content:"\0025a0  "}.lst-kix_bv8t4tqsyhv3-3>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-3,decimal) ". "}ol.lst-kix_m0c1udlgfhd3-0.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-0 0}ol.lst-kix_k4q9goalbvhz-4.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-4 0}ol.lst-kix_qv6q6ohs5rjd-7.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-7 0}.lst-kix_n6b2eg7t7coe-0>li:before{content:"  "}.lst-kix_bv8t4tqsyhv3-5>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-5,lower-roman) ". "}ol.lst-kix_bq7g8rf0rrj4-2.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-2 0}ol.lst-kix_alu4m0l7kzsu-3.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-3 0}.lst-kix_v9n3g8b4bso2-3>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-3,decimal) ". "}ol.lst-kix_4m0mdyjfxvwq-7.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-7 0}.lst-kix_v9n3g8b4bso2-5>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-5,lower-roman) ". "}.lst-kix_ywj8w8u4kf85-5>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-5}.lst-kix_bp9hz8yehz1d-8>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-8}ol.lst-kix_v9n3g8b4bso2-1{list-style-type:none}ol.lst-kix_v9n3g8b4bso2-0{list-style-type:none}ol.lst-kix_v9n3g8b4bso2-3{list-style-type:none}ol.lst-kix_v9n3g8b4bso2-2{list-style-type:none}ol.lst-kix_v9n3g8b4bso2-5{list-style-type:none}ol.lst-kix_65ys8kkzrj5c-1.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-1 0}ol.lst-kix_v9n3g8b4bso2-4{list-style-type:none}.lst-kix_tfn897j8ydy5-1>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-1}ol.lst-kix_v9n3g8b4bso2-7{list-style-type:none}ol.lst-kix_v9n3g8b4bso2-6{list-style-type:none}ol.lst-kix_k4q9goalbvhz-5.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-5 0}ol.lst-kix_mi4o6g2do3md-4.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-4 0}.lst-kix_v9n3g8b4bso2-1>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-1,lower-latin) ". "}.lst-kix_a8rxp583gbxi-2>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-2,lower-roman) ". "}.lst-kix_a8rxp583gbxi-3>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-3,decimal) ". "}.lst-kix_pv0lc9ud52rj-4>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-4}.lst-kix_s1tlcbif19zp-4>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-4}ol.lst-kix_65ys8kkzrj5c-5.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-5 0}.lst-kix_a8rxp583gbxi-7>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-7,lower-latin) ". "}ol.lst-kix_8mhje5df4oh5-5.start{counter-reset:lst-ctn-kix_8mhje5df4oh5-5 0}ul.lst-kix_35o00nmc9uck-1{list-style-type:none}ul.lst-kix_35o00nmc9uck-0{list-style-type:none}ul.lst-kix_35o00nmc9uck-3{list-style-type:none}.lst-kix_m0c1udlgfhd3-1>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-1}.lst-kix_65ys8kkzrj5c-4>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-4}ul.lst-kix_35o00nmc9uck-2{list-style-type:none}ul.lst-kix_35o00nmc9uck-5{list-style-type:none}ul.lst-kix_35o00nmc9uck-4{list-style-type:none}.lst-kix_4m0mdyjfxvwq-7>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-7}ol.lst-kix_a8rxp583gbxi-7.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-7 0}.lst-kix_27hxptg4gai7-1>li{counter-increment:lst-ctn-kix_27hxptg4gai7-1}.lst-kix_tfn897j8ydy5-2>li{counter-increment:lst-ctn-kix_tfn897j8ydy5-2}ol.lst-kix_v9n3g8b4bso2-6.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-6 0}ol.lst-kix_608j9sd8cqoy-8.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-8 0}.lst-kix_bv8t4tqsyhv3-2>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-2}.lst-kix_65ys8kkzrj5c-6>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-6}.lst-kix_pv0lc9ud52rj-6>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-6}.lst-kix_xshn85mjycb9-4>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-4,lower-latin) ". "}.lst-kix_qv6q6ohs5rjd-7>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-7}ol.lst-kix_a8rxp583gbxi-1.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-1 0}.lst-kix_65ys8kkzrj5c-3>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-3,decimal) ". "}.lst-kix_65ys8kkzrj5c-7>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-7,lower-latin) ". "}.lst-kix_xshn85mjycb9-5>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-5,lower-roman) ". "}.lst-kix_k4q9goalbvhz-6>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-6,decimal) ". "}.lst-kix_xshn85mjycb9-8>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-8,lower-roman) ". "}ol.lst-kix_4m0mdyjfxvwq-2.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-2 0}.lst-kix_65ys8kkzrj5c-6>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-6,decimal) ". "}.lst-kix_k4q9goalbvhz-7>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-7,lower-latin) ". "}.lst-kix_qv6q6ohs5rjd-5>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-5}ol.lst-kix_v9n3g8b4bso2-1.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-1 0}.lst-kix_bp9hz8yehz1d-6>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-6}.lst-kix_k4q9goalbvhz-3>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-3,decimal) ". "}.lst-kix_k4q9goalbvhz-2>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-2,lower-roman) ". "}ol.lst-kix_27hxptg4gai7-6.start{counter-reset:lst-ctn-kix_27hxptg4gai7-6 0}.lst-kix_m0c1udlgfhd3-4>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-4,lower-latin) ". "}.lst-kix_xshn85mjycb9-5>li{counter-increment:lst-ctn-kix_xshn85mjycb9-5}ol.lst-kix_608j9sd8cqoy-3.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-3 0}.lst-kix_m0c1udlgfhd3-3>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-3,decimal) ". "}.lst-kix_tfn897j8ydy5-0>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-0,decimal) ". "}.lst-kix_s1tlcbif19zp-6>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-6}.lst-kix_m0c1udlgfhd3-0>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-0,decimal) ". "}ul.lst-kix_35o00nmc9uck-7{list-style-type:none}ul.lst-kix_35o00nmc9uck-6{list-style-type:none}ul.lst-kix_35o00nmc9uck-8{list-style-type:none}.lst-kix_m0c1udlgfhd3-8>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-8}.lst-kix_a8rxp583gbxi-6>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-6,decimal) ". "}ol.lst-kix_a8rxp583gbxi-6.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-6 0}ol.lst-kix_ywj8w8u4kf85-0.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-0 0}.lst-kix_weg6rfcz2wrz-4>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-4}.lst-kix_a8rxp583gbxi-4>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-4}ol.lst-kix_608j9sd8cqoy-4.start{counter-reset:lst-ctn-kix_608j9sd8cqoy-4 0}.lst-kix_27hxptg4gai7-8>li{counter-increment:lst-ctn-kix_27hxptg4gai7-8}ol.lst-kix_alu4m0l7kzsu-7.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-7 0}.lst-kix_4m0mdyjfxvwq-0>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-0}ol.lst-kix_ywj8w8u4kf85-3.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-3 0}ol.lst-kix_4m0mdyjfxvwq-3.start{counter-reset:lst-ctn-kix_4m0mdyjfxvwq-3 0}.lst-kix_hm07poadd9ox-2>li{counter-increment:lst-ctn-kix_hm07poadd9ox-2}.lst-kix_35o00nmc9uck-0>li:before{content:"\0025cf  "}.lst-kix_tfn897j8ydy5-3>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-3,decimal) ". "}.lst-kix_m0c1udlgfhd3-7>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-7,lower-latin) ". "}.lst-kix_5k6l0dwe4053-4>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-4}.lst-kix_bq7g8rf0rrj4-2>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-2}.lst-kix_tx2rtpvvwi5y-2>li:before{content:"-  "}.lst-kix_n6b2eg7t7coe-5>li:before{content:"\0025a0  "}.lst-kix_35o00nmc9uck-4>li:before{content:"\0025cb  "}.lst-kix_tfn897j8ydy5-7>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-7,lower-latin) ". "}ol.lst-kix_65ys8kkzrj5c-6.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-6 0}.lst-kix_m0c1udlgfhd3-6>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-6}.lst-kix_v9n3g8b4bso2-6>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-6}ol.lst-kix_k4q9goalbvhz-0.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-0 0}ol.lst-kix_qv6q6ohs5rjd-3.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-3 0}.lst-kix_k4q9goalbvhz-8>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-8}.lst-kix_tx2rtpvvwi5y-6>li:before{content:"-  "}ol.lst-kix_s1tlcbif19zp-7.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-7 0}ol.lst-kix_v9n3g8b4bso2-7.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-7 0}.lst-kix_35o00nmc9uck-8>li:before{content:"\0025a0  "}.lst-kix_lofcf5qgynoy-6>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-6}.lst-kix_bv8t4tqsyhv3-8>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-8,lower-roman) ". "}ol.lst-kix_608j9sd8cqoy-2{list-style-type:none}ol.lst-kix_608j9sd8cqoy-1{list-style-type:none}ol.lst-kix_608j9sd8cqoy-4{list-style-type:none}ol.lst-kix_608j9sd8cqoy-3{list-style-type:none}ol.lst-kix_hm07poadd9ox-7.start{counter-reset:lst-ctn-kix_hm07poadd9ox-7 0}ol.lst-kix_608j9sd8cqoy-0{list-style-type:none}ol.lst-kix_5k6l0dwe4053-0.start{counter-reset:lst-ctn-kix_5k6l0dwe4053-0 0}.lst-kix_n6b2eg7t7coe-1>li:before{content:"\0025cb  "}ol.lst-kix_a8rxp583gbxi-2.start{counter-reset:lst-ctn-kix_a8rxp583gbxi-2 0}.lst-kix_v9n3g8b4bso2-8>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-8,lower-roman) ". "}.lst-kix_xshn85mjycb9-1>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-1,lower-latin) ". "}.lst-kix_bv8t4tqsyhv3-4>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-4,lower-latin) ". "}ol.lst-kix_608j9sd8cqoy-6{list-style-type:none}ol.lst-kix_608j9sd8cqoy-5{list-style-type:none}ol.lst-kix_608j9sd8cqoy-8{list-style-type:none}ol.lst-kix_608j9sd8cqoy-7{list-style-type:none}.lst-kix_alu4m0l7kzsu-8>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-8}.lst-kix_v9n3g8b4bso2-0>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-0,decimal) ". "}ol.lst-kix_qv6q6ohs5rjd-1.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-1 0}ol.lst-kix_27hxptg4gai7-0{list-style-type:none}ol.lst-kix_27hxptg4gai7-1{list-style-type:none}ol.lst-kix_27hxptg4gai7-2{list-style-type:none}.lst-kix_v9n3g8b4bso2-4>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-4,lower-latin) ". "}ol.lst-kix_27hxptg4gai7-3{list-style-type:none}ol.lst-kix_27hxptg4gai7-4{list-style-type:none}ol.lst-kix_27hxptg4gai7-5{list-style-type:none}ol.lst-kix_27hxptg4gai7-6{list-style-type:none}ol.lst-kix_27hxptg4gai7-7{list-style-type:none}.lst-kix_qv6q6ohs5rjd-0>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-0}ol.lst-kix_27hxptg4gai7-8{list-style-type:none}.lst-kix_bv8t4tqsyhv3-0>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-0,decimal) ". "}.lst-kix_mi4o6g2do3md-3>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-3}ol.lst-kix_m0c1udlgfhd3-6.start{counter-reset:lst-ctn-kix_m0c1udlgfhd3-6 0}.lst-kix_copbltb02th5-5>li{counter-increment:lst-ctn-kix_copbltb02th5-5}.lst-kix_608j9sd8cqoy-5>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-5,decimal) ". "}.lst-kix_608j9sd8cqoy-4>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-4,lower-roman) ". "}.lst-kix_608j9sd8cqoy-7>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-7,lower-roman) ". "}ol.lst-kix_bq7g8rf0rrj4-1.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-1 0}.lst-kix_ywj8w8u4kf85-0>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-0}ul.lst-kix_n6b2eg7t7coe-3{list-style-type:none}ul.lst-kix_n6b2eg7t7coe-2{list-style-type:none}.lst-kix_27hxptg4gai7-2>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-2,lower-roman) ". "}ul.lst-kix_n6b2eg7t7coe-1{list-style-type:none}ul.lst-kix_n6b2eg7t7coe-0{list-style-type:none}.lst-kix_bv8t4tqsyhv3-3>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-3}ul.lst-kix_n6b2eg7t7coe-7{list-style-type:none}ol.lst-kix_bv8t4tqsyhv3-6.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-6 0}ul.lst-kix_n6b2eg7t7coe-6{list-style-type:none}ul.lst-kix_n6b2eg7t7coe-5{list-style-type:none}.lst-kix_608j9sd8cqoy-0>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-0}.lst-kix_qv6q6ohs5rjd-8>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-8}ul.lst-kix_n6b2eg7t7coe-4{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-7.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-7 0}.lst-kix_27hxptg4gai7-5>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-5,lower-roman) ". "}.lst-kix_homsmz78n1gf-1>li:before{content:"-  "}ol.lst-kix_weg6rfcz2wrz-0.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-0 0}ol.lst-kix_xshn85mjycb9-0.start{counter-reset:lst-ctn-kix_xshn85mjycb9-0 0}.lst-kix_s1tlcbif19zp-3>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-3}.lst-kix_27hxptg4gai7-7>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-7,lower-latin) ". "}.lst-kix_27hxptg4gai7-8>li:before{content:"" counter(lst-ctn-kix_27hxptg4gai7-8,lower-roman) ". "}ol.lst-kix_tfn897j8ydy5-8.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-8 0}ol.lst-kix_4m0mdyjfxvwq-8{list-style-type:none}.lst-kix_xshn85mjycb9-0>li{counter-increment:lst-ctn-kix_xshn85mjycb9-0}ol.lst-kix_mi4o6g2do3md-5.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-5 0}.lst-kix_bp9hz8yehz1d-2>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-2,lower-roman) ". "}.lst-kix_bp9hz8yehz1d-1>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-1,lower-latin) ". "}ol.lst-kix_65ys8kkzrj5c-2.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-2 0}.lst-kix_homsmz78n1gf-3>li:before{content:"-  "}ul.lst-kix_n6b2eg7t7coe-8{list-style-type:none}.lst-kix_homsmz78n1gf-4>li:before{content:"-  "}.lst-kix_homsmz78n1gf-6>li:before{content:"-  "}.lst-kix_608j9sd8cqoy-2>li:before{content:"" counter(lst-ctn-kix_608j9sd8cqoy-2,decimal) ". "}.lst-kix_8mhje5df4oh5-1>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-1}.lst-kix_27hxptg4gai7-2>li{counter-increment:lst-ctn-kix_27hxptg4gai7-2}ol.lst-kix_bq7g8rf0rrj4-6.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-6 0}.lst-kix_pv0lc9ud52rj-3>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-3}ol.lst-kix_v9n3g8b4bso2-8.start{counter-reset:lst-ctn-kix_v9n3g8b4bso2-8 0}ol.lst-kix_ywj8w8u4kf85-5.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-5 0}ol.lst-kix_k4q9goalbvhz-8.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-8 0}.lst-kix_gauh31kqom6-8>li{counter-increment:lst-ctn-kix_gauh31kqom6-8}ol.lst-kix_s1tlcbif19zp-0.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-0 0}ol.lst-kix_bp9hz8yehz1d-7.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-7 0}.lst-kix_bv8t4tqsyhv3-7>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-7}ol.lst-kix_xshn85mjycb9-5.start{counter-reset:lst-ctn-kix_xshn85mjycb9-5 0}ol.lst-kix_k4q9goalbvhz-1.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-1 0}ol.lst-kix_weg6rfcz2wrz-5.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-5 0}ol.lst-kix_4m0mdyjfxvwq-1{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-0{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-3{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-2{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-5{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-4{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-7{list-style-type:none}ol.lst-kix_4m0mdyjfxvwq-6{list-style-type:none}.lst-kix_27hxptg4gai7-6>li{counter-increment:lst-ctn-kix_27hxptg4gai7-6}.lst-kix_hm07poadd9ox-7>li{counter-increment:lst-ctn-kix_hm07poadd9ox-7}ol.lst-kix_mi4o6g2do3md-0.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-0 0}.lst-kix_bq7g8rf0rrj4-8>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-8,lower-roman) ". "}.lst-kix_ywj8w8u4kf85-7>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-7}ol.lst-kix_s1tlcbif19zp-5.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-5 0}ol.lst-kix_bp9hz8yehz1d-0.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-0 0}.lst-kix_m0c1udlgfhd3-2>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-2}ol.lst-kix_s1tlcbif19zp-2.start{counter-reset:lst-ctn-kix_s1tlcbif19zp-2 0}ol.lst-kix_k4q9goalbvhz-3.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-3 0}.lst-kix_xshn85mjycb9-7>li{counter-increment:lst-ctn-kix_xshn85mjycb9-7}ol.lst-kix_k4q9goalbvhz-6.start{counter-reset:lst-ctn-kix_k4q9goalbvhz-6 0}.lst-kix_lofcf5qgynoy-2>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-2,lower-roman) ". "}ul.lst-kix_8fcjh41mfjmf-7{list-style-type:none}.lst-kix_alu4m0l7kzsu-8>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-8,lower-roman) ". "}ul.lst-kix_8fcjh41mfjmf-8{list-style-type:none}.lst-kix_bq7g8rf0rrj4-3>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-3,decimal) ". "}.lst-kix_xshn85mjycb9-8>li{counter-increment:lst-ctn-kix_xshn85mjycb9-8}.lst-kix_alu4m0l7kzsu-6>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-6}ol.lst-kix_weg6rfcz2wrz-7.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-7 0}.lst-kix_lofcf5qgynoy-4>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-4,lower-latin) ". "}.lst-kix_n5euz220wizo-4>li:before{content:"\0025cb  "}.lst-kix_tfn897j8ydy5-2>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-2,lower-roman) ". "}.lst-kix_bq7g8rf0rrj4-5>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-5,lower-roman) ". "}.lst-kix_n5euz220wizo-2>li:before{content:"\0025a0  "}ol.lst-kix_qv6q6ohs5rjd-6.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-6 0}.lst-kix_v9n3g8b4bso2-3>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-3}.lst-kix_tfn897j8ydy5-8>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-8,lower-roman) ". "}.lst-kix_copbltb02th5-1>li{counter-increment:lst-ctn-kix_copbltb02th5-1}.lst-kix_mi4o6g2do3md-1>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-1}ol.lst-kix_k4q9goalbvhz-8{list-style-type:none}ol.lst-kix_k4q9goalbvhz-7{list-style-type:none}ol.lst-kix_k4q9goalbvhz-6{list-style-type:none}ol.lst-kix_k4q9goalbvhz-5{list-style-type:none}.lst-kix_weg6rfcz2wrz-6>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-6}ol.lst-kix_bq7g8rf0rrj4-3.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-3 0}.lst-kix_bp9hz8yehz1d-1>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-1}.lst-kix_27hxptg4gai7-5>li{counter-increment:lst-ctn-kix_27hxptg4gai7-5}.lst-kix_5k6l0dwe4053-6>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-6,decimal) ". "}ol.lst-kix_k4q9goalbvhz-0{list-style-type:none}.lst-kix_hm07poadd9ox-0>li{counter-increment:lst-ctn-kix_hm07poadd9ox-0}ol.lst-kix_alu4m0l7kzsu-4.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-4 0}.lst-kix_608j9sd8cqoy-7>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-7}ol.lst-kix_k4q9goalbvhz-4{list-style-type:none}ol.lst-kix_k4q9goalbvhz-3{list-style-type:none}ol.lst-kix_pv0lc9ud52rj-0.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-0 0}.lst-kix_qv6q6ohs5rjd-4>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-4}ol.lst-kix_k4q9goalbvhz-2{list-style-type:none}ol.lst-kix_k4q9goalbvhz-1{list-style-type:none}.lst-kix_5k6l0dwe4053-4>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-4,lower-latin) ". "}.lst-kix_qv6q6ohs5rjd-1>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-1,lower-latin) ". "}.lst-kix_pv0lc9ud52rj-2>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-2,lower-roman) ". "}.lst-kix_pv0lc9ud52rj-4>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-4,lower-latin) ". "}.lst-kix_s1tlcbif19zp-7>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-7}.lst-kix_bv8t4tqsyhv3-6>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-6}ol.lst-kix_pv0lc9ud52rj-2.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-2 0}ol.lst-kix_alu4m0l7kzsu-2.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-2 0}.lst-kix_bv8t4tqsyhv3-0>li{counter-increment:lst-ctn-kix_bv8t4tqsyhv3-0}.lst-kix_5k6l0dwe4053-2>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-2}ol.lst-kix_bv8t4tqsyhv3-1.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-1 0}.lst-kix_weg6rfcz2wrz-5>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-5,lower-roman) ". "}ol.lst-kix_mi4o6g2do3md-3.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-3 0}.lst-kix_weg6rfcz2wrz-3>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-3,decimal) ". "}ol.lst-kix_65ys8kkzrj5c-0.start{counter-reset:lst-ctn-kix_65ys8kkzrj5c-0 0}.lst-kix_qv6q6ohs5rjd-3>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-3,decimal) ". "}.lst-kix_xshn85mjycb9-0>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-0,decimal) ". "}.lst-kix_bp9hz8yehz1d-4>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-4,lower-latin) ". "}ol.lst-kix_ywj8w8u4kf85-8.start{counter-reset:lst-ctn-kix_ywj8w8u4kf85-8 0}.lst-kix_a8rxp583gbxi-6>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-6}.lst-kix_weg6rfcz2wrz-7>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-7}ol.lst-kix_xshn85mjycb9-2.start{counter-reset:lst-ctn-kix_xshn85mjycb9-2 0}.lst-kix_k4q9goalbvhz-6>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-6}.lst-kix_bp9hz8yehz1d-2>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-2}ol.lst-kix_qv6q6ohs5rjd-8.start{counter-reset:lst-ctn-kix_qv6q6ohs5rjd-8 0}.lst-kix_gauh31kqom6-1>li{counter-increment:lst-ctn-kix_gauh31kqom6-1}ol.lst-kix_pv0lc9ud52rj-4.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-4 0}ol.lst-kix_weg6rfcz2wrz-3.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-3 0}ol.lst-kix_xshn85mjycb9-3.start{counter-reset:lst-ctn-kix_xshn85mjycb9-3 0}.lst-kix_j85vvjrsn575-8>li:before{content:"\0025a0  "}.lst-kix_copbltb02th5-8>li{counter-increment:lst-ctn-kix_copbltb02th5-8}.lst-kix_j85vvjrsn575-3>li:before{content:"\0025cf  "}.lst-kix_gauh31kqom6-5>li{counter-increment:lst-ctn-kix_gauh31kqom6-5}.lst-kix_a8rxp583gbxi-1>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-1,lower-latin) ". "}ol.lst-kix_bq7g8rf0rrj4-4.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-4 0}ol.lst-kix_alu4m0l7kzsu-0.start{counter-reset:lst-ctn-kix_alu4m0l7kzsu-0 0}ol.lst-kix_tfn897j8ydy5-0.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-0 0}.lst-kix_j85vvjrsn575-0>li:before{content:"\0025cf  "}ol.lst-kix_mi4o6g2do3md-8.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-8 0}.lst-kix_v9n3g8b4bso2-0>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-0}ol.lst-kix_bv8t4tqsyhv3-3.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-3 0}.lst-kix_bq7g8rf0rrj4-8>li{counter-increment:lst-ctn-kix_bq7g8rf0rrj4-8}.lst-kix_xshn85mjycb9-3>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-3,decimal) ". "}.lst-kix_65ys8kkzrj5c-4>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-4,lower-latin) ". "}.lst-kix_hm07poadd9ox-6>li{counter-increment:lst-ctn-kix_hm07poadd9ox-6}.lst-kix_k4q9goalbvhz-2>li{counter-increment:lst-ctn-kix_k4q9goalbvhz-2}.lst-kix_xshn85mjycb9-6>li:before{content:"" counter(lst-ctn-kix_xshn85mjycb9-6,decimal) ". "}.lst-kix_8mhje5df4oh5-4>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-4}.lst-kix_copbltb02th5-4>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-4,lower-latin) ". "}.lst-kix_ywj8w8u4kf85-3>li{counter-increment:lst-ctn-kix_ywj8w8u4kf85-3}.lst-kix_k4q9goalbvhz-4>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-4,lower-latin) ". "}ol.lst-kix_tfn897j8ydy5-6.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-6 0}.lst-kix_8mhje5df4oh5-0>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-0}ol.lst-kix_lofcf5qgynoy-0{list-style-type:none}ol.lst-kix_lofcf5qgynoy-2{list-style-type:none}.lst-kix_k4q9goalbvhz-1>li:before{content:"" counter(lst-ctn-kix_k4q9goalbvhz-1,lower-latin) ". "}ol.lst-kix_lofcf5qgynoy-1{list-style-type:none}.lst-kix_copbltb02th5-1>li:before{content:"" counter(lst-ctn-kix_copbltb02th5-1,lower-latin) ". "}.lst-kix_s1tlcbif19zp-0>li{counter-increment:lst-ctn-kix_s1tlcbif19zp-0}.lst-kix_65ys8kkzrj5c-8>li{counter-increment:lst-ctn-kix_65ys8kkzrj5c-8}ol.lst-kix_bv8t4tqsyhv3-4.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-4 0}.lst-kix_m0c1udlgfhd3-2>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-2,lower-roman) ". "}ul.lst-kix_8fcjh41mfjmf-1{list-style-type:none}ol.lst-kix_tfn897j8ydy5-5.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-5 0}ul.lst-kix_8fcjh41mfjmf-2{list-style-type:none}ol.lst-kix_bq7g8rf0rrj4-5.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-5 0}ul.lst-kix_8fcjh41mfjmf-0{list-style-type:none}ul.lst-kix_8fcjh41mfjmf-5{list-style-type:none}.lst-kix_lofcf5qgynoy-5>li{counter-increment:lst-ctn-kix_lofcf5qgynoy-5}ul.lst-kix_8fcjh41mfjmf-6{list-style-type:none}ul.lst-kix_8fcjh41mfjmf-3{list-style-type:none}ul.lst-kix_8fcjh41mfjmf-4{list-style-type:none}.lst-kix_8mhje5df4oh5-7>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-7,lower-latin) ". "}.lst-kix_alu4m0l7kzsu-5>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-5,lower-roman) ". "}.lst-kix_8mhje5df4oh5-4>li:before{content:"" counter(lst-ctn-kix_8mhje5df4oh5-4,lower-latin) ". "}ol.lst-kix_mi4o6g2do3md-7.start{counter-reset:lst-ctn-kix_mi4o6g2do3md-7 0}.lst-kix_alu4m0l7kzsu-2>li:before{content:"" counter(lst-ctn-kix_alu4m0l7kzsu-2,lower-roman) ". "}.lst-kix_m0c1udlgfhd3-5>li{counter-increment:lst-ctn-kix_m0c1udlgfhd3-5}.lst-kix_a8rxp583gbxi-4>li:before{content:"" counter(lst-ctn-kix_a8rxp583gbxi-4,lower-latin) ". "}ol.lst-kix_pv0lc9ud52rj-5.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-5 0}ol.lst-kix_tfn897j8ydy5-4.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-4 0}.lst-kix_5k6l0dwe4053-1>li:before{content:"" counter(lst-ctn-kix_5k6l0dwe4053-1,lower-latin) ". "}ol.lst-kix_bq7g8rf0rrj4-8.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-8 0}.lst-kix_lofcf5qgynoy-7>li:before{content:"" counter(lst-ctn-kix_lofcf5qgynoy-7,lower-latin) ". "}.lst-kix_tx2rtpvvwi5y-8>li:before{content:"-  "}.lst-kix_5k6l0dwe4053-5>li{counter-increment:lst-ctn-kix_5k6l0dwe4053-5}.lst-kix_4m0mdyjfxvwq-1>li{counter-increment:lst-ctn-kix_4m0mdyjfxvwq-1}.lst-kix_a8rxp583gbxi-3>li{counter-increment:lst-ctn-kix_a8rxp583gbxi-3}.lst-kix_m0c1udlgfhd3-5>li:before{content:"" counter(lst-ctn-kix_m0c1udlgfhd3-5,lower-roman) ". "}.lst-kix_tfn897j8ydy5-5>li:before{content:"" counter(lst-ctn-kix_tfn897j8ydy5-5,lower-roman) ". "}ol.lst-kix_s1tlcbif19zp-7{list-style-type:none}ol.lst-kix_lofcf5qgynoy-4{list-style-type:none}ol.lst-kix_s1tlcbif19zp-8{list-style-type:none}ol.lst-kix_bp9hz8yehz1d-2.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-2 0}ol.lst-kix_lofcf5qgynoy-3{list-style-type:none}.lst-kix_copbltb02th5-4>li{counter-increment:lst-ctn-kix_copbltb02th5-4}ol.lst-kix_lofcf5qgynoy-6{list-style-type:none}ol.lst-kix_lofcf5qgynoy-5{list-style-type:none}.lst-kix_mi4o6g2do3md-4>li{counter-increment:lst-ctn-kix_mi4o6g2do3md-4}ol.lst-kix_weg6rfcz2wrz-4.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-4 0}.lst-kix_weg6rfcz2wrz-8>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-8,lower-roman) ". "}ol.lst-kix_lofcf5qgynoy-8{list-style-type:none}ol.lst-kix_lofcf5qgynoy-7{list-style-type:none}.lst-kix_weg6rfcz2wrz-3>li{counter-increment:lst-ctn-kix_weg6rfcz2wrz-3}.lst-kix_mi4o6g2do3md-4>li:before{content:"" counter(lst-ctn-kix_mi4o6g2do3md-4,lower-roman) ". "}.lst-kix_tx2rtpvvwi5y-0>li:before{content:"-  "}ol.lst-kix_s1tlcbif19zp-0{list-style-type:none}ol.lst-kix_tfn897j8ydy5-1.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-1 0}ol.lst-kix_s1tlcbif19zp-1{list-style-type:none}ol.lst-kix_hm07poadd9ox-7{list-style-type:none}ol.lst-kix_s1tlcbif19zp-2{list-style-type:none}ol.lst-kix_hm07poadd9ox-8{list-style-type:none}ol.lst-kix_s1tlcbif19zp-3{list-style-type:none}ol.lst-kix_hm07poadd9ox-5{list-style-type:none}ol.lst-kix_s1tlcbif19zp-4{list-style-type:none}ol.lst-kix_hm07poadd9ox-6{list-style-type:none}.lst-kix_pv0lc9ud52rj-0>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-0}ol.lst-kix_s1tlcbif19zp-5{list-style-type:none}ol.lst-kix_hm07poadd9ox-3{list-style-type:none}ol.lst-kix_s1tlcbif19zp-6{list-style-type:none}.lst-kix_bq7g8rf0rrj4-0>li:before{content:"" counter(lst-ctn-kix_bq7g8rf0rrj4-0,decimal) ". "}ol.lst-kix_hm07poadd9ox-4{list-style-type:none}.lst-kix_35o00nmc9uck-6>li:before{content:"\0025cf  "}ol.lst-kix_hm07poadd9ox-1{list-style-type:none}.lst-kix_hm07poadd9ox-3>li{counter-increment:lst-ctn-kix_hm07poadd9ox-3}ol.lst-kix_xshn85mjycb9-7.start{counter-reset:lst-ctn-kix_xshn85mjycb9-7 0}.lst-kix_8mhje5df4oh5-7>li{counter-increment:lst-ctn-kix_8mhje5df4oh5-7}.lst-kix_8fcjh41mfjmf-7>li:before{content:"\0025cb  "}ol.lst-kix_hm07poadd9ox-2{list-style-type:none}ol.lst-kix_bp9hz8yehz1d-5.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-5 0}.lst-kix_qv6q6ohs5rjd-1>li{counter-increment:lst-ctn-kix_qv6q6ohs5rjd-1}ol.lst-kix_hm07poadd9ox-0{list-style-type:none}ol.lst-kix_weg6rfcz2wrz-1.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-1 0}.lst-kix_n6b2eg7t7coe-7>li:before{content:"\0025cb  "}.lst-kix_608j9sd8cqoy-4>li{counter-increment:lst-ctn-kix_608j9sd8cqoy-4}.lst-kix_v9n3g8b4bso2-7>li{counter-increment:lst-ctn-kix_v9n3g8b4bso2-7}ol.lst-kix_bp9hz8yehz1d-3.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-3 0}.lst-kix_bv8t4tqsyhv3-6>li:before{content:"" counter(lst-ctn-kix_bv8t4tqsyhv3-6,decimal) ". "}ol.lst-kix_tfn897j8ydy5-2.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-2 0}.lst-kix_xshn85mjycb9-4>li{counter-increment:lst-ctn-kix_xshn85mjycb9-4}.lst-kix_weg6rfcz2wrz-0>li:before{content:"" counter(lst-ctn-kix_weg6rfcz2wrz-0,decimal) ". "}.lst-kix_pv0lc9ud52rj-7>li{counter-increment:lst-ctn-kix_pv0lc9ud52rj-7}.lst-kix_65ys8kkzrj5c-1>li:before{content:"" counter(lst-ctn-kix_65ys8kkzrj5c-1,lower-latin) ". "}.lst-kix_pv0lc9ud52rj-7>li:before{content:"" counter(lst-ctn-kix_pv0lc9ud52rj-7,lower-latin) ". "}.lst-kix_qv6q6ohs5rjd-6>li:before{content:"" counter(lst-ctn-kix_qv6q6ohs5rjd-6,decimal) ". "}ol.lst-kix_bv8t4tqsyhv3-7.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-7 0}ol.lst-kix_weg6rfcz2wrz-2.start{counter-reset:lst-ctn-kix_weg6rfcz2wrz-2 0}ol.lst-kix_xshn85mjycb9-8.start{counter-reset:lst-ctn-kix_xshn85mjycb9-8 0}ol.lst-kix_tfn897j8ydy5-3.start{counter-reset:lst-ctn-kix_tfn897j8ydy5-3 0}.lst-kix_n5euz220wizo-7>li:before{content:"\0025cb  "}.lst-kix_v9n3g8b4bso2-2>li:before{content:"" counter(lst-ctn-kix_v9n3g8b4bso2-2,lower-roman) ". "}ol.lst-kix_bq7g8rf0rrj4-7.start{counter-reset:lst-ctn-kix_bq7g8rf0rrj4-7 0}ol.lst-kix_bp9hz8yehz1d-4.start{counter-reset:lst-ctn-kix_bp9hz8yehz1d-4 0}.lst-kix_bp9hz8yehz1d-5>li{counter-increment:lst-ctn-kix_bp9hz8yehz1d-5}.lst-kix_alu4m0l7kzsu-2>li{counter-increment:lst-ctn-kix_alu4m0l7kzsu-2}.lst-kix_bp9hz8yehz1d-7>li:before{content:"" counter(lst-ctn-kix_bp9hz8yehz1d-7,lower-latin) ". "}ol.lst-kix_pv0lc9ud52rj-8.start{counter-reset:lst-ctn-kix_pv0lc9ud52rj-8 0}ol.lst-kix_bv8t4tqsyhv3-8.start{counter-reset:lst-ctn-kix_bv8t4tqsyhv3-8 0}ol{margin:0;padding:0}table td,table th{padding:0}.c91{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid}.c90{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:84.8pt;border-top-color:#000000;border-bottom-style:solid}.c130{border-right-style:solid;padding:2.9pt 2.9pt 2.9pt 2.9pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c100{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:105pt;border-top-color:#000000;border-bottom-style:solid}.c82{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:154.5pt;border-top-color:#000000;border-bottom-style:solid}.c121{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:57pt;border-top-color:#000000;border-bottom-style:solid}.c63{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:94.1pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:29.2pt;border-top-color:#000000;border-bottom-style:solid}.c66{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:125.2pt;border-top-color:#000000;border-bottom-style:solid}.c86{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:63pt;border-top-color:#000000;border-bottom-style:solid}.c97{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:35.2pt;border-top-color:#000000;border-bottom-style:solid}.c39{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:32.2pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:69.8pt;border-top-color:#000000;border-bottom-style:solid}.c105{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:48pt;border-top-color:#000000;border-bottom-style:solid}.c23{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117pt;border-top-color:#000000;border-bottom-style:solid}.c131{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:34.5pt;border-top-color:#000000;border-bottom-style:solid}.c1{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:49.5pt;border-top-color:#000000;border-bottom-style:solid}.c64{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:72pt;border-top-color:#000000;border-bottom-style:solid}.c96{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c89{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:78pt;border-top-color:#000000;border-bottom-style:solid}.c111{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:28.5pt;border-top-color:#000000;border-bottom-style:solid}.c127{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:34.5pt;border-top-color:#000000;border-bottom-style:solid}.c107{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:57pt;border-top-color:#000000;border-bottom-style:solid}.c74{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:71.2pt;border-top-color:#000000;border-bottom-style:solid}.c122{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:68.2pt;border-top-color:#000000;border-bottom-style:solid}.c65{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:34.5pt;border-top-color:#000000;border-bottom-style:solid}.c83{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:26.2pt;border-top-color:#000000;border-bottom-style:solid}.c42{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:57pt;border-top-color:#000000;border-bottom-style:solid}.c32{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:214.5pt;border-top-color:#000000;border-bottom-style:solid}.c93{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:78.8pt;border-top-color:#000000;border-bottom-style:solid}.c125{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:57pt;border-top-color:#000000;border-bottom-style:solid}.c94{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:48pt;border-top-color:#000000;border-bottom-style:solid}.c50{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:123.8pt;border-top-color:#000000;border-bottom-style:solid}.c72{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:25.5pt;border-top-color:#000000;border-bottom-style:solid}.c117{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:66.8pt;border-top-color:#000000;border-bottom-style:solid}.c114{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:39.8pt;border-top-color:#000000;border-bottom-style:solid}.c70{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:52.5pt;border-top-color:#000000;border-bottom-style:solid}.c110{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:172.5pt;border-top-color:#000000;border-bottom-style:solid}.c57{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:156pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:57.8pt;border-top-color:#000000;border-bottom-style:solid}.c115{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:28.5pt;border-top-color:#000000;border-bottom-style:solid}.c123{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:28.5pt;border-top-color:#000000;border-bottom-style:solid}.c68{border-right-style:solid;padding:2.2pt 2.2pt 2.2pt 2.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:56.2pt;border-top-color:#000000;border-bottom-style:solid}.c75{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.5pt;border-top-color:#000000;border-bottom-style:solid}.c79{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:78pt;border-top-color:#000000;border-bottom-style:solid}.c108{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:55.5pt;border-top-color:#000000;border-bottom-style:solid}.c116{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:65.2pt;border-top-color:#000000;border-bottom-style:solid}.c3{background-color:#ffffff;color:#008000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Courier New";font-style:normal}.c22{background-color:#ffffff;color:#00008b;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Courier New";font-style:italic}.c21{background-color:#ffffff;color:#008080;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Courier New";font-style:normal}.c30{background-color:#ffffff;color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Times New Roman";font-style:normal}.c2{background-color:#ffffff;color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Courier New";font-style:normal}.c27{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Times New Roman";font-style:normal}.c11{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c37{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c33{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c103{margin-left:18pt;padding-top:3pt;padding-bottom:4pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c55{margin-left:36pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c19{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Times New Roman";font-style:normal}.c45{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c25{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c98{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:right}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c104{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.2;orphans:2;widows:2;text-align:center}.c69{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:justify}.c99{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c88{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:center}.c54{padding-top:0pt;padding-bottom:0pt;line-height:1.38;orphans:2;widows:2;text-align:left}.c118{padding-top:0pt;padding-bottom:0pt;line-height:1.38;orphans:2;widows:2;text-align:center}.c112{background-color:#f8f8f8;color:#333333;font-weight:700;font-size:8pt;font-family:"Courier New"}.c52{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#208080;font-weight:400}.c41{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#a52a2a;font-weight:700}.c26{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#007788;font-weight:400}.c7{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#000080;font-weight:400}.c16{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#000040;font-weight:400}.c43{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#008080;font-weight:400}.c14{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c120{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#800080;font-weight:400}.c0{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#333333;font-weight:400}.c113{background-color:#f8f8f8;font-size:8pt;font-family:"Courier New";color:#008000;font-weight:400}.c13{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#ff0055;font-weight:700}.c58{background-color:#ffffff;color:#339900;font-weight:400;font-size:8pt;font-family:"Courier New"}.c126{-webkit-text-decoration-skip:none;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-style:normal}.c29{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#000099;font-weight:700}.c9{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#0000dd;font-weight:400}.c35{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#9f79ee;font-weight:700}.c47{background-color:#ffffff;font-size:9pt;font-family:"Times New Roman";color:#0000dd;font-weight:400}.c4{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#333333;font-weight:700}.c28{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;text-align:left}.c38{background-color:#ffffff;font-size:9pt;font-family:"Times New Roman";color:#333333;font-weight:400}.c5{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#008000;font-weight:400}.c17{background-color:#ffffff;font-size:9pt;font-family:"Times New Roman";color:#008080;font-weight:400}.c36{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c18{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#5d478b;font-weight:700}.c62{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#ff0000;font-weight:400}.c31{background-color:#ffffff;font-size:8pt;font-family:"Courier New";color:#0000ff;font-weight:400}.c85{border-spacing:0;border-collapse:collapse;margin-right:auto}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c101{color:#000000;font-weight:400;font-size:8pt;font-family:"Courier New"}.c84{background-color:#ffffff;font-size:9pt;color:#007788}.c81{background-color:#ffffff;font-size:9pt;color:#000040}.c77{text-decoration:none;vertical-align:baseline;font-style:italic}.c61{background-color:#ffffff;font-size:9pt;color:#000080}.c40{text-decoration:none;vertical-align:baseline;font-style:normal}.c92{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c60{background-color:#ffffff;font-size:9pt;color:#008000}.c129{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline}.c80{background-color:#ffffff;font-size:9pt;color:#0000ff}.c51{color:inherit;text-decoration:inherit}.c67{color:#000000;font-size:12pt}.c78{color:#000000;font-size:9pt}.c119{font-weight:400;font-family:"Arial"}.c109{color:#434343;font-size:12pt}.c73{color:#000000;font-size:11pt}.c71{color:#000000;font-size:18pt}.c8{margin-left:36pt;padding-left:0pt}.c124{color:#000000;font-size:20pt}.c56{font-weight:700;font-family:"Times New Roman"}.c12{margin-left:27pt;padding-left:0pt}.c53{font-weight:400;font-family:"Times New Roman"}.c44{padding:0;margin:0}.c102{height:20pt}.c46{height:24pt}.c128{vertical-align:sub}.c49{height:11pt}.c106{height:38pt}.c87{height:23pt}.c95{margin-left:36pt}.c76{font-size:18pt}.c59{text-indent:36pt}.c48{height:0pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c92"><p class="c33"><span class="c19"></span></p><p class="c33"><span class="c19"></span></p><p class="c33"><span class="c19"></span></p><p class="c33"><span class="c19"></span></p><p class="c10 c49"><span class="c19"></span></p><p class="c10 c49"><span class="c19"></span></p><p class="c10 c49"><span class="c19"></span></p><p class="c10 c49"><span class="c40 c71 c53"></span></p><p class="c10"><span class="c40 c71 c56">ECE 3400: Monday Evening Team 3</span></p><p class="c10"><span class="c40 c71 c56">Final Report</span></p><p class="c10 c49"><span class="c40 c73 c56"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 395.84px; height: 372.50px;"><img alt="" src="images/image22.jpg" style="width: 395.84px; height: 527.07px; margin-left: 0.00px; margin-top: -33.58px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c19">James Cassell</span></p><p class="c10"><span class="c19">Aaheli Chattopadhyay</span></p><p class="c10"><span class="c19">Claire Chen</span></p><p class="c10"><span class="c19">Adam Chung</span></p><p class="c10"><span class="c19">Yangyi Hao</span></p><p class="c10"><span class="c19">Naomi Hess</span></p><p class="c10"><span class="c19">Arvind Kannan</span></p><p class="c10"><span class="c53">Curran Sinha</span><span class="c40 c73 c56">&nbsp;</span></p><hr style="page-break-before:always;display:none;"><p class="c33"><span class="c40 c73 c56"></span></p><p class="c45"><span class="c40 c71 c56">Table of Contents</span></p><p class="c99"><span class="c56"><a class="c51" href="#h.jzfyefromid4">1. Executive Summary</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.jzfyefromid4">2</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.ng64f8ndl2l">2. Functional Requirements</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.ng64f8ndl2l">3</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.u95xnduvjyno">3. Table Of Performance Attributes</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.u95xnduvjyno">4</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.ts2ygkyxz9nn">4. Value Engineering Method</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.ts2ygkyxz9nn">5</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.aoq531w5pclk">5. Subsystem Breakdown</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.aoq531w5pclk">9</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.gq6m9x4msc48">5.1 Microphone Circuit</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.gq6m9x4msc48">9</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.3d1xllls88in">5.2 Treasure Detection</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.3d1xllls88in">12</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.z77r75n094w">5.3 Override Button Circuit</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.z77r75n094w">13</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.4doruk389m9n">5.5 Base Station and FPGA</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.4doruk389m9n">14</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.9s7pncvlke8f">5.5.1 Robot - Base Station Communication</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.9s7pncvlke8f">14</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.npr8xgq0b270">5.5.2 Data Encoding and Transmission</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.npr8xgq0b270">15</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.h4j1q997uanv">5.5.3 FPGA Display</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.h4j1q997uanv">16</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.2mebde1gizbt">5.6 Line Sensing and Robot Movement</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.2mebde1gizbt">17</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.ukg5eslv71zt">5.7 Navigation</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.ukg5eslv71zt">21</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.pirmcvgwjgdf">5.7.1 Baseline Design</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.pirmcvgwjgdf">21</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.3fry3pbismbr">5.7.2 Backtrack Optimizations</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.3fry3pbismbr">22</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.4pi9oyh4whvk">5.7.3 Detouring to Finish Earlier</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.4pi9oyh4whvk">23</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.cz3l0qn51ebu">5.7.4 Omitting Unnecessary Moves</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.cz3l0qn51ebu">26</a></span></p><p class="c55"><span class="c53"><a class="c51" href="#h.6afammlj39nw">5.7.5 Setting Priorities Accordingly</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.6afammlj39nw">28</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.nigf2qvdrr1h">6. Possible Failure Modes</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.nigf2qvdrr1h">29</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.p80rdutjzh8h">7. Conclusion</a></span><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.p80rdutjzh8h">31</a></span></p><p class="c104"><span class="c56"><a class="c51" href="#h.5iv3mhvl5h0c">8. </a></span><span class="c56">Appendix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c56"><a class="c51" href="#h.5iv3mhvl5h0c">32</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.n53znz32tc9r">8.1 Robot Arduino Code</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.n53znz32tc9r">32</a></span></p><p class="c37"><span class="c53"><a class="c51" href="#h.1q9f7fwtlt9q">8.2 Base Station Arduino Code</a></span><span class="c53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.1q9f7fwtlt9q">48</a></span></p><p class="c103"><span class="c53"><a class="c51" href="#h.f8n4zy6j16uu">8.3 FPGA Code</a></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c53"><a class="c51" href="#h.f8n4zy6j16uu">51</a></span></p><p class="c33"><span class="c40 c73 c56"></span></p><p class="c33"><span class="c40 c73 c56"></span></p><h1 class="c14 c102" id="h.g64u5bnxzejc"><span class="c19"></span></h1><h1 class="c14 c102" id="h.3rxttrqc70u1"><span class="c19"></span></h1><p class="c33"><span class="c40 c73 c119"></span></p><h1 class="c14" id="h.jzfyefromid4"><span class="c40 c71 c53">1. Executive Summary</span></h1><p class="c45 c59"><span class="c19">Over the course of a semester, our team successfully designed and built a maze-mapping robot capable of detecting the frequency and location of an infrared beacon in the maze. &nbsp;The information uncovered about the maze, including location of walls, explored territory, unexplorable territory, and location and frequency of treasure, is sent over radio to the base station and displayed on a VGA display. The robot was made of parts totaling less than $100.</span></p><p class="c45"><span class="c19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Our robot performed very well at the end of semester, as it won the final competition. The biggest strength of our robot was the consistency of all the subsystems. It consistently was able to start upon hearing the 660Hz whistle, follow lines, execute turning, detect treasure presence and frequency, send information back to the base station, and display the information accurately. We attribute this consistency to thorough tests of each subsystem as well as the overall system. Another crucial part of the robot&rsquo;s success during the competition was our path algorithm&rsquo;s ability to minimize the number moves required to fully map the maze. </span></p><p class="c45 c59"><span class="c19">To test the robot, we first tested each subsystem multiple times and isolated any possible sources of error which we were able to correct. Once we were confident in the functionality of our subsystems, we focussed our efforts on integration. &nbsp;We tested the robot on many different maze configurations. Through our testing, we realized that the if the voltage of the 9V battery used to power the Arduino was lower than 9V, this would cause our robot to mis-detect walls and behave erratically. During the competition, we continuously monitored the level of the battery to mitigate this behavior.</span></p><p class="c33 c59"><span class="c19"></span></p><p class="c45"><span class="c19">The responsibilities of each group member throughout the course of the project are listed below:</span></p><p class="c45"><span class="c56">James Cassell:</span><span class="c19">&nbsp; Responsible for the design and implementation of the low-pass filter. Additionally, he designed and implemented all of the logic for the VGA display.</span></p><p class="c45"><span class="c56">Aaheli Chattopadhyay:</span><span class="c19">&nbsp;Responsible for the design and testing for the microphone circuit. Worked on testing the wall sensors out thoroughly, and helped with designing the path finding algorithm.</span></p><p class="c45"><span class="c56">Claire Chen:</span><span class="c19">&nbsp;Implemented line following with Naomi. Worked on treasure detection with Arvind. Helped team with testing. Laid out and soldered parts of circuitry to perforated boards and constructed robot. </span></p><p class="c45"><span class="c56">Adam Chung:</span><span class="c19">&nbsp;Responsible for designing and implementing optimizations to the path finding algorithm, testing the path algorithm with over 15 mazes, and implementing the amplifier for the microphone circuit. </span></p><p class="c45"><span class="c56">Yangyi Hao:</span><span class="c19">&nbsp;Responsible for designing, writing, and testing code for the path finding algorithm. Wrote a step-by-step simulation of path algorithm that was useful for debugging optimizations to the algorithm. Assisted James and Curran with first few iterations of design for VGA logic.</span></p><p class="c45"><span class="c56">Naomi Hess:</span><span class="c19">&nbsp;Implemented line following with Claire. Helped to debug microphone circuit. Helped team with testing. Laid out and soldered parts of circuitry to perforated boards and constructed robot. Constructed base station platform.</span></p><p class="c45"><span class="c56">Arvind Kannan:</span><span class="c19">&nbsp;Responsible for designing and implementing the treasure circuit with Claire and Curran and writing the accompanying code to calculate the frequency of the infrared beacon. Wrote the first draft of the path finding algorithm that proves the feasibility of a DFS search and the idea of backtracking.</span></p><p class="c45"><span class="c56">Curran Sinha:</span><span class="c53">&nbsp;</span><span class="c56">&nbsp;</span><span class="c19">Responsible for radio communication, base station, and design of the treasure circuit. Helped with debugging SPI communication with the FPGA and microphone circuit.</span></p><p class="c33"><span class="c19"></span></p><h1 class="c14" id="h.ng64f8ndl2l"><span class="c53 c76">2. </span><span class="c40 c71 c53">Functional Requirements</span></h1><p class="c45"><span class="c56">Figure 2.1: </span><span class="c40 c73 c56">Functional Analysis diagram</span></p><p class="c45"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 580.00px;"><img alt="functional analysis.png" src="images/image17.png" style="width: 624.00px; height: 580.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c45"><span class="c19">Figure 2.1 illustrates the functional requirements of the maze-mapping robot. The 660 Hz whistle and the nature of the maze itself are taken in as inputs and processed in various subfunctions. The subfunctions lead to the outputs of the system, the movement of the robot, the VGA display, and the indicator LED that shows completion.</span></p><p class="c33"><span class="c40 c73 c56"></span></p><p class="c45"><span class="c56">Subsystems:</span><span class="c19">&nbsp;</span></p><p class="c45"><span class="c19">Microphone</span></p><p class="c45"><span class="c19">Override Button</span></p><p class="c45"><span class="c19">Mapping Algorithm</span></p><p class="c45"><span class="c19">Radio Transmission</span></p><p class="c45"><span class="c19">Treasure Detection</span></p><p class="c45"><span class="c19">SPI Transmission</span></p><p class="c45"><span class="c19">VGA display</span></p><p class="c33"><span class="c19"></span></p><h1 class="c14" id="h.u95xnduvjyno"><span class="c40 c71 c53">3. Table Of Performance Attributes</span></h1><p class="c45"><span class="c56">Table 3.1: Performance Attributes</span></p><a id="t.0cd1ae305f8450b78767e1d6a96515c159715245"></a><a id="t.0"></a><table class="c85"><tbody><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">Number</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">Demand (D) /Wish (W)</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Requirement</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">Specification</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">Units</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">1</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Power Arduinos with battery</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">9</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">V</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">2</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Execute turns</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">&plusmn;90 and &plusmn;180</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">degrees</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">3</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Detect starting whistle</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">650-670</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">Hz</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">4</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Stay within budget</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">100</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">USD</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">5</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Sense nearby walls in front, right, left of robot</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">1</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">feet</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">6</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">W</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Detect IR-emitting &lsquo;treasure&rsquo; with specified wavelength</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">940</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">nm</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">7</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Communicate to base station Arduino with Nordic RF24 radio</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">2.4</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">GHz</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">8</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Navigate maze by following reference lines using at least one line sensor</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">&ge; 1</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">Sensor</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">9</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Draw mapped maze with FPGA onto VGA display by transmitting data to DAC VGA driver (which converts this information into 3 analog signals using a DAC)</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">8</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">bits</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">10</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">DAC outputs analog signals to VGA driver within the voltage limits of the VGA</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">0-1</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">V</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c45"><span class="c19">11</span></p><p class="c33"><span class="c19"></span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Display will differentiate walls, open space, unexplored space, unexplorable space</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">4</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">colors</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">12</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">W</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Move at a minimum speed</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">12</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">cm/s</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">13</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">D</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Operate Servos at required voltage using rechargeable battery pack</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">4-6</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">V</span></p></td></tr><tr class="c48"><td class="c70" colspan="1" rowspan="1"><p class="c6"><span class="c19">14</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c6"><span class="c19">W</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mount line sensor(s) at optimal height above maze surface for best line detection performance</span></p></td><td class="c93" colspan="1" rowspan="1"><p class="c6"><span class="c19">3</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c6"><span class="c19">mm</span></p></td></tr></tbody></table><p class="c45"><span class="c19">Table 3.1 shows the crucial performance attributes that needed to be met for the robot to be successful. &nbsp;Each of these attributes was met by our robot during the competition.</span></p><h1 class="c14" id="h.ts2ygkyxz9nn"><span class="c53 c76">4. Value Engineering Method</span><span class="c40 c119 c124">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></h1><p class="c45"><span class="c19">The value engineering method has been repeated for each of our robot&rsquo;s subsystems. </span></p><p class="c33"><span class="c126 c73 c53"></span></p><p class="c45"><span class="c40 c73 c56">Table 4.1: Robot Body</span></p><a id="t.6a7651ca6494d71e52486c78b51d5fd190a3e108"></a><a id="t.1"></a><table class="c85"><tbody><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c40 c73 c56">Component</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c40 c73 c56">Function</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c40 c73 c56">Value to Customer</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c40 c73 c56">Cost</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Arduino</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Control of all subsystems</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Absolutely necessary for all functions of robot</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$22.00</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">4.5 inch 3D printed wheels</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Movement</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">The movement and stability of the robot is one of the most important functions influencing a customer&rsquo;s perception of the robot. The size of the wheels also plays a large factor in the speed </span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$2.25</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Wide rubber bands</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Wheel grip on maze surface</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">This is an important function because it prevents the robot from slipping while it is navigating maze. If the robot appears to slip on the maze, it will appear as if it is not line following correctly.</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.06</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3D printed IR sensor mounts </span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mounting wall sensors</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mounting the IR sensors for wall is a valuable function because the sensors can be pointed directly at walls to ensure consistent wall detection. Also contributes to neat robot aesthetic.</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.80</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3D printed vertical mounts</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mounting line sensors, phototransistors for treasure detection</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Important functions to ensure consistent and correct line and treasure detection. Also contributes to neat robot aesthetic.</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.20</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3D printed extenders</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Extending mounts for treasure detection phototransistors so that they are closer to treasure</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">An important function that allows treasure detection phototransistors to be mounted within detection range of IR treasure to ensure accurate detection.</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.75</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Caster ball</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Movement and stability</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">A crucial function for building a stable and aesthetically pleasing robot</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$6.00</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Caster ball mount</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mounting caster ball for movement and stability</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Necessary for consistent circuit performance and sensor measurements. Also improves aesthetics of robot.</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.25</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Robot base platform</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Platform for attaching sensor mounts, Arduino, circuitry, wheels</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Necessary so the robot does not fall apart.</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$3.00</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Arduino platform</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mounting Arduino to robot</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Necessary function for accurate measurements and adequate clearance</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.50</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Perf boards</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Soldering circuitry</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Provides a secure and stable platform for all the circuitry</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$2.49</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Screws</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Structural stability of robot attachments</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Used to stabilize all the parts of the robots, so that nothing falls off</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.67</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Plastic standoffs</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Mounting attachments at correct heights</span></p></td><td class="c82" colspan="1" rowspan="1"><p class="c6"><span class="c19">Used to mount attachment at specific heights, so that sensors can detect proper items</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.91</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Ways to reduce cost:</span></p><p class="c45"><span class="c19">A strong method to reduce cost is to not use an Arduino Uno, a different microcontroller, like the PIC32 could be used instead which is much cheaper and has all the same functionalities. This could potentially reduce the cost of the microcontroller from $22.00 to about $5.00, quite a large saving!</span></p><p class="c33"><span class="c126 c73 c53"></span></p><p class="c45"><span class="c56">Table 4.2: Power</span><span class="c53 c129">&nbsp;</span></p><a id="t.c5f997affeb14ce1ee89b6841b24b23a06330d1f"></a><a id="t.2"></a><table class="c85"><tbody><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Component</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Function</span></p></td><td class="c50" colspan="1" rowspan="1"><p class="c6"><span class="c19">Value to Customer</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cost per component</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c6"><span class="c19">Total Cost</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">5 volt battery pack</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Powering the servos and microphone circuit</span></p></td><td class="c50" colspan="1" rowspan="1"><p class="c6"><span class="c19">Necessary to power the wheels and for the robot to move</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c6"><span class="c19">$6.95</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c6"><span class="c19">$6.95</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">2X9 volt battery</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Powering the Arduino, wall sensors, line sensors, and treasure sensors</span></p></td><td class="c50" colspan="1" rowspan="1"><p class="c6"><span class="c19">Necessary for robot to follow lines, detect walls, detect treasure, and complete an efficient maze traversal while transmitting correct information to the radio</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c6"><span class="c19">$8</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c6"><span class="c19">$16</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c40 c73 c56">Table 4.3: Wall Detection</span></p><a id="t.019d193e8d98dea767b6072b86922bb99934a20c"></a><a id="t.3"></a><table class="c85"><tbody><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Component</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Function</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cost per component</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Total Cost</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3X IR Sensors</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Detect Walls </span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$7</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$21</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Ways to reduce cost:</span></p><p class="c45"><span class="c19">Since the IR sensors already have low cost, we would have to find less expensive IR sensors.</span></p><p class="c33"><span class="c73 c53 c126"></span></p><p class="c45"><span class="c40 c73 c56">Table 4.4: Line Following</span></p><a id="t.e6f08425c9f037ca126d179ede05085ced425d6b"></a><a id="t.4"></a><table class="c85"><tbody><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Component</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Function</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cost per component </span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Total Cost</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">4X Grayscale sensors</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Enables robot to follow black line</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$3 </span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$12</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Ways to reduce cost:</span></p><p class="c45"><span class="c19">Due to the already low cost of the grayscale sensors, the only way to reduce cost would be to find cheaper grayscale sensors.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c40 c73 c56">Table 4.5: Treasure Detection</span></p><a id="t.47816c90cceed9b9497d5cf877edb31781394e82"></a><a id="t.5"></a><table class="c85"><tbody><tr class="c87"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Component</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Function</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cost per component</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Total Cost</span></p></td></tr><tr class="c106"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">LTR301 phototransistors (3x)</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Sensing IR emitters</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.51</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.53</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3x330 ohm resistor</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Treasure circuit</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.20</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.60</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3x10 kohm resistor</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Treasure circuit</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.20</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.60</span></p></td></tr><tr class="c48"><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">3x100 nF capacitor</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">Treasure circuit</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.20</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.60</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Ways to reduce cost:</span></p><p class="c45"><span class="c19">To reduce cost we could find cheaper phototransistors. Or find a premade circuit which costs less the the total of the components that we use.</span></p><p class="c33"><span class="c19"></span></p><p class="c33 c95"><span class="c19"></span></p><p class="c45"><span class="c40 c56 c73">Table 4.6: Microphone and override button</span></p><a id="t.0fec8925f3aca8e2d5f47fe5e641abcd7da6ac32"></a><a id="t.6"></a><table class="c85"><tbody><tr class="c46"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Component</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Function</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">Value to customer</span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cost per component</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">Total Cost</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Microphone</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Detects audio signal</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">The robot can only start moving once the microphone detects the 660 Hz signal and transmits the signal to the circuit to be amplified and filtered </span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.95</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.95</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">2X Op-Amp</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Amplification and filtering of signal</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">One op-amp was used in the amplification of the signal while the other one was used to create the low pass filter,so that the 660 Hz could stand out against background noise</span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.43</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.86</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Capacitors: 100nF,1nF,220F</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Used in microphone circuit</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">Components needed for the correct functionality of the amplifier and low pass filter circuit</span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.30</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.90</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Resistors: 10k&#8486;,1k&#8486;,2X9.1k&#8486;,470k&#8486;, 220k&#8486;, 270&#8486;</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Used in microphone circuit</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">Components needed for the correct functionality of the amplifier and low pass filter circuit</span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.20</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.40</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Push Button</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Override button to trigger the robot to start</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">Activates an Analog pin on arduino, so that the car can start with a simple push of the button rather than the detection of the 660 Hz signal</span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.76</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.76</span></p></td></tr><tr class="c48"><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Resistor-330&#8486;</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c6"><span class="c19">Pull-down resistor in override circuit</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c6"><span class="c19">Acts as a pull-down resistor in override circuit</span></p></td><td class="c90" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.30</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.30</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c40 c73 c56">Table 4.7: VGA Display</span></p><a id="t.1f879343b51735fdcbedfb80e56d65704fa1d725"></a><a id="t.7"></a><table class="c85"><tbody><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Component</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Function</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cost</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Altera De0 Nano FPGA Board</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Process map data and write to the display</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$99.50</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Jumper Cables</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Connect data lines to the Arduino base station</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.80</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">VGA adapter</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Connect the FPGA to VGA cable</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$3.50</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">VGA cable</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Cable connecting FPGA to the monitor</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$1.95</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Monitor</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Displays the output of the FPGA</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$30.00</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Wood</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Consolidation of materials into one aesthetic place</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.50</span></p></td></tr><tr class="c48"><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Screws</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">Connect FPGA and base station to the wood</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c6"><span class="c19">$0.17</span></p></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Ways to reduce cost:</span></p><p class="c45"><span class="c19">To reduce cost of the VGA display system, we could easily get a cheaper FPGA to fun the code off of. Since VGA protocol operates at 25 MHz, there is little reason that we need an FGPA that runs at 50 MHz, especially since SPI is much slower at around 8 MHz. Another way to reduce the cost is to get a worse monitor, the monitor displays pretty basic information so there is no need for a high quality monitor.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Tables 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, and 4.7 describe the function of the components of each subsystem of the robot and the associated cost.</span></p><h1 class="c14" id="h.aoq531w5pclk"><span class="c40 c71 c53">5. Subsystem Breakdown</span></h1><h2 class="c36" id="h.gq6m9x4msc48"><span class="c40 c67 c56">5.1 Microphone Circuit</span></h2><p class="c45"><span class="c19">The Microphone Circuit was implemented to detect a 660 Hz whistle that signals the start of the each round. It consists of an amplifier stage to amplify the output of the microphone and a Sallen-Key low pass filter to filter out high frequency noise. The Arduino then reads the amplified and filtered signal and performs an FFT to organize the signals into frequency bins. </span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">The figure below details the schematic of the amplifier stage. Because of the low output of the electret microphone, it was necessary to implement an amplifier with enough gain to improve the signal-to-noise ratio (SNR). </span></p><p class="c33"><span class="c19"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 285.00px; height: 248.00px;"><img alt="Amplifier.png" src="images/image23.png" style="width: 285.00px; height: 248.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.1.1 - Amplifier Stage</span></p><p class="c10 c49"><span class="c19"></span></p><p class="c45"><span class="c19">With the configuration detailed above, the gain of the amplifier stage was 470k&#8486; / 1k&#8486; = 470x. We determined that this was substantial enough to distinguish the signal from the noise clearly. The equation of the voltage at the output of the amplifier is as follows:</span></p><p class="c10"><img src="images/image1.png"></p><p class="c10 c49"><span class="c19"></span></p><p class="c45"><span class="c19">Next, it was necessarily for us to implement a Sallen-Key low pass filter to remove the high frequency component of the signal. </span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 436.50px; height: 335.87px;"><img alt="" src="images/image11.png" style="width: 703.18px; height: 342.16px; margin-left: -23.90px; margin-top: -6.29px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.1.2 - General Topology of Sallen-Key Filter</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c53">In general, the circuit analysis for the Sallen-Key filter proceeds as </span><span class="c53">follows</span><span class="c19">:</span></p><p class="c25"><span class="c53">(1) </span><img src="images/image2.png"><span class="c19">&nbsp;</span></p><p class="c25"><span class="c19">Equation (1) comes from the fact that the operational amplifier is in negative feedback, meaning that the non-inverting and inverting inputs must be approximately equal.</span></p><p class="c25"><span class="c53">(2) </span><img src="images/image3.png"></p><p class="c25"><span class="c53">Combining (1) and (2), we get: </span><img src="images/image4.png"></p><p class="c69"><span class="c53">Apply equation 1 and KCL at the non-inverting input (has voltage v</span><span class="c53 c128">+</span><span class="c53">) of the operational amplifier to get:</span><img src="images/image5.png"></p><p class="c25"><span class="c53">Solve this to get (3): </span><img src="images/image6.png"></p><p class="c25"><span class="c53">Combine (2) and (3) to get (4): </span><img src="images/image7.png"></p><p class="c25"><span class="c53">Rearrange (4) to get (5), the transfer function for a general Sallen-Key filter: </span><img src="images/image8.png"></p><p class="c25"><span class="c19">Now, by varying what Z1, Z2, Z3, and Z4 are (resistors, capacitors, and inductors), the characteristics of the filter can be very different. &nbsp;For example, the low-pass filter uses capacitors in all positions where the high-pass filter uses resistors, and uses resistors in all positions where the high-pass filter uses capacitors.</span></p><p class="c69"><span class="c19">For a low-pass filter, we have:</span></p><p class="c88"><img src="images/image9.png"></p><p class="c88"><img src="images/image10.png"></p><p class="c45"><span class="c19">Figure 5.1.3 depicts the schematic of the Sallen-Key Low Pass Filter which details the values chosen for each component. Given this configuration, the cutoff frequency of the filter was 1392.245 Hz. This was the closest we could get to 660 Hz while allowing enough room for error and minimizing attenuation of the signal. </span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 303.00px; height: 251.00px;"><img alt="LPF.png" src="images/image16.png" style="width: 303.00px; height: 251.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.1.3 - Sallen-Key Low Pass Filter</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Altogether, the amplifier stage is cascaded with the low pass filter to produce a filtered signal with improved SNR. We were satisfied with the performance of the microphone circuit in allowing the Arduino to make an accurate distinction between the presence and absence of the 660 Hz signal. The final microphone circuit with all major components is detailed in Figure 5.1.4 below.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 595.50px; height: 184.00px;"><img alt="Final_Microphone_Schematic.png" src="images/image19.png" style="width: 693.83px; height: 184.00px; margin-left: -0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.1.4 - Final Microphone Schematic</span></p><h2 class="c36" id="h.3d1xllls88in"><span class="c11">5.2 Treasure Detection</span></h2><p class="c45"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 608.50px; height: 192.46px;"><img alt="TreasureCircuit (11).png" src="images/image20.png" style="width: 608.50px; height: 203.16px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c40 c73 c56">Figure 5.2.1: Treasure Sensor Schematic</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">The circuit shown in Figure 5.2.1 is used for determining the presence of treasure and the frequency of the treasure. Note that there are 3 infrared sensors, and their outputs are tied together. &nbsp;This is because we needed to be able to detect treasure on the front, left, and right sides of the robot - only one of the three is expected to be active at a given time since there is only one treasure in each maze. &nbsp;The operational amplifier U1 is actually the internal comparator on the Arduino microcontroller. The positive input for the comparator is taken from digital pin 6 on the Arduino. The negative input for the comparator is taken from digital pin 7 on the Arduino. &nbsp;When the signal on the positive input exceeds the value on the negative input, the comparator outputs a high voltage, and otherwise outputs a low voltage. &nbsp;An interrupt is triggered when the comparator has a high voltage. The signal is connected to the positive input of the comparator and the low-passed signal is connected to the negative input of the comparator because regardless of the DC offset of the signal, we want both the inputs having the same DC offset. This way, the comparator can output a high signal whenever the positive input has a slightly higher voltage than the negative input, which happens once per cycle. &nbsp;The time between interrupts can be determined by reading the timer register in each time an interrupt is triggered and storing that value in a variable. &nbsp;R1 has a value of 10 k&#8486;, R2 has a value of 330&#8486;, and C1 has a value of 100 nF. &nbsp;These values were tuned such that the circuit worked properly. &nbsp;</span></p><h2 class="c36" id="h.z77r75n094w"><span class="c40 c56 c67">5.3 Override Button Circuit</span></h2><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 161.50px; height: 303.09px;"><img alt="" src="images/image13.png" style="width: 268.70px; height: 379.56px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.3.1: Circuit for override switch</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">The circuit for the override switch, seen in Figure 5.3.1, consists of a switch connected to the Arduino&rsquo;s 5V power supply and a pull-down resistor of 330 ohms. The voltage across the resistor is sent to A3 on the Arduino. &nbsp;The code performs an analogRead and if the value is about 500 (corresponding to a voltage of 5V * 500/1024 = 2.44V), then that means the override switch is being pressed. So, it is clear that the override circuit is active high, since the voltage being measured is high if the button is pressed, and low otherwise. </span></p><p class="c33"><span class="c40 c73 c56"></span></p><p class="c45"><span class="c40 c73 c56">5.4 Indicator LED Circuit for Completion</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 217.33px;"><img alt="schemeit-project.png" src="images/image24.png" style="width: 624.00px; height: 217.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.4.1: LED circuit that indicates completion of mapping</span></p><p class="c45"><span class="c19">The circuit above consists of an LED connected to a 330&#8486; resistor going into A2 pin in the arduino. After the finished signal is activated, pin A2 becomes high and the LED lights up to indicate that the robot has finished mapping the maze. </span></p><h2 class="c36" id="h.4doruk389m9n"><span class="c40 c67 c56">5.5 Base Station and FPGA</span></h2><h3 class="c28" id="h.9s7pncvlke8f"><span class="c40 c109 c53">5.5.1 Robot - Base Station Communication</span></h3><p class="c54"><span class="c19">Several considerations were made in regards to the design of the information being transmitted from the maze-mapping Arduino to the base station Arduino. As stated earlier, one possibility was to send the entire maze in the form of a 2D char array. As the maze is uncovered and new information is detected, the maze-mapping Arduino would make changes to the 2D char array and retransmit it to the base station. On the other hand, an alternative was to send only new information about each coordinate of the maze. The information would be in the form of a 1D char array. After discussing with team members working on encoding the pixels on the display and those working on the path algorithm, we arrived at a consensus to only send new information to the base station. Our next step was to determine how the following information should be encoded as a char array:</span></p><ul class="c44 lst-kix_8fcjh41mfjmf-0 start"><li class="c54 c8"><span class="c19">Presence or absence of wall (up, down, left, right)</span></li><li class="c54 c8"><span class="c19">Presence or absence of treasure (9kHz, 11kHz, 13kHz, 15kHz, 17kHz)</span></li><li class="c54 c8"><span class="c19">Whether or not the robot is finished exploring maze</span></li></ul><p class="c54 c49"><span class="c19"></span></p><p class="c54"><span class="c19">When encoding the presence of a wall, we are stating the absolute direction of the wall. For instance, the presence of a wall on the upper edge of the coordinate with respect to the display will be encoded as wall up, regardless of the orientation of the robot. This way, the information will be much easier to decode and display onto the monitor. Additionally, it was important to be able to encode whether or not a robot has exhausted all explorable paths. The &lsquo;finished&rsquo; signal will help the FPGA determine which regions were ultimately unexplorable and mark them as such on the display.</span></p><p class="c54 c49"><span class="c19"></span></p><p class="c54"><span class="c19">We chose to use a 2-byte char array to store all of our encoded information. The first byte includes all necessary details about the maze mentioned earlier, such as presence of wall, treasure and whether the robot is finished. Bit 15 is set if the robot is finished. Bits 12-14 encode the presence or absence of a treasure in this way:</span></p><ul class="c44 lst-kix_j85vvjrsn575-0 start"><li class="c54 c8"><span class="c19">000 - No treasure</span></li><li class="c54 c8"><span class="c19">001 - 7kHz treasure</span></li><li class="c54 c8"><span class="c19">010 - 9kHz treasure</span></li><li class="c54 c8"><span class="c19">101 - 15kHz treasure</span></li><li class="c54 c8"><span class="c19">011 - 11kHz treasure</span></li><li class="c54 c8"><span class="c19">100 - 13kHz treasure</span></li><li class="c54 c8"><span class="c19">110 - 17kHz treasure</span></li><li class="c54 c8"><span class="c19">111 - Don&rsquo;t Care</span></li></ul><p class="c54"><span class="c19">Bits 8-11 encode a wall on each direction and are set if a wall in that direction exists.The second byte stores the absolute x-coordinate and y-coordinate position of the robot with respects to the axes of the display. The four most significant bits 4-7 encode the x-coordinate position, and the four least significant bits 0-3 encode the y-coordinate. The final data encoding design is illustrated in Figure 5.5.1a.</span></p><p class="c49 c118"><span class="c19"></span></p><a id="t.832c2e0ff818ade4063414d8817c054169ac498f"></a><a id="t.8"></a><table class="c85"><tbody><tr class="c48"><td class="c114" colspan="1" rowspan="1"><p class="c15"><span class="c19">Bit</span></p></td><td class="c108" colspan="1" rowspan="1"><p class="c15"><span class="c19">15</span></p></td><td class="c105" colspan="1" rowspan="1"><p class="c15"><span class="c19">14</span></p></td><td class="c123" colspan="1" rowspan="1"><p class="c15"><span class="c19">13</span></p></td><td class="c123" colspan="1" rowspan="1"><p class="c15"><span class="c19">12</span></p></td><td class="c122" colspan="1" rowspan="1"><p class="c15"><span class="c19">11</span></p></td><td class="c117" colspan="1" rowspan="1"><p class="c15"><span class="c19">10</span></p></td><td class="c122" colspan="1" rowspan="1"><p class="c15"><span class="c19">9</span></p></td><td class="c86" colspan="1" rowspan="1"><p class="c15"><span class="c19">8</span></p></td></tr><tr class="c48"><td class="c114" colspan="1" rowspan="1"><p class="c15"><span class="c19">Info</span></p></td><td class="c108" colspan="1" rowspan="1"><p class="c15"><span class="c19">Finished</span></p></td><td class="c100" colspan="3" rowspan="1"><p class="c15"><span class="c19">Treasure</span></p></td><td class="c122" colspan="1" rowspan="1"><p class="c15"><span class="c19">Wall Right</span></p></td><td class="c117" colspan="1" rowspan="1"><p class="c15"><span class="c19">Wall Left</span></p></td><td class="c122" colspan="1" rowspan="1"><p class="c15"><span class="c19">Wall Down</span></p></td><td class="c86" colspan="1" rowspan="1"><p class="c15"><span class="c19">Wall Up</span></p></td></tr></tbody></table><p class="c54 c49"><span class="c19"></span></p><a id="t.443a8ce4a608085f3de776a3b4346209202b61bb"></a><a id="t.9"></a><table class="c85"><tbody><tr class="c48"><td class="c116" colspan="1" rowspan="1"><p class="c15"><span class="c19">Bit</span></p></td><td class="c108" colspan="1" rowspan="1"><p class="c15"><span class="c19">7</span></p></td><td class="c105" colspan="1" rowspan="1"><p class="c15"><span class="c19">6</span></p></td><td class="c65" colspan="1" rowspan="1"><p class="c15"><span class="c19">5</span></p></td><td class="c65" colspan="1" rowspan="1"><p class="c15"><span class="c19">4</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c15"><span class="c19">3</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c15"><span class="c19">2</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c15"><span class="c19">1</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c15"><span class="c19">0</span></p></td></tr><tr class="c48"><td class="c116" colspan="1" rowspan="1"><p class="c15"><span class="c19">Info</span></p></td><td class="c110" colspan="4" rowspan="1"><p class="c15"><span class="c19">X-coordinate Position</span></p></td><td class="c91" colspan="4" rowspan="1"><p class="c15"><span class="c19">Y-coordinate Position</span></p></td></tr></tbody></table><p class="c118 c49"><span class="c19"></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.5.1a - Date Encoding Design</span></p><h3 class="c28" id="h.npr8xgq0b270"><span class="c40 c53 c109">5.5.2 Data Encoding and Transmission</span></h3><p class="c45"><span class="c19">To transmit data between our Arduino base station and the FPGA, we decided to use SPI communication. This allowed us to save on the amount of pins we used on the Arduino and made for a neater base station by not having many wires in parallel, as seen in Figure 5.5.2a.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 536.00px; height: 244.00px;"><img alt="" src="images/image28.png" style="width: 536.00px; height: 244.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c45"><span class="c40 c73 c56">Figure 5.5.2a: Connections between Arduino microcontroller and Altera DE0 Nano FPGA for SPI </span></p><p class="c33"><span class="c40 c73 c56"></span></p><p class="c45"><span class="c19">When transmitting data to the FPGA, we decided to only send new information. This way there was were are able to minimize redundancy and are able to have shorter radio transmissions which take up a large amount of time. We used the same data encoding when transmitting over SPI as we did over radio as described in the previous section and Figure 5.5.1a.</span></p><h3 class="c28" id="h.h4j1q997uanv"><span class="c40 c109 c53">5.5.3 FPGA Display</span></h3><p class="c45"><span class="c19">On the FPGA, in order to display to the monitor, we used three main modules: VGAdriver.v, blockArray.v, VGAlogic.v. </span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">VGAdriver.v was a module we were supplied with by course staff which handled using VGA to display to the screen based on coordinate and color input. Blockarray.v was used to store our information about the maze. There we had a 1024 element array with 5-bit values which was used to keep track of our state of the maze. Each block corresponded to a 32x32 pixel block on the display. To map a set of (X,Y) coordinates into the array, the top 5 bits of each would be taken, and then concatenated to get the value in the array at the block the coordinate is in.</span></p><p class="c45"><span class="c19">The 5 bits in stored in the array were used to keep track of walls and the state of visitation. The bottom four bits were used as signals for if that block had a wall on the north, south, east, or west face of it. While the top bit was used to keep track if it had been visited or not. With the blockarray, we were able to read and write at the same time, which allowed us to update the map as we were gathering new information from the robot.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">VGAlogic.v was the heart of the system, it was where we chose what colors to display and where we received communication over SPI from the base station. To receive data over SPI, we use a counter to know what bit we are on when the slave clock goes high and chip select is low, and as such set the correct bit of our receiving buffer. When this buffer became full, we would decode the received data. To do this we had the transform the encoded X and Y coordinates to those which corresponded to the correct placement of the map location on our display. After that, we used those coordinates to map into the blockArray and write the wall data. We also set the top bit high in the array element since now we knew that the position was visited. Then we decoded the treasure bits, if the bits were anything but 0, we assumed that this was the signal we are meant to receive. In this case, we update registers that we have which keep track of where in the maze the treasure is, while updating another which lets us know which treasure was found in the map. Lastly, we always check the top most bit of the receiving buffer to see if we are finished. If so, we write a register high to indicate that we are finished.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">To draw all the items on the display, we use many if/else if/else statements to determine the color that should be outputted, based on the location of the pixel, as well as the value in the block array, treasure number and location, and if we are finished or not.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">To draw the map, we set aside 20 blocks in a 4x5 rectangle to show the maze as we update it. We use parameters to keep track of where on the display the outside of the maze is, and draw the border walls there. Then, when a pixel inside of the maze needs to be drawn, we first read from the blockArray using the position as the index. If we find that there is a wall on a certain edge, then if the pixel is in the correct position in that block, it is displayed as the wall color. Otherwise if the treasure is in that block, and the pixel is in the center of the block, it will be displayed as the treasure color. Otherwise, if the block has been visited, we display green to indicate that it has, otherwise if we are unfinished we show yellow to indicate that it hasn&rsquo;t been visited yet. Or if we are finished we display magenta to show that the block is unavailable.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">To draw the tally marks to indicate what treasure we had, we drew various numbers of rectangles based on the value of the treasure. The register storing the treasure was 3 bits, so we used each bit to decide how many tallies to draw. We used the value of what each bit represent to draw that many number of tallies if the bit value in the register was high. For example, if the LSB of the register was high, we drew one tally mark, and if the MSB of the register was high, we drew four tally marks. The exact tallies that each drew were designed so that they were all equally spaced out starting from a common location which was stored in a parameter.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">To create the nifty animation, we used a timer which would change the background and circle colors every 2^9th clock tick. The background and circle also would change colors based on if the maze was finished mapping or not. To get the circle to create the aesthetic pattern which was observed, when doing the comparison for if the pixel would be considered &ldquo;in the circle&rdquo; we allowed integer overflow to occur. This allowed us to get the psychedelic pattern which was displayed, making a commentary on how integer overflow is typically seen in a negative capacity, but can actually be quite beautiful.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Lastly to draw the finished triangle, we checked if the pixel was in a given region which represented the triangle, if so, we would then check if we were finished mapping or not. If we were done then we displayed green, otherwise red.</span></p><p class="c33"><span class="c40 c73 c56"></span></p><h2 class="c36" id="h.2mebde1gizbt"><span class="c40 c67 c56">5.6 Line Sensing and Robot Movement</span></h2><p class="c45"><span class="c19">Our robot used the continuous rotation Parallax servos provided as the default option with 4.5 inch 3D printed plastic wheels. Our line following method employed four grayscale sensors, two for simple line following and two for intersection detection. The servos were powered by a five volt battery pack, while the line sensors received power from the 5 volt pin on the Arduino. The circuit diagrams for the line and wall sensors can be seen below in Figure 5.6.1.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 571.00px; height: 432.00px;"><img alt="wall and line sensor circuit.png" src="images/image15.png" style="width: 571.00px; height: 432.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.6.1 - Wall and line sensor circuit diagram</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">The line following is achieved by adjusting the speeds of the servos proportionally to the amount that the robot has moved off of the tape line. It functions functions as PID control using only the proportional term, though in discrete levels. We decided not to use control based on the integral or derivative of the error because it does not provide a noticeable improvement in performance since the robot only did line following for such short periods of time (from one intersection to the next). The intersection-sensing line sensors are placed so that the axis of rotation of the servos was over the center of the tape line of the intersection when the intersection was detected. This was done in order to improve turning performance. See Figure 5.6.2; the forward direction again is the top of this diagram, and the front edge of the robot is the straight edge of the platform.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 476.00px; height: 258.00px;"><img alt="" src="images/image29.png" style="width: 476.00px; height: 258.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c56">Figure 5.6.2: Configuration of line sensors relative to the tape line</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">The line following code calculates an error term by subtracting the value of the right central sensor from that of the left central sensor. This means that even if the robot has turned off the line enough that both sensors are completely off of it, as long as one sensor is still close to the edge of the line the robot can calculate how far it is in error and in which direction (error will be negative if the robot is erring to the right and positive if it is erring to the left). The line following is performed inside of a while loop that runs while the robot is moving from one intersection to another (the while loop starts after a turn is completed and runs until the next intersection is reached). The line following is achieved as follows (see Code Sample 5.6.1 for relevant line following code): </span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">The value of the error term is compared to a defined value ERROR_RANGE. If the error value is between within a certain range (negative ERROR_RANGE and positive ERROR_RANGE), the servos are set to drive at the same speed (drive straight). If the value of the error term is outside that range to the left (error is greater than positive ERROR_RANGE), the robot corrects to the right by an amount proportional to how far outside the acceptable range the front of the robot is (moves with its left servo faster than its normal forward speed and the right servo slower than its normal forward speed). If the value of the error term is outside the acceptable range to the right (error is less than negative ERROR_RANGE), the robot corrects to the left by the same method. This correction loop runs continuously until the robot reaches an intersection (which is determined by both of the sensors on either side of the tape line, over the floor, reading above a certain value, which indicates that they are over the perpendicular black line of an intersection), when the servos are stopped and the move procedure ends. The navigation algorithm then calculates the next move based on the wall geometry at the intersection and calls the move procedure again with the desired direction as an argument. In other words, the robot navigates by correcting its path according to a proportionate control loop scheme.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c40 c73 c56">Code Sample 5.6.1</span></p><a id="t.d48a7a3456e531ce728cd967ff197e5516d05465"></a><a id="t.10"></a><table class="c85"><tbody><tr class="c48"><td class="c96" colspan="1" rowspan="1"><ol class="c44 lst-kix_27hxptg4gai7-0 start" start="1"><li class="c6 c8"><span class="c38">&nbsp;</span><span class="c30">// After turn is complete, drive forward to the next intersection, making corrections as necessary</span></li><li class="c6 c8"><span class="c38">&nbsp; </span><span class="c30">// while-loop is all of line following</span></li><li class="c6 c8"><span class="c38">&nbsp; </span><span class="c80 c53">while</span><span class="c60 c53">(</span><span class="c38">right_turn_val</span><span class="c61 c53">&lt;</span><span class="c47">700</span><span class="c38">&nbsp;</span><span class="c81 c53">||</span><span class="c38">&nbsp;left_turn_val</span><span class="c61 c53">&lt;</span><span class="c47">700</span><span class="c40 c60 c53">){</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// Don&#39;t start searching for an intersection until the intersection sensors are clear of the tape line</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c80 c53">if</span><span class="c38">&nbsp;</span><span class="c60 c53">(</span><span class="c38">counter</span><span class="c61 c53">&gt;</span><span class="c47">0</span><span class="c40 c60 c53">){</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; right_turn_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">0</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">//set so that while loop continues</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; left_turn_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">0</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">//set so that while loop continues</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; counter </span><span class="c61 c53">=</span><span class="c38">&nbsp;counter </span><span class="c81 c53">-</span><span class="c38">&nbsp;</span><span class="c47">1</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c80 c53">else</span><span class="c38">&nbsp;</span><span class="c40 c60 c53">{</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; right_turn_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">right_turn</span><span class="c60 c53">)</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">//signal from center right sensor</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; left_turn_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">left_turn</span><span class="c60 c53">)</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">//signal from center left sensor &nbsp;</span></li><li class="c6 c8"><span class="c38 c40">&nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38 c40">&nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// Read analog values from two center sensors</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; right_pid_val </span><span class="c53 c61">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">right_pid</span><span class="c60 c53">)</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">// signal from center right sensor</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; left_pid_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">left_pid</span><span class="c60 c53">)</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">// signal from center left sensor &nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; </span><span class="c30">////Serial.println(right_pid_val);</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; </span><span class="c30">////Serial.println(left_pid_val); &nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; </span><span class="c30">////Serial.println(); &nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; error </span><span class="c61 c53">=</span><span class="c38">&nbsp;left_pid_val </span><span class="c81 c53">-</span><span class="c38">&nbsp;right_pid_val</span><span class="c17">;</span><span class="c38">&nbsp;</span><span class="c30">// Positive position to right of line</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c80 c53">if</span><span class="c38">&nbsp;</span><span class="c60 c53">(</span><span class="c47">abs</span><span class="c60 c53">(</span><span class="c38">error</span><span class="c60 c53">)</span><span class="c38">&nbsp;</span><span class="c61 c53">&lt;=</span><span class="c38">&nbsp;ERROR_RANGE</span><span class="c40 c60 c53">){</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; left_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_L_FORWARD_MAX</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; right_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_R_FORWARD_MAX</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// Too right</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c80 c53">else</span><span class="c38">&nbsp;</span><span class="c80 c53">if</span><span class="c38">&nbsp;</span><span class="c60 c53">(</span><span class="c38">error </span><span class="c61 c53">&gt;</span><span class="c38">&nbsp;ERROR_RANGE</span><span class="c60 c53">)</span><span class="c38">&nbsp;</span><span class="c40 c60 c53">{</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; </span><span class="c30">// Adjust left</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; error_magnitude </span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">abs</span><span class="c60 c53">(</span><span class="c38">error</span><span class="c60 c53">)</span><span class="c81 c53">/</span><span class="c60 c53">(</span><span class="c80 c53">float</span><span class="c60 c53">)</span><span class="c38">ERROR_RANGE</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; left_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_L_FORWARD_MAX </span><span class="c81 c53">-</span><span class="c38">&nbsp;error_magnitude</span><span class="c81 c53">*</span><span class="c38">SERVO_L_INCR_FORWARD</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; right_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_R_FORWARD_MAX </span><span class="c81 c53">+</span><span class="c38">&nbsp;error_magnitude</span><span class="c53 c81">*</span><span class="c38">SERVO_R_INCR_FORWARD</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// Too left</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c80 c53">else</span><span class="c38">&nbsp;</span><span class="c80 c53">if</span><span class="c38">&nbsp;</span><span class="c60 c53">(</span><span class="c38">error </span><span class="c61 c53">&lt;</span><span class="c38">&nbsp;</span><span class="c81 c53">-</span><span class="c38">ERROR_RANGE</span><span class="c60 c53">)</span><span class="c38">&nbsp;</span><span class="c40 c60 c53">{</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; </span><span class="c30">// Adjust right</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; error_magnitude </span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">abs</span><span class="c60 c53">(</span><span class="c38">error</span><span class="c60 c53">)</span><span class="c81 c53">/</span><span class="c60 c53">(</span><span class="c80 c53">float</span><span class="c60 c53">)</span><span class="c38">ERROR_RANGE</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; left_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_L_FORWARD_MAX </span><span class="c81 c53">+</span><span class="c38">&nbsp;error_magnitude</span><span class="c81 c53">*</span><span class="c38">SERVO_L_INCR_FORWARD</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; &nbsp; right_servo.</span><span class="c53 c84">write</span><span class="c60 c53">(</span><span class="c38">SERVO_R_FORWARD_MAX </span><span class="c81 c53">-</span><span class="c38">&nbsp;error_magnitude</span><span class="c81 c53">*</span><span class="c38">SERVO_R_INCR_FORWARD</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; delay</span><span class="c60 c53">(</span><span class="c47">10</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; left_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_BRAKE</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; right_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">SERVO_BRAKE</span><span class="c60 c53">)</span><span class="c17">;</span></li></ol></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Turning is the first movement performed by the move procedure. The move procedure is called by the navigation algorithm when the robot is at an intersection. The navigation algorithm uses the information about the walls near the robot to determine whether the robot should go left, straight, right, or turn 180 degrees, then calls the move procedure to make that turn and move to the next intersection. The move procedure executes a turn in the following manner (see Code Sample 5.6.2 for turning code): if the robot must make a turn (is not going straight), the servos are set to rotate the robot in the required direction for a fixed duration that corresponds to the turn; a 90 degree turn rotates for a shorter delay than a 180 degree turn. The robot then continues to turn while reading from the center line sensors; when both of the center line sensors read a high enough value (indicating that they are over a tape line), the servos are halted for a moment while the angular momentum from the turn is dissipated in the robot&rsquo;s settling motion. Then the servos are set to drive forward blindly for a short time so that the intersection sensing sensors (those on the outside of the tape line on either side) are clear of the intersection, and the values of the intersection variables are reset. The robot then drives forward to the next intersection by the method described above Code Sample 5.6.1. If the robot does not need to make a turn when the move procedure is called (was instructed to drive straight through the intersection), the servos are simply set to drive forward blindly for a short period so that the line sensors can move past the intersection, and then the robot drives to the next intersection by the same method as if it had made a turn.</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c40 c73 c56">Code Sample 5.6.2</span></p><a id="t.860184412332476c7d362743c37896f70dfa9092"></a><a id="t.11"></a><table class="c85"><tbody><tr class="c48"><td class="c96" colspan="1" rowspan="1"><ol class="c44 lst-kix_ywj8w8u4kf85-0 start" start="1"><li class="c6 c8"><span class="c38">&nbsp; </span><span class="c30">//turn if requested</span></li><li class="c6 c8"><span class="c38">&nbsp; </span><span class="c53 c80">if</span><span class="c38">&nbsp;</span><span class="c60 c53">(</span><span class="c38">direction </span><span class="c81 c53">!</span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">1</span><span class="c40 c60 c53">){</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// Start turning until off the current line</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; left_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">servo_turn_value</span><span class="c60 c53">[</span><span class="c38">direction</span><span class="c60 c53">])</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; right_servo.</span><span class="c84 c53">write</span><span class="c60 c53">(</span><span class="c38">servo_turn_value</span><span class="c60 c53">[</span><span class="c38">direction</span><span class="c60 c53">])</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; delay</span><span class="c60 c53">(</span><span class="c38">servo_turn_delays</span><span class="c60 c53">[</span><span class="c38">direction</span><span class="c60 c53">])</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38 c40">&nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp;</span><span class="c30">// Read values from center line sensors</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; right_pid_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">right_pid</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; left_pid_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c53 c60">(</span><span class="c38">left_pid</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38 c40">&nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// While center sensors are not over another line, continue turning</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c80 c53">while</span><span class="c60 c53">((</span><span class="c38">right_pid_val</span><span class="c61 c53">&lt;</span><span class="c47">900</span><span class="c60 c53">)</span><span class="c38">&nbsp;</span><span class="c81 c53">||</span><span class="c38">&nbsp;</span><span class="c60 c53">(</span><span class="c38">left_pid_val</span><span class="c61 c53">&lt;</span><span class="c47">900</span><span class="c40 c60 c53">)){</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; right_pid_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">right_pid</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; left_pid_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;muxRead</span><span class="c60 c53">(</span><span class="c38">left_pid</span><span class="c60 c53">)</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; </span><span class="c40 c60 c53">}</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; </span><span class="c30">// Reset intersection variables &nbsp;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; right_turn_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">0</span><span class="c17 c40">;</span></li><li class="c6 c8"><span class="c38">&nbsp; &nbsp; left_turn_val </span><span class="c61 c53">=</span><span class="c38">&nbsp;</span><span class="c47">0</span><span class="c17">;</span></li></ol></td></tr></tbody></table><p class="c33"><span class="c19"></span></p><h2 class="c36" id="h.ukg5eslv71zt"><span class="c40 c71 c53">5.7 Navigation</span></h2><p class="c45"><span class="c53">The backbone of our navigation algorithm takes on a DFS approach. The first of the following subsections &ldquo;Baseline Design&rdquo; introduces our initial approach without any optimizations, and the rest of the subsections in this section discuss our major optimizations made to our baseline design.</span></p><h3 class="c28" id="h.pirmcvgwjgdf"><span class="c11">5.7.1 Baseline Design</span></h3><p class="c45"><span class="c53">Our mapping algorithm is essentially a highly optimized DFS implemented on a stack. At each grid, the robot detects the wall information of the current block using the wall sensors, sense all the neighboring blocks that are visitable but unvisited, and pick one according to the priority orders and push all the rest to the stack. The robot repeats on the above pattern until all the neighboring blocks are either blocked by walls, already visited - what we call entering into a dead end. The robot would then look at the top of the stack. Nothing left in the stack is an indicator of that the robot has finished mapping the entire maze, and if the stack is not empty, the robot will backtrack to that block, since that is the most recent last visitable &ldquo;neighbor&rdquo;. From a software&rsquo;s perspective, the action of backtracking wouldn&rsquo;t be necessary - a DFS in software would simply move the iterator to that last most recent visitable block. However, in our robot&rsquo;s implementation, the need of backtracking introduces a major challenge. An initial implementation of backtracking was that we created a new 20 element-long array where each element corresponds to a block in a 5 by 4 maze. The information stored at each index of this array is the ID of another block from where the block pointed by the index was first visited - what we define as the backpointer. When backtracking, the robot will flow each block&rsquo;s backpointer and move to the block pointed by the backpointer, until it reaches the least common ancestor of the block that introduces a dead end and the most recent visitable block. However, such an implementation introduces many unnecessary moves, so we made an important optimization on our backtracking algorithm that will be introduced in the next subsection.</span></p><h3 class="c28" id="h.3fry3pbismbr"><span class="c11">5.7.2 Backtrack Optimizations</span></h3><p class="c45"><span class="c19">The first thing we did to implement the optimization is to change from assuming no walls to assuming there are walls at the beginning of the stage, the robot would then take out walls as it navigates through the maze. Once the robot enters a dead-end, it simply look at the information of the maze and the walls taken out so far, and go to the most recent visitable block with the shortest path, done by a BFS pattern that counts up from the destination. Without this important change of assumption, the robot wasn&rsquo;t able to do so, since we assumed there were no walls at the beginning, so even if the robot saw that there was no walls between two blocks, it cannot know it for sure, since it might not have visited the blocks around that wall before so it could not have detected it if there was a wall, and therefore the robot could only rely on the idea of backpointers. Once we changed to assuming there are walls at the beginning, when the robot sees a clear path with no wall, it will no it for sure, since it must have verified and taken out the wall before. Figure 5.7.2.1 shows an example of traversing maze without backtracking optimizations, and Figure 5.7.2.2 shows the same maze as traversed with backtracking optimizations.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 351.03px; height: 375.50px;"><img alt="" src="images/image25.png" style="width: 351.03px; height: 375.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.7.2.1 - Path with DFS but without Backtracking Optimizations</span></p><p class="c10 c49"><span class="c19"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.50px; height: 400.44px;"><img alt="" src="images/image18.png" style="width: 373.50px; height: 400.44px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.7.2.2 - Path with DFS and Backtracking Optimizations</span></p><h3 class="c28" id="h.4pi9oyh4whvk"><span class="c11">5.7.3 Detouring to Finish Earlier</span></h3><p class="c45"><span class="c19">Despite having an optimized backtracking algorithm working in conjunction with our DFS implementation, we discovered after extensive testing that there are certain mazes that can exploit weaknesses in our navigation algorithm. For easy mazes, the robot follows a very simple path to visit each block in the stack. However, we were able to make a distinction between difficult and easy mazes because difficult mazes exploit blocks at the bottom of the stack, forcing the robot to backtrack from wherever it is currently located to these blocks. In some cases, this issue was not a problem for us, but for other test mazes there was as many as 10 additional steps needed. Figure 5.7.3.1 illustrates a maze that exploits blocks in the bottom of the stack, causing the robot to finish in 33 steps.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 354.58px; height: 381.50px;"><img alt="maze1.PNG" src="images/image21.png" style="width: 354.58px; height: 381.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.7.3.1 - Path without Detouring</span></p><p class="c10 c49"><span class="c19"></span></p><p class="c45"><span class="c19">In this maze, the blocks 10 and 18 are pushed to the stack early when the robot initially moves up. However, the robot has an opportunity to visit block 10 when it is at block 14, but fails to do so because the next node in the stack is block 17 and the robot backtracks to get there. After visiting block 17, the robot pursues block 16 and continues along that path although it could have visited block 18. The robot suffers for making this decision because after reaching block 4, the robot must backtrack to visit node 10 first, and then block 18 to finish exploring. </span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">In order to optimize the navigation algorithm to account for these scenario, we kept track of how many times we encountered unvisited blocks. This way, if an opportunity arises to visit a block at the bottom of the stack, the robot detours to it and resumes pursuing nodes popped from the top of the stack. By making this change, the number of steps required to explore the same maze is reduced from 33 to 26. Figure 5.7.3.2 illustrates the path the robot takes when it chooses to visit unvisited blocks when it is seen for the second time. </span></p><p class="c10 c49"><span class="c19"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 342.35px; height: 371.50px;"><img alt="maze2.PNG" src="images/image14.png" style="width: 342.35px; height: 371.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.7.3.2 - Path with Detouring </span></p><p class="c10 c49"><span class="c40 c73 c56"></span></p><p class="c45"><span class="c19">Evidently, the path algorithm saves the robot from backtracking unnecessarily to pursue final nodes at the bottom of the stack. In order to make sure that this optimization does not hurt the robot&rsquo;s exploration performance on easy mazes, we ran the updated algorithm across our older test cases. Below we illustrate a earlier test maze with the updated algorithm to show that the number of steps does not increase, and in actuality performs better in some cases by getting rid of the block that would be at the bottom of the stack early, hence eliminating the need to backtrack to it at the end. In Figure 5.7.3.3, the robot detours to block 18 when it sees it for the second time while positioned at block 14.</span></p><p class="c10 c49"><span class="c19"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 343.25px; height: 363.50px;"><img alt="maze3.PNG" src="images/image27.png" style="width: 343.25px; height: 363.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c56">Figure 5.7.3.3 - Path with Detouring on an Earlier Maze</span></p><h3 class="c28" id="h.cz3l0qn51ebu"><span class="c11">5.7.4 Omitting Unnecessary Moves</span></h3><p class="c45"><span class="c19">With all the previous optimizations, we also realized that to successfully map all the walls of the maze, we don&rsquo;t necessarily have to visit all the blocks, since that going into certain blocks don&rsquo;t bring any new information about the walls. Omitting such blocks will always stop the robot one block before the finishing block (except if the treasure happens to be on the last block), and can even save a large amount of moves if the blocks that are omittable happen to be at other critical positions. However, we cannot perform such optimizations before we find the treasure, since even if the blocks that are omittable do not bring new information it might hold a treasure.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 379.50px; height: 406.87px;"><img alt="" src="images/image26.png" style="width: 379.50px; height: 406.87px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.7.4.1 - Path that does not omit a block</span></p><p class="c10 c49"><span class="c40 c73 c56"></span></p><p class="c45"><span class="c19">The example depicted in Figure 5.7.4.1 illustrates how the robot has to go back to block 10 after it nearly finishes mapping when it visits block 1. All the steps of backtracking to block 10 is unnecessary.</span></p><p class="c33"><span class="c19"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 379.50px; height: 408.08px;"><img alt="" src="images/image12.png" style="width: 379.50px; height: 408.08px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c40 c73 c56">Figure 5.7.4.2 - Path that does omit a block</span></p><p class="c10 c49"><span class="c19"></span></p><p class="c45"><span class="c53">In the same example but with the mechanism that omits unnecessary blocks, the robot does not visit block 10. The robot can do this because it has already seen block 10 from its all four directions, so it already knows all the walls around block 10, so if the robot has found the treasure elsewhere (it is guaranteed to find exactly one treasure in each maze), then it does not have to visit block 10 as demonstrated in Figure 5.7.4.2.</span></p><h3 class="c28" id="h.6afammlj39nw"><span class="c11">5.7.5 Setting Priorities Accordingly</span></h3><p class="c45"><span class="c19">Often, the robot has four choices of which direction to go in. &nbsp;In that case, there is a priority defined by which direction is chosen to be explored first. &nbsp;For the depth-first search algorithm that was used for path-finding, this priority comes from which of the adjacent cells is pushed to the stack last (first in, last out). At an intersection, the cell that is pushed to the stack first has a lower priority than cell(s) pushed later. &nbsp;</span></p><p class="c33"><span class="c19"></span></p><p class="c45"><span class="c19">Before the robot has found the treasure, priority for directions to move to is as follows: right, up, left, and down, with moving right having the highest priority. Through extensive testing, we determined that this set of priorities worked best overall with the optimizations we implemented. It also makes sense intuitively: the robot starts on the bottom right corner, so we visit the rightmost blocks before we explore the ones above, then left, and finally return to the bottom to finish exploring. After the robot has found the treasure, the robot&rsquo;s North direction is prioritized. &nbsp;We do this because testing revealed that traveling straight was significantly faster than turning, so we felt that by prioritizing the robot to go straight, we could limit the number of turns and therefore decrease the overall time spent by the robot mapping the maze. The rationale for only implementing such an optimization after the robot has found the treasure is that more omittable blocks will emerge once the robot found the treasure, so by prioritizing going straight, the robot could have automatically omitted blocks on the sides that eventually turn out to be omittable.</span></p><h1 class="c14" id="h.y80j0zcq8s9b"><span class="c40 c71 c53">6. Possible Failure Modes</span></h1><p class="c45"><span class="c56">Table 6.1: Failure Modes for maze-mapping robot</span></p><a id="t.a98d2e5bfe97472684ef0bb1ed827b3f21d1858e"></a><a id="t.12"></a><table class="c85"><tbody><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">FM#</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Item</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Failure Mode</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Failure Effects (a. Local, b. System, c. Mission)</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Possible Causes</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Corrective Action (a. Design, b. Mfg process, c. Operation)</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c40 c56 c78">Failure effect Severity</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Occurrence Likelihood</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Risk Priority</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c40 c78 c56">Criticality</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.1</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Microphone circuit subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Failure to trigger at correct frequency</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Robot won&rsquo;t start immediately, will need to press override switch</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Op-amp burnt out, resistor not soldered correctly, input signal too low, checking wrong bin for FFT</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Use more gain</span></p><p class="c6"><span class="c27">b. Better soldering</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">4</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">20</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.2</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Triggering for incorrect frequency</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Reset robot</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Resistor or capacitor burning out or soldered improperly</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. More consecutive triggers, higher trigger value</span></p><p class="c6"><span class="c27">c. Not powering robot until needed </span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">25</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.3</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Override circuit subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Returning high value when not pressed</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Robot false starts, needs to be reset</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Button shorted, trigger value wrong</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Better trigger value</span></p><p class="c6"><span class="c27">b. Use different button</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">1</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.4</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Not returning a high value when pressed</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Robot fails to start</span></p><p class="c6"><span class="c27">c. Failure of mission if microphone circuit doesn&rsquo;t work</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Button broken, wrong resistor value, trigger value wrong</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Better trigger value and resistor</span></p><p class="c6"><span class="c27">b. Check connections</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">1</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.5</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Batteries</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Battery undervoltage</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Sensors won&rsquo;t be on, radio won&rsquo;t transmit information, c. Mission failure</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Defective battery, too many runs with the same battery</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">c. Replace battery, check voltage before starting</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">6</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">60</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Med</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.6</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Treasure circuit subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Not recognizing there is treasure at an intersection</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. No treasure detected</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Faulty IR sensor connection, interrupt not triggered, circuit failure</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Check connections, make sure operational amplifier is not burnt out</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">25</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.7</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Thinking there is treasure at an intersection when there isn&rsquo;t</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. False treasure detected</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Triggered from ambient IR light, circuit failure</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Add covering around sensor</span></p><p class="c6"><span class="c27">b. Check connections, make sure operational amplifier is not burnt out</span></p><p class="c6 c49"><span class="c27"></span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">3</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">15</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.8</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Recognizing there&rsquo;s treasure but getting the wrong frequency</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Wrong treasure detected</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Timing between interrupts matched incorrectly, circuit not triggering correctly</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Fixing ISR in code to calculate the frequency correctly</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">2</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.9</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Radio communication subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Sending incorrect information to basestation</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">&nbsp;b. No or incorrect information displayed on FPGA</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Loose connection, wrong bit-rate </span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Change bit rate to match on both sides</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">6</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">2</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">12</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.10</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Not sending any information to basestation</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Nothing displayed on FPGA</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Loose connection, SPI setup problem</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Stabilize radio breakout board</span></p><p class="c6"><span class="c27">c. Making sure radio is getting power</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">6</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">4</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">24</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.11</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Not receiving any information at basestation</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Loose connection, SPI setup problem</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Stabilize radio breakout board</span></p><p class="c6"><span class="c27">c. Making sure radio is getting power</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">6</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">4</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">24</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.12</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Receiving incorrect information at basestation</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. VGA display will show inaccurate depiction of maze</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Interference from other groups&rsquo; radio communication due to not using our assigned channel number </span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Use assigned channel number</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">6</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">2</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">12</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.13</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Servo subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Servo motors not functioning</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Robot won&rsquo;t be able to move</span></p><p class="c6"><span class="c27">c. The robot not being able to move means that the mission of mapping and displaying the maze will not succeed.</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low battery on battery pack</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">c. Make sure battery pack is fully charged before use.</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">3</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">30</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.14</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Wall sensor subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Doesn&rsquo;t &ldquo;see&rdquo; wall in front of it</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Robot could run over wall.</span></p><p class="c6"><span class="c27">c. Mission fails because maze info collected will be incorrect</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low battery on 9V battery, wall sensors not properly wired up to Arduino</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Make sure wires are neat and that they fit snugly into the headers on protoboard shield, make sure enclosure for sensor is secure so wall sensor is properly aligned c. Make sure 9V has sufficient charge</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">5</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">50</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Med</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.15</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6 c49"><span class="c27"></span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">&ldquo;Sees&rdquo; a wall in front when there isn&rsquo;t one</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Robot might not explore an explorable part of maze.</span></p><p class="c6"><span class="c27">c. Mission fails becuase maze info collected will be incorrect</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Low battery on 9V battery, wall sensors not properly wired up to Arduino</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Organize wires neatly and ensure they fit snugly into headers on protoboard shield, make sure enclosure for sensor is secure so wall sensor is properly aligned c. Make sure 9V has sufficient charge</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">8</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">6</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">48</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Med</span></p></td></tr><tr class="c48"><td class="c34" colspan="1" rowspan="1"><p class="c6"><span class="c27">F.16</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Line following subsystem</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c6"><span class="c27">Not following lines</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c6"><span class="c27">a. Robot can&rsquo;t move to next intersection</span></p><p class="c6"><span class="c27">b. Robot will not be able to move any further intersections</span></p><p class="c6"><span class="c27">c. Mission is a failure because information about the maze cannot be determined and displayed on monitor.</span></p></td><td class="c89" colspan="1" rowspan="1"><p class="c6"><span class="c27">Variation in ambient light</span></p><p class="c6"><span class="c27">Light sensors not getting powered</span></p><p class="c6"><span class="c27">Light sensors not working</span></p><p class="c6"><span class="c27">Light sensors not being connected to correct pins on the Arduino</span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c6"><span class="c27">b. Organize wires neatly and ensure they fit snugly into headers on protoboard shield, add enclosure for light sensors</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c6"><span class="c27">10</span></p></td><td class="c97" colspan="1" rowspan="1"><p class="c6"><span class="c27">2</span></p></td><td class="c72" colspan="1" rowspan="1"><p class="c6"><span class="c27">20</span></p></td><td class="c83" colspan="1" rowspan="1"><p class="c6"><span class="c27">Very Low</span></p></td></tr></tbody></table><h1 class="c14" id="h.2twk3n9dd4at"><span class="c19">Table 6.1 shows every conceivable way that the robot could fail to perform successfully. Throughout the project, we strived to address all of the design choices that could mitigate these failures, and on competition day, we made sure our operation of the robot adhered to the guidelines mentioned in the failure modes table.</span></h1><h1 class="c14" id="h.p80rdutjzh8h"><span class="c40 c71 c53">7. Conclusion</span></h1><p class="c45"><span class="c56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c19">In summation, the robot we were able to create this semester performed quite well in all aspects of the specifications of the project, including: being able to start off a 660 Hz pitch with an override button as a backup, finding the location and frequency of an infrared beacon, traversing just enough of the maze to know the placement of all walls, sending all information about the maze to the base-station, and clearly displaying the information about the maze to a VGA display.</span></p><p class="c45 c59"><span class="c19">Our goals at the beginning of this competition were to work effectively as a team and to medal in the competition at the end of the semester. Both of these goals were achieved. The former was accomplished because we all made a great effort to communicate as much as possible and devote as much time to the project as possible. The latter was accomplished because of our attention to detail on all subsystems of the robot.</span></p><p class="c45 c59"><span class="c19">One limitation of our design when the robot was in its earlier stages was that the microphone circuit and accompanying Fast Fourier Transform code was not reliable enough. After a lot of testing, it was determined that the reason was that the protoboard we had the microphone circuit on was too far separated from the Arduino (it was the top-most protoboard shields, the shield farthest from the Arduino), causing attenuation of the microphone signal. &nbsp;We re-arranged the order of the shields and placed the microphone circuit shield closest to the Arduino, and the 660 Hz was reliably detected without any false starts. A limitation of the final design was that we used 9V batteries to power the Arduino instead of a 5V battery pack. &nbsp;We found that the Arduino required enough power that the 9V batteries were depleted very quickly. We had to use a new 9V battery for each round of the competition because of this design limitation.</span></p><p class="c45 c59"><span class="c19">We covered the subsystems thoroughly by running each one through the process of designing, prototyping, testing, iterating, and manufacturing. The emphasis we put on testing really paid off during the competition because the robot was remarkably reliable across the four rounds of competition. There was a lot of soldering and wiring to be done for this project, and therefore many areas for where one wire could get disconnected. It&rsquo;s a testament to our thorough testing process that all wiring and circuit problems were caught and completely fixed prior to the competition. </span></p><h1 class="c14" id="h.5iv3mhvl5h0c"><span class="c40 c53 c71">8. Appendix</span></h1><h2 class="c36" id="h.n53znz32tc9r"><span class="c40 c67 c56">8.1 Robot Arduino Code</span></h2><a id="t.a6c0c38d73189c207ebcf2df42710b88f485ddeb"></a><a id="t.13"></a><table class="c85"><tbody><tr class="c48"><td class="c96" colspan="1" rowspan="1"><ol class="c44 lst-kix_bq7g8rf0rrj4-0 start" start="1"><li class="c6 c8"><span class="c58 c40">#include &lt;SPI.h&gt;</span></li><li class="c6 c8"><span class="c58">#include &lt;Servo.h&gt;</span></li><li class="c6 c8"><span class="c58 c40">#include &quot;nRF24L01.h&quot;</span></li><li class="c6 c8"><span class="c58 c40">#include &quot;RF24.h&quot;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Servo speed definitions</span></li><li class="c6 c8"><span class="c58 c40">#define SERVO_BRAKE 90</span></li><li class="c6 c8"><span class="c58 c40">#define SERVO_L_FORWARD_MAX 100.0</span></li><li class="c6 c8"><span class="c58 c40">#define SERVO_R_FORWARD_MAX 80.0</span></li><li class="c6 c8"><span class="c58 c40">#define SERVO_L_INCR_FORWARD 2.0</span></li><li class="c6 c8"><span class="c58 c40">#define SERVO_R_INCR_FORWARD -2.0</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c58 c40">#define ROW_NUM 5</span></li><li class="c6 c8"><span class="c58 c40">#define COL_NUM 4</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Servo objects</span></li><li class="c6 c8"><span class="c0">Servo left_servo</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">Servo right_servo</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Control variables for line following</span></li><li class="c6 c8"><span class="c31">float</span><span class="c0">&nbsp;error </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">float</span><span class="c0">&nbsp;error_magnitude </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;counter </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c58 c40">#define ERROR_RANGE 100</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Line sensor values</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;right_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;left_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;right_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;left_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Servo turn values</span></li><li class="c6 c8"><span class="c31">float</span><span class="c0">&nbsp;servo_turn_value</span><span class="c5">[]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">SERVO_R_FORWARD_MAX,</span><span class="c9">0</span><span class="c0">,SERVO_L_FORWARD_MAX, SERVO_L_FORWARD_MAX</span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;servo_turn_delays</span><span class="c5">[]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c9">300</span><span class="c0">,</span><span class="c9">0</span><span class="c0">,</span><span class="c9">300</span><span class="c0">,</span><span class="c9">900</span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// FFT parameters</span></li><li class="c6 c8"><span class="c58 c40">#define LOG_OUT 1 // use the log output function</span></li><li class="c6 c8"><span class="c58 c40">#define FFT_N 128 // set to 256 point fft</span></li><li class="c6 c8"><span class="c58 c40">#define AMP_THRESHOLD 80</span></li><li class="c6 c8"><span class="c58 c40">#define FFT_TRIGGER 3</span></li><li class="c6 c8"><span class="c58 c40">#include &lt;FFT.h&gt;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;threshold </span><span class="c7">=</span><span class="c0">&nbsp;AMP_THRESHOLD</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;fft_counter </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">//for false positives</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Variable that dictates which way robot turns at intersection</span></li><li class="c6 c8"><span class="c2">//0 left, 1 straight, 2 right, 3 180</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;direction </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">//Wall sensing</span></li><li class="c6 c8"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;selectPins</span><span class="c5">[</span><span class="c9">3</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c9">8</span><span class="c0">, </span><span class="c9">2</span><span class="c0">, </span><span class="c9">4</span><span class="c5">}</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Mux select signals S0~2, S1~3, S2~4</span></li><li class="c6 c8"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;zInput </span><span class="c7">=</span><span class="c0">&nbsp;A0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Connect common (Z) to A4 (analog input)</span></li><li class="c6 c8"><span class="c58 c40">#define RIGHT_WALL_SENSOR_THRESHOLD 400</span></li><li class="c6 c8"><span class="c58 c40">#define LEFT_WALL_SENSOR_THRESHOLD 220</span></li><li class="c6 c8"><span class="c58 c40">#define FRONT_WALL_SENSOR_THRESHOLD 100</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Inputs on analog mux</span></li><li class="c6 c8"><span class="c58 c40">#define rightWall 6</span></li><li class="c6 c8"><span class="c58 c40">#define leftWall 5</span></li><li class="c6 c8"><span class="c58 c40">#define frontWall 7</span></li><li class="c6 c8"><span class="c58 c40">#define right_pid 3</span></li><li class="c6 c8"><span class="c58 c40">#define left_pid 2</span></li><li class="c6 c8"><span class="c40 c58">#define right_turn 4</span></li><li class="c6 c8"><span class="c58 c40">#define left_turn 1</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c58 c40">#define ledIndicator A5</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Wall sensor values</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;rightWallVal </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;leftWallVal </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;frontWallVal </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;wallsRadio </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c58 c40">#define WALL_FRONT_2 5 //1</span></li><li class="c6 c8"><span class="c58 c40">#define WALL_LEFT_2 12 //2</span></li><li class="c6 c8"><span class="c58 c40">#define WALL_RIGHT_2 6 //4</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Radio</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;WALL_NORTH_2 1</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;WALL_SOUTH_2 2</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;WALL_WEST_2 4</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;WALL_EAST_2 8</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;NO_TREASURE 0</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;KHZ_7 1</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;KHZ_9 2</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;KHZ_11 3</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;KHZ_13 4</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;KHZ_15 5</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;KHZ_17 6</span></li><li class="c6 c8"><span class="c58 c40">#define &nbsp;FINISHED 128</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">//Radio values</span></li><li class="c6 c8"><span class="c31">uint8_t</span><span class="c0">&nbsp;treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;finished </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">char</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">2</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c5">{</span><span class="c9">0</span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">uint8_t</span><span class="c0">&nbsp;xPos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">uint8_t</span><span class="c0">&nbsp;yPos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Radio Setup</span></li><li class="c6 c8"><span class="c2">// Set up nRF24L01 radio on SPI bus plus pins 9 &amp; 10</span></li><li class="c6 c8"><span class="c0">RF24 radio</span><span class="c5">(</span><span class="c9">9</span><span class="c0">,</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Radio pipe addresses for the 2 nodes to communicate.</span></li><li class="c6 c8"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">uint64_t</span><span class="c0">&nbsp;pipes</span><span class="c5">[</span><span class="c9">2</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;0x000000000CLL, 0x000000000DLL </span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Role management</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// The various roles supported by this sketch</span></li><li class="c6 c8"><span class="c31">typedef</span><span class="c0">&nbsp;</span><span class="c31">enum</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;role_ping_out </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">, role_pong_back </span><span class="c5">}</span><span class="c0">&nbsp;role_e</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// The debug-friendly names of those roles</span></li><li class="c6 c8"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">char</span><span class="c16">*</span><span class="c0">&nbsp;role_friendly_name</span><span class="c5">[]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c62">&quot;invalid&quot;</span><span class="c0">, </span><span class="c62">&quot;Ping out&quot;</span><span class="c0">, </span><span class="c62">&quot;Pong back&quot;</span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// The role of the current running sketch</span></li><li class="c6 c8"><span class="c0">role_e role </span><span class="c7">=</span><span class="c0">&nbsp;role_ping_out</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Treasure detection pins</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;treasure_detection_pin </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">6</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Positive input of internal comparator</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;avg_val_pin </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">7</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Negative input of internal comparator</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c2">//unsigned int period = 0;</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c31">unsigned</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;treasure_freq </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;on &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c31">bool</span><span class="c0">&nbsp;treas </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// indicates whether the current intersection has treasure in the vicinity</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">volatile</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;treasure_index </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">volatile</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;period </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;manualOverride </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;whistle </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c8"><span class="c58 c40">#define overridePin A3</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c2">// Treasure detection ISR</span></li><li class="c6 c8"><span class="c0">&nbsp;ISR</span><span class="c5">(</span><span class="c0">ANALOG_COMP_vect</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;</span><span class="c2">// Indicate that there is treasure at this block, store the number of</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;</span><span class="c2">// cycles it took for this interrupt to trigger, and then zero the timer.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;treas </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;period &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;TCNT2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;TCNT2 </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp;</span><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">typedef</span><span class="c0">&nbsp;</span><span class="c31">enum</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_NORTH </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">, </span><span class="c2">// 0001</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_EAST &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c0">, </span><span class="c2">// 0010</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_SOUTH </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c0">, </span><span class="c2">// 0100</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_WEST &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c0">, </span><span class="c2">// 1000</span></li><li class="c6 c8"><span class="c5">}</span><span class="c0">&nbsp;MAZEINFO</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">typedef</span><span class="c0">&nbsp;</span><span class="c31">enum</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c62 c77">/* Take a conservative approach: always assume there is a wall at the back.</span></li><li class="c6 c8"><span class="c62 c77">&nbsp; &nbsp;* Assuming there is not a wall at the back will bring errors when the robot is making 180 degree turns.</span></li><li class="c6 c8"><span class="c62 c77">&nbsp; &nbsp;*/</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_FRONT </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">5</span><span class="c0">, &nbsp;</span><span class="c2">// 0101</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_RIGHT </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">6</span><span class="c0">, &nbsp;</span><span class="c2">// 0110</span></li><li class="c6 c8"><span class="c0">&nbsp; WALL_LEFT &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">12</span><span class="c0">, </span><span class="c2">// 1100</span></li><li class="c6 c8"><span class="c5">}</span><span class="c0">&nbsp;WALLINFO</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">typedef</span><span class="c0">&nbsp;</span><span class="c31">enum</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; NORTH </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">, </span><span class="c2">// 0001</span></li><li class="c6 c8"><span class="c0">&nbsp; EAST &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c0">, </span><span class="c2">// 0010</span></li><li class="c6 c8"><span class="c0">&nbsp; SOUTH </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c0">, </span><span class="c2">// 0100</span></li><li class="c6 c8"><span class="c0">&nbsp; WEST &nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c0">, </span><span class="c2">// 1000</span></li><li class="c6 c8"><span class="c5">}</span><span class="c0">&nbsp;ORIENTATION</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">ROW_NUM</span><span class="c5">][</span><span class="c0">COL_NUM</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Each index is a 4-bit int that stores the wall info of that particular grid. e.g. 1101</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;orientation </span><span class="c7">=</span><span class="c0">&nbsp;NORTH</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// The robot begins with facing north.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;cur_pos </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">19</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// The robot begins on grid #19.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;nex_pos</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// This variable stores the location that the robot is planning to move to.</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;visited_info</span><span class="c5">[</span><span class="c9">20</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Set to true if already visited</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;on_stack</span><span class="c5">[</span><span class="c9">20</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Set to true if is on schedule (pused to stack)</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c9">5</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c0">, &nbsp;</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c0">, </span><span class="c16">-</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c5">}</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// An array used for faster accesses to the four directions: prioritizes going North. &nbsp;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;delta_E</span><span class="c5">[</span><span class="c9">5</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c0">, </span><span class="c16">-</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c0">, &nbsp;</span><span class="c9">1</span><span class="c5">}</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// An array used for faster accesses to the four directions: prioritizes going East.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;delta_S</span><span class="c5">[</span><span class="c9">5</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c0">, </span><span class="c16">-</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c0">, &nbsp;</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c5">}</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// An array used for faster accesses to the four directions: prioritizes going South.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;delta_W</span><span class="c5">[</span><span class="c9">5</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c16">-</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c0">, &nbsp;</span><span class="c9">1</span><span class="c0">, &nbsp;</span><span class="c9">0</span><span class="c0">, </span><span class="c16">-</span><span class="c9">1</span><span class="c5">}</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// An array used for faster accesses to the four directions: prioritizes going West.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;stack</span><span class="c5">[</span><span class="c9">50</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// The stack that stores locations. Shouldn&#39;t be taller than 100 ints since there are only 20 grids.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;stack_ptr </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// A pointer that indexes the stack. The pointer points to the next empty slot.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;queue</span><span class="c5">[</span><span class="c9">30</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// The queue used for doing BFS in backtracking. Shouldn&#39;t be longer than 100 ints since there are only 20 grids.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;queue_ptr </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// A pointer that indexes the queue. The pointer points to the next empty slot, and will decrease if we pop the queue.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;step_cnt </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// A counter that counts how many steps have been used.</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;done </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// A flag that will be set to 1 once the robot finishes traversing the whole maze, and 0 otherwise.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;known_walls</span><span class="c5">[</span><span class="c9">20</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// An array that stores the information of our knowledge of the walls of each grid.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;FOUND_TREASURE </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// A flag that will be set high once the treasure is found.</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Given a position from 0 to 19, this function returns the x-coordinate,</span></li><li class="c6 c8"><span class="c2">// x ranges from 0 to 4.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;pos</span><span class="c16">/</span><span class="c9">4</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Given a position from 0 to 19, this function returns the y-coordinate.</span></li><li class="c6 c8"><span class="c2">// y ranges from 0 to 3.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;id</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;id</span><span class="c16">%</span><span class="c120">4</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Given an x value and a y value, this function returns its id, ranging [0,20).</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;get_id</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;x, </span><span class="c31">int</span><span class="c0">&nbsp;y</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c16">*</span><span class="c0">x </span><span class="c16">+</span><span class="c0">&nbsp;y</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;queue_push</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; queue</span><span class="c5">[</span><span class="c0">queue_ptr</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;pos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; queue_ptr</span><span class="c16">++</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Return true if the queue is empty. Only works on the queue defined globally as int queue[30].</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;queue_empty</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">queue_ptr </span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Return the front value of the queue.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;queue_front</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">queue_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c31">NULL</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;queue</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;queue_pop</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">queue_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;queue_ptr</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; queue</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;queue</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; queue_ptr</span><span class="c16">--</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;stack_push</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; stack</span><span class="c5">[</span><span class="c0">stack_ptr</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;pos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; on_stack</span><span class="c5">[</span><span class="c0">pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; stack_ptr</span><span class="c16">++</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Return true if the stack is empty. Only works on the stack defined globally as int stack[50].</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;stack_empty</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">stack_ptr </span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Return the value on top of the stack.</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;stack_top</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">stack_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c31">NULL</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;stack</span><span class="c5">[</span><span class="c0">stack_ptr</span><span class="c16">-</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;stack_pop</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">stack_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; stack_ptr</span><span class="c16">--</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Initialize each index of maze[ROW_NUM][COL_NUM] to be 15 = 1111 in bits.</span></li><li class="c6 c8"><span class="c2">// Set to 15 since we assume there are walls on all four directions at every block.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;initialize_maze</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;m </span><span class="c7">=</span><span class="c0">&nbsp;ROW_NUM</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;n </span><span class="c7">=</span><span class="c0">&nbsp;COL_NUM</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;m</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;j </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;j </span><span class="c7">&lt;</span><span class="c0">&nbsp;n</span><span class="c43">;</span><span class="c0">&nbsp;j</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; maze</span><span class="c5">[</span><span class="c0">i</span><span class="c5">][</span><span class="c0">j</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 1111</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Initialize each grid to be &quot;unvisited&quot;.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;initialize_visited_info</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">20</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// the length of this array is 20.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; visited_info</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Initialize the informations we know about the walls. Assume our maze is 5x4.</span></li><li class="c6 c8"><span class="c2">// e.g. known_walls[0] is set to 9 = 1001 since it&#39;s on the upper left corner, so we know the information</span></li><li class="c6 c8"><span class="c2">// about the walls on north and west. While 1001 corresponds to north and west.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;initialize_known_walls</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">9</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 1001</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0001</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">2</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0001</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">3</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0011</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">4</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 1000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">5</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">6</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">7</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0010</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">8</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 1000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">9</span><span class="c5">]</span><span class="c0">&nbsp; </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">10</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">11</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0010</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">12</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 1000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">13</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">14</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0000</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">15</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0010</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">16</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">12</span><span class="c43">;</span><span class="c2">// 1100</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">17</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0100</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">18</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0100</span></li><li class="c6 c8"><span class="c0">&nbsp; known_walls</span><span class="c5">[</span><span class="c9">19</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">6</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0110</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Round-shift a 4-bit wide int one bit to the left.</span></li><li class="c6 c8"><span class="c2">// Only works for inputs that are 4-bit wide!</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;my_shift_left</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;input</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;output </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">input </span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; output </span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">input </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;output</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Round-shift a 4-bit wide int one bit to the right.</span></li><li class="c6 c8"><span class="c2">// Only works for inputs that are 4-bit wide!</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;my_shift_right</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;input</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;output </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">input </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; output </span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">input </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;output</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Update maze[ROW_NUM][COL_NUM] with the wall sensors&#39; readings.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;update_maze</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;curr_wall_info</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;curr_int </span><span class="c7">=</span><span class="c0">&nbsp;curr_wall_info</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;NORTH</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Update this grid.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;curr_int</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Update the grid to the North.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">2</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">curr_int </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Update the grid to the West.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">1</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Update the grid to the East.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">3</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;EAST</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;my_shift_left</span><span class="c5">(</span><span class="c0">curr_int</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">2</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">0</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">3</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">curr_int </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;SOUTH</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;my_shift_left</span><span class="c5">(</span><span class="c0">my_shift_left</span><span class="c5">(</span><span class="c0">curr_int</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">0</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">curr_int </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">1</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">3</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;WEST</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;my_shift_right</span><span class="c5">(</span><span class="c0">curr_int</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">2</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">0</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">curr_int </span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">&nbsp;</span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c31">int</span><span class="c5">)(</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">1</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">curr_int </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Print the maze&#39;s wall information in an easy to read format.</span></li><li class="c6 c8"><span class="c2">// Helpful for testing wall sensing in conjunction with</span></li><li class="c6 c8"><span class="c2">// a mapping robot.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;printmaze</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;---------------------&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;j </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;j </span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c43">;</span><span class="c0">&nbsp;j</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; Serial.</span><span class="c26">print</span><span class="c5">(</span><span class="c0">maze</span><span class="c5">[</span><span class="c0">i</span><span class="c5">][</span><span class="c0">j</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; Serial.</span><span class="c26">println</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;---------------------&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Print the stack for the depth-first search algorithm in an</span></li><li class="c6 c8"><span class="c2">// easy to read format. Helpful for debugging mapping algorithm.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;print_stack</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">stack_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;stack is empty!&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;stack_ptr </span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">--</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;| &quot;</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;stack</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c62">&quot; |&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;|----|&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// This function is responsible for moving the robot from one intersection</span></li><li class="c6 c8"><span class="c2">// to the next intersection (determined by path_finding algorithm).</span></li><li class="c6 c8"><span class="c2">// Also send wall and treasure information over radio to the base-station.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;move_one</span><span class="c5">(</span><span class="c31">int</span><span class="c16">&amp;</span><span class="c0">&nbsp;from, </span><span class="c31">int</span><span class="c16">&amp;</span><span class="c0">&nbsp;to</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;from_x </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">from</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;from_y </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">from</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;to_x </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">to</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;to_y </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">to</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">from_y </span><span class="c7">==</span><span class="c0">&nbsp;to_y</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// moving vertically</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">to_x </span><span class="c7">==</span><span class="c0">&nbsp;from_x</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// two locations are the same, do not move</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;updateWalls</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">to_x </span><span class="c7">&gt;</span><span class="c0">&nbsp;from_x</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// move in positive direction (downwards)</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;NORTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">3</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;EAST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">2</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;SOUTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;WEST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; orientation </span><span class="c7">=</span><span class="c0">&nbsp;SOUTH</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// move in negative direction (upwards)</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;NORTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;EAST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;SOUTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">3</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;WEST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">2</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; orientation </span><span class="c7">=</span><span class="c0">&nbsp;NORTH</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// moving horizontally</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">to_y </span><span class="c7">&gt;</span><span class="c0">&nbsp;from_y</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// move in positive direction (rightwards)</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;NORTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">2</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;EAST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;SOUTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;WEST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">3</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; orientation </span><span class="c7">=</span><span class="c0">&nbsp;EAST</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// move in negative direction (leftwards)</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;NORTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;EAST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">3</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;SOUTH</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">2</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;WEST</span><span class="c5">)</span><span class="c0">&nbsp;curr_wall_info </span><span class="c7">=</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c9">1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; orientation </span><span class="c7">=</span><span class="c0">&nbsp;WEST</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; visited_info</span><span class="c5">[</span><span class="c0">from</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; visited_info</span><span class="c5">[</span><span class="c0">to</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; from </span><span class="c7">=</span><span class="c0">&nbsp;to</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// update the location</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c5">(</span><span class="c0">FOUND_TREASURE</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; treasure_freq </span><span class="c7">=</span><span class="c0">&nbsp;get_treasure_freq</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Need this before send_radio, b/c this function populates treasure variable</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; FOUND_TREASURE </span><span class="c7">=</span><span class="c0">&nbsp;treasure_freq</span><span class="c43">;</span><span class="c0 c40">&nbsp; </span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; update_maze</span><span class="c5">(</span><span class="c0">curr_wall_info</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// It is correct to call send_radio() inside move_one(), because move_one() will be responsible for driving the robot</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// to every intersections that it is going to visit, and we need to send a radio at every intersection too.</span></li><li class="c6 c8"><span class="c0">&nbsp; send_radio</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Function to send data</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;send_radio</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Radio values used for walls</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wallNorth </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wallSouth </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wallWest </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wallEast </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Ping out role</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">role </span><span class="c7">==</span><span class="c0">&nbsp;role_ping_out</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;attempt </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Format data</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; xPos </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; yPos </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; wallNorth </span><span class="c7">=</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">xPos</span><span class="c5">][</span><span class="c0">yPos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x01</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; wallSouth </span><span class="c7">=</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">xPos</span><span class="c5">][</span><span class="c0">yPos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x04</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; wallWest </span><span class="c7">=</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">xPos</span><span class="c5">][</span><span class="c0">yPos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x08</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; wallEast </span><span class="c7">=</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">xPos</span><span class="c5">][</span><span class="c0">yPos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x02</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Pack data bytes</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; info</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(((</span><span class="c0">xPos </span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0xF0</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">yPos </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x0F</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;wallNorth</span><span class="c5">)</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_NORTH_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;wallSouth</span><span class="c5">)</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_SOUTH_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;wallWest</span><span class="c5">)</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_WEST_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;wallEast</span><span class="c5">)</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_EAST_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">treasure</span><span class="c5">)</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">treasure </span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x70</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">finished</span><span class="c5">)</span><span class="c0">&nbsp;info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;FINISHED</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">while</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;attempt </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">//attempt to send two times</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// First, stop listening so we can talk.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; radio.</span><span class="c26">stopListening</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; Serial.</span><span class="c26">print</span><span class="c5">(</span><span class="c62">&quot;Now sending: &quot;</span><span class="c5">)</span><span class="c43">;</span><span class="c0">Serial.</span><span class="c26">print</span><span class="c5">(</span><span class="c0">info</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c0">, HEX</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;Serial.</span><span class="c26">print</span><span class="c5">(</span><span class="c62">&quot; &quot;</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c0">info</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">, HEX</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;ok </span><span class="c7">=</span><span class="c0">&nbsp;radio.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">info, </span><span class="c9">sizeof</span><span class="c5">(</span><span class="c0">info</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">ok</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;ok...&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">}</span><span class="c0">&nbsp;</span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; attempt</span><span class="c16">+</span><span class="c7">=</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">continue</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Now listen for ack</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; radio.</span><span class="c26">startListening</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Wait here until we get a response, or timeout (150ms)</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">unsigned</span><span class="c0">&nbsp;</span><span class="c31">long</span><span class="c0">&nbsp;started_waiting_at </span><span class="c7">=</span><span class="c0">&nbsp;millis</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;timeout </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">while</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">&nbsp;radio.</span><span class="c26">available</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">&nbsp;timeout </span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">millis</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;started_waiting_at </span><span class="c7">&gt;</span><span class="c0">&nbsp;</span><span class="c9">150</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; timeout </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Describe the results</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;timeout </span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// try for another attempt</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// printf(&quot;Failed, response timed out.\n\r&quot;);</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c5">}</span><span class="c0">&nbsp;</span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Succesful transmission</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">break</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Try again 0.5s later</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; attempt</span><span class="c16">+</span><span class="c7">=</span><span class="c9">1</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// try again.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;get_treasure_freq</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;treasure_freq </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Need this here, b/c need to give enough time at the intersection for the ISR to get called enough times</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c5">(</span><span class="c0">treas</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; treas </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;max_count </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;max_index </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;period2 </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; noInterrupts</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Disable interrupts</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; period2 </span><span class="c7">=</span><span class="c0">&nbsp;period</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp; &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Number of cycles for the signal to exceed the signals lowpassed signal&#39;s value gives the period of oscillation.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// The number of cycles for each of the cases (7 kHz, 9 kHz, 11 kHz, 13 kHz, 15 kHz, 17 kHz) was empirically determined.</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// We observed 5-25 cycles for frequency of 7 kHz. (Period is smaller than for others because there was actually</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// timer overflow). This never was a problem, because we were guaranteed that the frequencies would be one of 7,</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// 9, 11, 13, 15 and 17 kHz. &nbsp;We also tested extensively to see that the treasure sensing, based on our system, worked</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// very robustly. We could have used a larger pre-scaler, and thus not had any timer overflow, but this would have led</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// to less spacing in number of cycles between the different frequencies, and we didn&#39;t want to risk this because</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// it would make treasure sensing and classification way less reliable.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c5">(</span><span class="c0">period2 </span><span class="c7">&gt;</span><span class="c0">&nbsp;</span><span class="c9">5</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;period2 </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">25</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// 7 kHZ</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;KHZ_7</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c5">(</span><span class="c0">period2 </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">95</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;period2 </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">109</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// 17 kHz</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;KHZ_17</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c5">(</span><span class="c0">period2 </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">110</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;period2 </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">129</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// 15 kHz</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;KHZ_15</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c5">(</span><span class="c0">period2 </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">129</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;period2 </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">158</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// 13 kHz</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;KHZ_13</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c5">(</span><span class="c0">period2 </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">158</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;period2 </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">185</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// 11 kHz</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;KHZ_11</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">period2 </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">185</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;period2 </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">220</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// 9 kHz</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;KHZ_9</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// No treasure</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; interrupts</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// re-enable interrupts</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;treasure</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// check if the two grids are next to each other</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;is_next_to</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;a, </span><span class="c31">int</span><span class="c0">&nbsp;b</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c9">abs</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">a</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">b</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">a</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">==</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">b</span><span class="c5">)))</span><span class="c0">&nbsp;</span><span class="c16">||</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c9">abs</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">a</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">b</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">a</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">==</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">b</span><span class="c5">)))</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// check if the two grids are the same one</span></li><li class="c6 c8"><span class="c31">bool</span><span class="c0">&nbsp;is_the_same</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;a, </span><span class="c31">int</span><span class="c0">&nbsp;b</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">a </span><span class="c7">==</span><span class="c0">&nbsp;b</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// return nex_pos&#39;s direction with respect to cur_pos</span></li><li class="c6 c8"><span class="c2">// 1(0001) for NORTH, 2(0010) for EAST, 4(0100) for SOUTH, 8(1000) for WEST</span></li><li class="c6 c8"><span class="c2">// THE TWO POSITIONS MUST BE NEXT TO EACH OTHER</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;find_direction</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;nex_pos, </span><span class="c31">int</span><span class="c0">&nbsp;cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">nex_pos</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// To the south.</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&gt;</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">nex_pos</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// To the north.</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">nex_pos</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// To the east.</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// To the west.</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// A function that helps determining the wall info bit we should be looking at from maze[ROW_NUM][COL_NUM]</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;map</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i, </span><span class="c31">int</span><span class="c0">&nbsp;orientation</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;j </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;j </span><span class="c7">&lt;=</span><span class="c0">&nbsp;i</span><span class="c43">;</span><span class="c0">&nbsp;j</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; orientation </span><span class="c7">=</span><span class="c0">&nbsp;my_shift_left</span><span class="c5">(</span><span class="c0">orientation</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;</span><span class="c9">log</span><span class="c5">(</span><span class="c0">orientation</span><span class="c5">)</span><span class="c16">/</span><span class="c9">log</span><span class="c5">(</span><span class="c9">2</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// This function backtracks the robot once the DFS runs into a dead-end and need to return to a previous location by calling a series of move_one().</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;backtrack</span><span class="c5">(</span><span class="c31">int</span><span class="c16">&amp;</span><span class="c0">&nbsp;from, </span><span class="c31">int</span><span class="c16">&amp;</span><span class="c0">&nbsp;to</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;backtrack_label</span><span class="c5">[</span><span class="c0">ROW_NUM</span><span class="c5">][</span><span class="c0">COL_NUM</span><span class="c5">]</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// each index is the distance to the target grid (to), INF if can&#39;t reach</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;backtrack_visited</span><span class="c5">[</span><span class="c9">20</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;to_x </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">to</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;to_y </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">to</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;dist </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">20</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;backtrack_visited</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;j </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;j </span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c43">;</span><span class="c0">&nbsp;j</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; backtrack_label</span><span class="c5">[</span><span class="c0">i</span><span class="c5">][</span><span class="c0">j</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;INFINITY</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; backtrack_label</span><span class="c5">[</span><span class="c0">to_x</span><span class="c5">][</span><span class="c0">to_y</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// need 0 steps to visit &quot;to&quot; from &quot;to&quot;.</span></li><li class="c6 c8"><span class="c0">&nbsp; backtrack_visited</span><span class="c5">[</span><span class="c0">to</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; queue_push</span><span class="c5">(</span><span class="c0">to</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">while</span><span class="c5">(</span><span class="c16">!</span><span class="c0">queue_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;targ </span><span class="c7">=</span><span class="c0">&nbsp;queue_front</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; queue_pop</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;targ_x </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">targ</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;targ_y </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">targ</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;neigh_x </span><span class="c7">=</span><span class="c0">&nbsp;targ_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;neigh_y </span><span class="c7">=</span><span class="c0">&nbsp;targ_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;neigh </span><span class="c7">=</span><span class="c0">&nbsp;get_id</span><span class="c5">(</span><span class="c0">neigh_x, neigh_y</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c5">((</span><span class="c0">maze</span><span class="c5">[</span><span class="c0">targ_x</span><span class="c5">][</span><span class="c0">targ_y</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;map</span><span class="c5">(</span><span class="c0">i, NORTH</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">backtrack_visited</span><span class="c5">[</span><span class="c0">neigh</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; queue_push</span><span class="c5">(</span><span class="c0">neigh</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; backtrack_visited</span><span class="c5">[</span><span class="c0">neigh</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; backtrack_label</span><span class="c5">[</span><span class="c0">neigh_x</span><span class="c5">][</span><span class="c0">neigh_y</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;backtrack_label</span><span class="c5">[</span><span class="c0">targ_x</span><span class="c5">][</span><span class="c0">targ_y</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">+</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// +1 steps for the neighbors.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Now finished calculating backtrack_label[][], start moving the robot by calling a series of move_one().</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">while</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">from </span><span class="c16">!</span><span class="c7">=</span><span class="c0">&nbsp;to</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;next_x</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;next_y</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;next_to_go</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;from_x </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">from</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;from_y </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">from</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;dist_to_targ </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">30</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; next_x </span><span class="c7">=</span><span class="c0">&nbsp;from_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; next_y </span><span class="c7">=</span><span class="c0">&nbsp;from_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;inbound </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">next_x </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">next_y </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">next_x </span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">next_y </span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;no_wall </span><span class="c7">=</span><span class="c0">&nbsp;inbound </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c5">(</span><span class="c0">find_direction</span><span class="c5">(</span><span class="c0">get_id</span><span class="c5">(</span><span class="c0">next_x, next_y</span><span class="c5">)</span><span class="c0">, from</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">from_x</span><span class="c5">][</span><span class="c0">from_y</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;inbound </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;no_wall </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">backtrack_label</span><span class="c5">[</span><span class="c0">next_x</span><span class="c5">][</span><span class="c0">next_y</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;dist_to_targ</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; dist_to_targ </span><span class="c7">=</span><span class="c0">&nbsp;backtrack_label</span><span class="c5">[</span><span class="c0">next_x</span><span class="c5">][</span><span class="c0">next_y</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Choose one out of the four directions that have the minimal backtrack_labeling.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; next_to_go </span><span class="c7">=</span><span class="c0">&nbsp;get_id</span><span class="c5">(</span><span class="c0">next_x, next_y</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">dist_to_targ </span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">30</span><span class="c5">))</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">break</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; move_one</span><span class="c5">(</span><span class="c0">from, next_to_go</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// The master function that let the robot traverse the maze.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;traverse</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; stack_push</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// The backbone of this algorithm is a DFS.</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">while</span><span class="c5">(</span><span class="c16">!</span><span class="c0">stack_empty</span><span class="c5">())</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; nex_pos </span><span class="c7">=</span><span class="c0">&nbsp;stack_top</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; stack_pop</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Do not go to nex_pos if the following two conditions are true:</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// 1, have been visited before; 2, the treasure has been found and there is no need to go there since no new info about the walls will be revealed.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;visited_info</span><span class="c5">[</span><span class="c0">nex_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">||</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">known_walls</span><span class="c5">[</span><span class="c0">nex_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">==</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;FOUND_TREASURE</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Otherwise go there.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;next_to_and_no_wall </span><span class="c7">=</span><span class="c0">&nbsp;is_next_to</span><span class="c5">(</span><span class="c0">nex_pos, cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c5">(</span><span class="c0">find_direction</span><span class="c5">(</span><span class="c0">nex_pos, cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Still &quot;growing the DFS tree&quot;, so one steps will be made by calling move_one.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;is_the_same</span><span class="c5">(</span><span class="c0">nex_pos, cur_pos</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">||</span><span class="c0">&nbsp;next_to_and_no_wall </span><span class="c5">)</span><span class="c0">&nbsp;move_one</span><span class="c5">(</span><span class="c0">cur_pos, nex_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// nex_pos turns out to be something far away from the cur_pos, meaning that the robot enters a deadend, so need to backtrack.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;backtrack</span><span class="c5">(</span><span class="c0">cur_pos, nex_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Update known_walls at cur_pos to be 15, since we know whether there are walls or not at all four directions at the current position for sure.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; known_walls</span><span class="c5">[</span><span class="c0">cur_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;cur_pos_x </span><span class="c7">=</span><span class="c0">&nbsp;getx</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;cur_pos_y </span><span class="c7">=</span><span class="c0">&nbsp;gety</span><span class="c5">(</span><span class="c0">cur_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Initialize shortcut to be infinity, since there are chances that there are no &quot;shortcut&quot; from the cur_pos.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// The idea of shortcut will be discussed later.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;shortcut </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c5">)</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">31</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Look around at all 4 directions.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;new_pos_x</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;new_pos_y</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;prior_orien</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// If we have found the treasure, prioritizes going straight.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">FOUND_TREASURE</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prior_orien </span><span class="c7">=</span><span class="c0">&nbsp;orientation</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;NORTH</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_x </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_y </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_N</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;EAST</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_x </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_E</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_y </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_E</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;SOUTH</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_x </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_S</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_y </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_S</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">orientation </span><span class="c7">==</span><span class="c0">&nbsp;WEST</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_x </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_W</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_y </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_W</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Otherwise, stick to one priority - going East.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prior_orien </span><span class="c7">=</span><span class="c0">&nbsp;EAST</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_x </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_x </span><span class="c16">+</span><span class="c0">&nbsp;delta_E</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_pos_y </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos_y </span><span class="c16">+</span><span class="c0">&nbsp;delta_E</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;new_pos </span><span class="c7">=</span><span class="c0">&nbsp;get_id</span><span class="c5">(</span><span class="c0">new_pos_x, new_pos_y</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Check if new_pos is inbound of the maze.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;inbound </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">new_pos_x </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">new_pos_y </span><span class="c7">&gt;=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">new_pos_x </span><span class="c7">&lt;</span><span class="c0">&nbsp;ROW_NUM</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">new_pos_y </span><span class="c7">&lt;</span><span class="c0">&nbsp;COL_NUM</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Check if there are no walls to go to new_pos.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;no_wall </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c5">((</span><span class="c0">&nbsp;maze</span><span class="c5">[</span><span class="c0">cur_pos_x</span><span class="c5">][</span><span class="c0">cur_pos_y</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;map</span><span class="c5">(</span><span class="c0">i, prior_orien</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Check if we can&#39;t skip this block.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Remember, we can skip a block if the two conditions on top of this function hold.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;cant_skip </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">known_walls</span><span class="c5">[</span><span class="c0">new_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">||</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">FOUND_TREASURE</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Update the known_walls info for this new_pos if it&#39;s inbound.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;inbound </span><span class="c5">)</span><span class="c0">&nbsp;known_walls</span><span class="c5">[</span><span class="c0">new_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;find_direction</span><span class="c5">(</span><span class="c0">cur_pos, new_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Declare as a shortcut if we have pushed it onto our stack before.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;inbound </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;no_wall </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;on_stack</span><span class="c5">[</span><span class="c0">new_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">visited_info</span><span class="c5">[</span><span class="c0">new_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;cant_skip </span><span class="c5">)</span><span class="c0">&nbsp;shortcut </span><span class="c7">=</span><span class="c0">&nbsp;new_pos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Regular pushes.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;inbound </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;no_wall </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">on_stack</span><span class="c5">[</span><span class="c0">new_pos</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;cant_skip </span><span class="c5">)</span><span class="c0">&nbsp;stack_push</span><span class="c5">(</span><span class="c0">new_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Push the shortcut after the regular pushes, so that it sits on top of the stack.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">shortcut </span><span class="c16">!</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c5">)</span><span class="c9">pow</span><span class="c5">(</span><span class="c9">2</span><span class="c0">,</span><span class="c9">31</span><span class="c5">))</span><span class="c0">&nbsp;stack_push</span><span class="c5">(</span><span class="c0">shortcut</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// A bunch of Initializations.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;initialize</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; initialize_maze</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; initialize_visited_info</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; initialize_known_walls</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c62 c77">/**</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* function move() is called from the navigation code after an intersection</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* has been reached and the decision of what direction to go has been made</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* takes in a direction to move one block and</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* a pointer to the array that stores wall sensor values (this probably doesn&#39;t need to be an argument, could be global)</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* wall sensor values are modified when the robot reaches the proscribed intersection</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;direction: 0 if left, 1 if forward, 2 if right, 3 if 180</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;**/</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;move</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;direction</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//turn if requested</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">direction </span><span class="c16">!</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Start turning until off the current line</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; left_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">servo_turn_value</span><span class="c5">[</span><span class="c0">direction</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; right_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">servo_turn_value</span><span class="c5">[</span><span class="c0">direction</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c0">servo_turn_delays</span><span class="c5">[</span><span class="c0">direction</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;</span><span class="c2">// Read values from center line sensors</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; right_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">right_pid</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; left_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">left_pid</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// While center sensors are not over another line, continue turning</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">while</span><span class="c5">((</span><span class="c0">right_pid_val</span><span class="c7">&lt;</span><span class="c9">900</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">||</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">left_pid_val</span><span class="c7">&lt;</span><span class="c9">900</span><span class="c3">)){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; right_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">right_pid</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; left_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">left_pid</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Reset intersection variables &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; right_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; left_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; counter </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">50</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp; &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// After turn is complete, drive forward to the next intersection, making corrections as necessary</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// while-loop is all of line following</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">while</span><span class="c5">(</span><span class="c0">right_turn_val</span><span class="c7">&lt;</span><span class="c9">700</span><span class="c0">&nbsp;</span><span class="c16">||</span><span class="c0">&nbsp;left_turn_val</span><span class="c7">&lt;</span><span class="c9">700</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Don&#39;t start searching for an intersection until the intersection sensors are clear of the tape line</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">counter</span><span class="c7">&gt;</span><span class="c9">0</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; right_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">//set so that while loop continues</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; left_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">//set so that while loop continues</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; counter </span><span class="c7">=</span><span class="c0">&nbsp;counter </span><span class="c16">-</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; right_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">right_turn</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">//signal from center right sensor</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; left_turn_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">left_turn</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">//signal from center left sensor &nbsp;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Read analog values from two center sensors</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; right_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">right_pid</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// signal from center right sensor</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; left_pid_val </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">left_pid</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// signal from center left sensor &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">////Serial.println(right_pid_val);</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">////Serial.println(left_pid_val); &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">////Serial.println(); &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; error </span><span class="c7">=</span><span class="c0">&nbsp;left_pid_val </span><span class="c16">-</span><span class="c0">&nbsp;right_pid_val</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Positive position to right of line</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c9">abs</span><span class="c5">(</span><span class="c0">error</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&lt;=</span><span class="c0">&nbsp;ERROR_RANGE</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; left_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_L_FORWARD_MAX</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; right_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_R_FORWARD_MAX</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Too right</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">error </span><span class="c7">&gt;</span><span class="c0">&nbsp;ERROR_RANGE</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Adjust left</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; error_magnitude </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">abs</span><span class="c5">(</span><span class="c0">error</span><span class="c5">)</span><span class="c16">/</span><span class="c5">(</span><span class="c31">float</span><span class="c5">)</span><span class="c0">ERROR_RANGE</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; left_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_L_FORWARD_MAX </span><span class="c16">-</span><span class="c0">&nbsp;error_magnitude</span><span class="c16">*</span><span class="c0">SERVO_L_INCR_FORWARD</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; right_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_R_FORWARD_MAX </span><span class="c16">+</span><span class="c0">&nbsp;error_magnitude</span><span class="c16">*</span><span class="c0">SERVO_R_INCR_FORWARD</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Too left</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">error </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c16">-</span><span class="c0">ERROR_RANGE</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Adjust right</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; error_magnitude </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">abs</span><span class="c5">(</span><span class="c0">error</span><span class="c5">)</span><span class="c16">/</span><span class="c5">(</span><span class="c31">float</span><span class="c5">)</span><span class="c0">ERROR_RANGE</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; left_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_L_FORWARD_MAX </span><span class="c16">+</span><span class="c0">&nbsp;error_magnitude</span><span class="c16">*</span><span class="c0">SERVO_L_INCR_FORWARD</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; right_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_R_FORWARD_MAX </span><span class="c16">-</span><span class="c0">&nbsp;error_magnitude</span><span class="c16">*</span><span class="c0">SERVO_R_INCR_FORWARD</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; left_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_BRAKE</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; right_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_BRAKE</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;w </span><span class="c7">=</span><span class="c0">&nbsp;updateWalls</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">////Serial.println(&quot;walls: &quot; + w);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;w</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">//Update wall information</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;updateWalls</span><span class="c3">(){</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;walls</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; walls </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// 0100: there is a wall in the back</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Loop through all three wall sensors</span></li><li class="c6 c8"><span class="c0">&nbsp; rightWallVal </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">rightWall</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; leftWallVal </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">leftWall</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; frontWallVal </span><span class="c7">=</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">frontWall</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c5">(</span><span class="c0">rightWallVal </span><span class="c7">&gt;</span><span class="c0">&nbsp;RIGHT_WALL_SENSOR_THRESHOLD</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; walls </span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_RIGHT_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c5">(</span><span class="c0">leftWallVal </span><span class="c7">&gt;</span><span class="c0">&nbsp;LEFT_WALL_SENSOR_THRESHOLD</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; walls </span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_LEFT_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c5">(</span><span class="c0">frontWallVal </span><span class="c7">&gt;</span><span class="c0">&nbsp;FRONT_WALL_SENSOR_THRESHOLD</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; walls </span><span class="c16">|</span><span class="c7">=</span><span class="c0">&nbsp;WALL_FRONT_2</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.print(&quot;cur_pos is &quot;);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.println(cur_pos); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.print(&quot;is there a wall on the right? &quot;);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.println((walls &amp; 8) &gt;&gt; 3);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.print(&quot;rightWallVal is &quot;);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.println(rightWallVal);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.print(&quot;leftWallVal is &quot;);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.println(leftWallVal);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.print(&quot;threshold value is &quot;);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//Serial.println(WALL_SENSOR_THRESHOLD);</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">return</span><span class="c0">&nbsp;walls</span><span class="c43">;</span><span class="c0 c40">&nbsp; </span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;setDirection</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;wallData</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">wallData</span><span class="c16">&amp;</span><span class="c52">001</span><span class="c7">==</span><span class="c9">1</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; direction </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">else</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; direction </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c62 c77">/*</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* Read analog value from mux</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;* Returns int</span></li><li class="c6 c8"><span class="c62 c77">&nbsp;*/</span></li><li class="c6 c8"><span class="c31">int</span><span class="c0">&nbsp;muxRead</span><span class="c5">(</span><span class="c0">byte pin</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; selectMuxPin</span><span class="c5">(</span><span class="c0">pin</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; analogRead</span><span class="c5">(</span><span class="c0">zInput</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// The selectMuxPin function sets the S0, S1, and S2 pins</span></li><li class="c6 c8"><span class="c2">// accordingly, given a pin from 0-7.</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;selectMuxPin</span><span class="c5">(</span><span class="c0">byte pin</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i</span><span class="c7">=</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c7">&lt;</span><span class="c9">3</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c3">){</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">pin </span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c9">1</span><span class="c7">&lt;&lt;</span><span class="c0">i</span><span class="c3">))</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">selectPins</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">, HIGH</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31 c40">else</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">selectPins</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">, LOW</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c2">// Turn on LED when robot has finished mapping maze</span></li><li class="c6 c8"><span class="c2">//void onLED(){</span></li><li class="c6 c8"><span class="c2">// &nbsp;digitalWrite(ledIndicator,HIGH);</span></li><li class="c6 c8"><span class="c2">//}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;setup</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Begin Serial monitor</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; Serial.</span><span class="c26">begin</span><span class="c5">(</span><span class="c9">9600</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Was originally used for testing with treasure circuit, no longer used</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;</span><span class="c2">// Setting up timer 2 for treasure detection</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;ACSR </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c9">1</span><span class="c7">&lt;&lt;</span><span class="c0">ACIE</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c9">1</span><span class="c7">&lt;&lt;</span><span class="c0">ACIS1</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c9">1</span><span class="c7">&lt;&lt;</span><span class="c0">ACIS0</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;TCCR2B </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// running with clock divided by 8</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;</span><span class="c2">//TCCR2B = 3; // running with clock divided by 16</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;TCCR2A</span><span class="c7">=</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// All other functions disabled</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;TCCR2A </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Turn off other timer2 functions</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;TCNT2 </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Initialize the counter</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;pinMode </span><span class="c5">(</span><span class="c0">treasure_detection_pin, INPUT</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp;pinMode</span><span class="c5">(</span><span class="c0">avg_val_pin, INPUT</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Connect servos</span></li><li class="c6 c8"><span class="c0">&nbsp; right_servo.</span><span class="c26">attach</span><span class="c5">(</span><span class="c9">3</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; left_servo.</span><span class="c26">attach</span><span class="c5">(</span><span class="c9">5</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Brake servos</span></li><li class="c6 c8"><span class="c0">&nbsp; right_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_BRAKE</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; left_servo.</span><span class="c26">write</span><span class="c5">(</span><span class="c0">SERVO_BRAKE</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Set up the select pins as outputs:</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i</span><span class="c7">=</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c7">&lt;</span><span class="c9">3</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c3">)</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; pinMode</span><span class="c5">(</span><span class="c0">selectPins</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">, OUTPUT</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">selectPins</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">, HIGH</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; pinMode</span><span class="c5">(</span><span class="c0">zInput, INPUT</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// Set up Z (muxout) as an input</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Radio Initialization</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Setup and configure rf radio</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">begin</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// set delay between retries &amp; # of retries</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">setRetries</span><span class="c5">(</span><span class="c9">10</span><span class="c0">,</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">setAutoAck</span><span class="c5">(</span><span class="c31">true</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// set the channel &nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">setChannel</span><span class="c5">(</span><span class="c52">0x50</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// set the power</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// RF24_PA_MIN=-18dBm, RF24_PA_LOW=-12dBm, RF24_PA_MED=-6dBM, and RF24_PA_HIGH=0dBm.</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">setPALevel</span><span class="c5">(</span><span class="c0">RF24_PA_MAX</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//RF24_250KBPS for 250kbs, RF24_1MBPS for 1Mbps, or RF24_2MBPS for 2Mbps</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">setDataRate</span><span class="c5">(</span><span class="c0">RF24_2MBPS</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">//radio.setCRCLength(RF24_CRC_8);</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Open &#39;our&#39; pipe for writing</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Open the &#39;other&#39; pipe for reading, in position #1</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;role </span><span class="c7">==</span><span class="c0">&nbsp;role_ping_out </span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openWritingPipe</span><span class="c5">(</span><span class="c0">pipes</span><span class="c5">[</span><span class="c9">0</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openReadingPipe</span><span class="c5">(</span><span class="c9">1</span><span class="c0">,pipes</span><span class="c5">[</span><span class="c9">1</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c5">}</span><span class="c0">&nbsp;</span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openWritingPipe</span><span class="c5">(</span><span class="c0">pipes</span><span class="c5">[</span><span class="c9">1</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openReadingPipe</span><span class="c5">(</span><span class="c9">1</span><span class="c0">,pipes</span><span class="c5">[</span><span class="c9">0</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; radio.</span><span class="c26">startListening</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Wait at start for 1 second</span></li><li class="c6 c8"><span class="c0">&nbsp; delay</span><span class="c5">(</span><span class="c9">1000</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c3">}</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c31">void</span><span class="c0">&nbsp;loop</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// If robot has finished mapping the maze, busy wait b/c there&#39;s nothing to do</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">while</span><span class="c5">(</span><span class="c0">done</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Initialize the robot</span></li><li class="c6 c8"><span class="c0">&nbsp; initialize</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; manualOverride </span><span class="c7">=</span><span class="c0">&nbsp; </span><span class="c5">(</span><span class="c0">analogRead</span><span class="c5">(</span><span class="c0">overridePin</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&gt;</span><span class="c0">&nbsp;</span><span class="c9">500</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">while</span><span class="c5">(</span><span class="c16">!</span><span class="c0">whistle </span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">manualOverride</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// reduces jitter</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c0">&nbsp;</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;FFT_N</span><span class="c16">*</span><span class="c9">2</span><span class="c0">&nbsp;</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c16">+</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">2</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c2">// save 256 samples</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;k </span><span class="c7">=</span><span class="c0">&nbsp;analogRead</span><span class="c5">(</span><span class="c0">A1</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; fft_input</span><span class="c5">[</span><span class="c0">i</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;k</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// put real data into even bins</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; fft_input</span><span class="c5">[</span><span class="c0">i</span><span class="c16">+</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// set odd bins to 0</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; fft_window</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// window the data for better frequency response</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; fft_reorder</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// reorder the data before doing the fft</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; fft_run</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// process the data in the fft</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; fft_mag_log</span><span class="c5">()</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// take the output of the fft</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;Start&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Whistle is on if FFT_TRIGGER consecutive peaks detected</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">fft_counter </span><span class="c7">&gt;</span><span class="c0">&nbsp;FFT_TRIGGER</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; Serial.</span><span class="c26">println</span><span class="c5">(</span><span class="c62">&quot;On&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; whistle </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">true</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c5">}</span><span class="c0">&nbsp;</span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// check bin 10 of FFT to see if peak is above threshold</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">fft_log_out</span><span class="c5">[</span><span class="c0">10</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">&gt;</span><span class="c0">&nbsp;threshold</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; fft_counter</span><span class="c16">+</span><span class="c7">=</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; fft_counter</span><span class="c7">=</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c9">50</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; manualOverride </span><span class="c7">=</span><span class="c0">&nbsp; </span><span class="c5">(</span><span class="c0">analogRead</span><span class="c5">(</span><span class="c0">overridePin</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c7">&gt;</span><span class="c0">&nbsp;</span><span class="c9">500</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Either the whistle or the manual override signal has been received, now start traversing the maze.</span></li><li class="c6 c8"><span class="c0">&nbsp; traverse</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Light up external LED to indicate that maze has been mapped</span></li><li class="c6 c8"><span class="c0">&nbsp; pinMode</span><span class="c5">(</span><span class="c0">ledIndicator, OUTPUT</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">ledIndicator, HIGH</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; done </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;real_cur_pos </span><span class="c7">=</span><span class="c0">&nbsp;cur_pos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Iterate through all 20 blocks once agin.</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c31">for</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c43">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c9">20</span><span class="c43">;</span><span class="c0">&nbsp;i</span><span class="c16">++</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// Look for the blocks that are unvisited but visitable.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// These are the blocks that the robot skipped.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">maze</span><span class="c5">[</span><span class="c0">getx</span><span class="c5">(</span><span class="c0">i</span><span class="c5">)][</span><span class="c0">gety</span><span class="c5">(</span><span class="c0">i</span><span class="c5">)]</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">15</span><span class="c0">&nbsp;</span><span class="c16">&amp;&amp;</span><span class="c0">&nbsp;</span><span class="c16">!</span><span class="c0">visited_info</span><span class="c5">[</span><span class="c0">i</span><span class="c5">])</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Need to send a &quot;fake&quot; radio signal to ask the base station to fill out these skipped blocks.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; cur_pos </span><span class="c7">=</span><span class="c0">&nbsp;i</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Setting these delays so that two consecutive radio signals would not overlap with each other.</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; send_radio</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c9">100</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c8"><span class="c0">&nbsp; cur_pos </span><span class="c7">=</span><span class="c0">&nbsp;real_cur_pos</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0 c40">&nbsp;</span></li><li class="c6 c8"><span class="c0">&nbsp; finished </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c21">;</span></li><li class="c6 c8"><span class="c0">&nbsp; </span><span class="c2">// Send a radio signal one last time to tell the base station that the robot is done.</span></li><li class="c6 c8"><span class="c0">&nbsp; send_radio</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c8"><span class="c113">}</span></li></ol></td></tr></tbody></table><h2 class="c36" id="h.1q9f7fwtlt9q"><span class="c40 c67 c56">8.2 Base Station Arduino Code</span></h2><a id="t.9ffac59e9ecd23099960e2b77a886acf85b999f6"></a><a id="t.14"></a><table class="c85"><tbody><tr class="c48"><td class="c96" colspan="1" rowspan="1"><ol class="c44 lst-kix_copbltb02th5-0 start" start="1"><li class="c6 c12"><span class="c62 c77">/*</span></li><li class="c6 c12"><span class="c62 c77">&nbsp; ECE 3400 Team 3 Arduino to FPGA SPI Transfer</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c62 c77">&nbsp;The circuit:</span></li><li class="c6 c12"><span class="c62 c77">&nbsp; * CS Radio - to digital pin 10 &nbsp;(SS pin)</span></li><li class="c6 c12"><span class="c62 c77">&nbsp; * CS FPGA - to digital pin 4 &nbsp;(SS pin)</span></li><li class="c6 c12"><span class="c62 c77">&nbsp; * SDI - to digital pin 11 (MOSI pin)</span></li><li class="c6 c12"><span class="c62 c77">&nbsp; * CLK - to digital pin 13 (SCK pin)</span></li><li class="c6 c12"><span class="c62 c77">*/</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c58 c40">#include &lt;SPI.h&gt;</span></li><li class="c6 c12"><span class="c58 c40">#include &quot;nRF24L01.h&quot;</span></li><li class="c6 c12"><span class="c58 c40">#include &quot;RF24.h&quot;</span></li><li class="c6 c12"><span class="c58 c40">#include &quot;printf.h&quot;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// set pin 4 as the slave select for the FPGA SPI channel:</span></li><li class="c6 c12"><span class="c2">// The radio defaults to using pin 10 for slave select</span></li><li class="c6 c12"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;fpga_SS </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">int</span><span class="c0">&nbsp;radio_SS </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">10</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// Constants to help with reading data from bytes</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;WALL_UP 1</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;WALL_DOWN 2</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;WALL_LEFT 4</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;WALL_RIGHT 8</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;NO_TREASURE 0</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;KHZ_7 1</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;KHZ_9 2</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;KHZ_11 3</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;KHZ_13 4</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;KHZ_15 5</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;KHZ_17 6</span></li><li class="c6 c12"><span class="c58 c40">#define &nbsp;FINISHED 128</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// Global variables</span></li><li class="c6 c12"><span class="c31">uint8_t</span><span class="c0">&nbsp;treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">bool</span><span class="c0">&nbsp;finished </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">uint8_t</span><span class="c0">&nbsp;rxInfo</span><span class="c5">[</span><span class="c9">2</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c5">{</span><span class="c9">0</span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">uint8_t</span><span class="c0">&nbsp;real_x</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">uint8_t</span><span class="c0">&nbsp;real_y</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">uint8_t</span><span class="c0">&nbsp;real_pos</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">uint16_t</span><span class="c0">&nbsp;current_data</span><span class="c21">;</span></li><li class="c6 c12"><span class="c31">uint16_t</span><span class="c0">&nbsp;prev_data</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// Set up nRF24L01 radio on SPI bus plus pins 9 &amp; 10</span></li><li class="c6 c12"><span class="c0">RF24 radio</span><span class="c5">(</span><span class="c9">9</span><span class="c0">,</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// Radio pipe addresses for the 2 nodes to communicate.</span></li><li class="c6 c12"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">uint64_t</span><span class="c0">&nbsp;pipes</span><span class="c5">[</span><span class="c9">2</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;0x000000000CLL, 0x000000000DLL </span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// Role management</span></li><li class="c6 c12"><span class="c2">// The various roles supported by this sketch</span></li><li class="c6 c12"><span class="c31">typedef</span><span class="c0">&nbsp;</span><span class="c31">enum</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;role_ping_out </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">1</span><span class="c0">, role_pong_back </span><span class="c5">}</span><span class="c0">&nbsp;role_e</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// The debug-friendly names of those roles</span></li><li class="c6 c12"><span class="c31">const</span><span class="c0">&nbsp;</span><span class="c31">char</span><span class="c16">*</span><span class="c0">&nbsp;role_friendly_name</span><span class="c5">[]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">{</span><span class="c0">&nbsp;</span><span class="c62">&quot;invalid&quot;</span><span class="c0">, </span><span class="c62">&quot;Ping out&quot;</span><span class="c0">, </span><span class="c62">&quot;Pong back&quot;</span><span class="c5">}</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// The role of the current running sketch</span></li><li class="c6 c12"><span class="c0">role_e role </span><span class="c7">=</span><span class="c0">&nbsp;role_pong_back</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c31">void</span><span class="c0">&nbsp;setup</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; Serial.</span><span class="c26">begin</span><span class="c5">(</span><span class="c9">9600</span><span class="c5">)</span><span class="c43">;</span><span class="c0">&nbsp;</span><span class="c2">// for printing debug information to the serial console</span></li><li class="c6 c12"><span class="c0">&nbsp; printf_begin</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// set the CS pins as outputs and init as high (inactive)</span></li><li class="c6 c12"><span class="c0">&nbsp; pinMode</span><span class="c5">(</span><span class="c0">fpga_SS, OUTPUT</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; pinMode</span><span class="c5">(</span><span class="c0">radio_SS, OUTPUT</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">fpga_SS, HIGH</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">radio_SS, HIGH</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// initialize SPI:</span></li><li class="c6 c12"><span class="c0">&nbsp; SPI.</span><span class="c26">begin</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Setup and configure rf radio</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">begin</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// set the delay between retries &amp; # of retries</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">setRetries</span><span class="c5">(</span><span class="c9">15</span><span class="c0">,</span><span class="c9">15</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">setAutoAck</span><span class="c5">(</span><span class="c31">true</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// set the channel</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">setChannel</span><span class="c5">(</span><span class="c52">0x50</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// set the power</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// RF24_PA_MIN=-18dBm, RF24_PA_LOW=-12dBm, RF24_PA_MED=-6dBM, and RF24_PA_HIGH=0dBm.</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">setPALevel</span><span class="c5">(</span><span class="c0">RF24_PA_MAX</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">//RF24_250KBPS for 250kbs, RF24_1MBPS for 1Mbps, or RF24_2MBPS for 2Mbps</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">setDataRate</span><span class="c5">(</span><span class="c0">RF24_2MBPS</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Open &#39;our&#39; pipe for writing</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Open the &#39;other&#39; pipe for reading, in position #1 (we can have up to 5 pipes open for reading)</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;role </span><span class="c7">==</span><span class="c0">&nbsp;role_ping_out </span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openWritingPipe</span><span class="c5">(</span><span class="c0">pipes</span><span class="c5">[</span><span class="c9">0</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openReadingPipe</span><span class="c5">(</span><span class="c9">1</span><span class="c0">,pipes</span><span class="c5">[</span><span class="c9">1</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c5">}</span><span class="c0">&nbsp;</span><span class="c31">else</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openWritingPipe</span><span class="c5">(</span><span class="c0">pipes</span><span class="c5">[</span><span class="c9">1</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; radio.</span><span class="c26">openReadingPipe</span><span class="c5">(</span><span class="c9">1</span><span class="c0">,pipes</span><span class="c5">[</span><span class="c9">0</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c12"><span class="c0">&nbsp; radio.</span><span class="c26">startListening</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Dump the configuration of the rf unit for debugging</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// radio.printDetails();</span></li><li class="c6 c12"><span class="c3">}</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c2">// Used to send data over SPI to the FPGA</span></li><li class="c6 c12"><span class="c31">void</span><span class="c0">&nbsp;digitalFPGAWrite</span><span class="c5">(</span><span class="c31">int</span><span class="c0">&nbsp;value</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Set the FPGA SS pin low to select the chip:</span></li><li class="c6 c12"><span class="c0">&nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">fpga_SS, LOW</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Transfers the value out MOSI</span></li><li class="c6 c12"><span class="c0">&nbsp; SPI.</span><span class="c26">transfer16</span><span class="c5">(</span><span class="c0">value</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Set the FPGA SS pin high to de-select the chip:</span></li><li class="c6 c12"><span class="c0">&nbsp; digitalWrite</span><span class="c5">(</span><span class="c0">fpga_SS, HIGH</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c3">}</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c31">void</span><span class="c0">&nbsp;loop</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;curr_x </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;curr_y </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wall_left </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wall_right </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wall_up </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;wall_down </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">int</span><span class="c0">&nbsp;j </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">0</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c2">// Pong back role--Receive each packet</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;role </span><span class="c7">==</span><span class="c0">&nbsp;role_pong_back </span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; </span><span class="c2">// if there is data ready</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">&nbsp;radio.</span><span class="c26">available</span><span class="c5">()</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Dump the payloads until we&#39;ve gotten everything</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">bool</span><span class="c0">&nbsp;done </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c31">false</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">while</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c16">!</span><span class="c0">done</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Fetch the payload, and see if this was the last one.</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; done </span><span class="c7">=</span><span class="c0">&nbsp;radio.</span><span class="c26">read</span><span class="c5">(</span><span class="c0">&nbsp;rxInfo, </span><span class="c9">sizeof</span><span class="c5">(</span><span class="c0">rxInfo</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Print it</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">printf</span><span class="c5">(</span><span class="c62">&quot;Recieved %x and %x</span><span class="c29">\n</span><span class="c62">&quot;</span><span class="c0">, rxInfo</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c0">, rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">])</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">// Delay to let the other unit make the transition to receiver</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; delay</span><span class="c5">(</span><span class="c9">10</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// First, stop listening so we can talk</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; radio.</span><span class="c26">stopListening</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Send the ack</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; radio.</span><span class="c26">write</span><span class="c5">(</span><span class="c16">&amp;</span><span class="c0">rxInfo, </span><span class="c9">sizeof</span><span class="c5">(</span><span class="c0">rxInfo</span><span class="c5">))</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c9">printf</span><span class="c5">(</span><span class="c62">&quot;Sent response.</span><span class="c29">\n\r</span><span class="c62">&quot;</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp; &nbsp; &nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Parse data from packet</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; curr_y </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">rxInfo</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x0F</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; curr_x </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">rxInfo</span><span class="c5">[</span><span class="c9">0</span><span class="c5">]</span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x0F</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; wall_up </span><span class="c7">=</span><span class="c0">&nbsp;rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;WALL_UP</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; wall_down </span><span class="c7">=</span><span class="c0">&nbsp;rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;WALL_DOWN</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; wall_left </span><span class="c7">=</span><span class="c0">&nbsp;rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;WALL_LEFT</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; wall_right </span><span class="c7">=</span><span class="c0">&nbsp;rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;WALL_RIGHT</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; treasure </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">&gt;&gt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;</span><span class="c52">0x07</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; finished </span><span class="c7">=</span><span class="c0">&nbsp;rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c16">&amp;</span><span class="c0">&nbsp;FINISHED</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c9">printf</span><span class="c5">(</span><span class="c62">&quot;x,y: %d, %d </span><span class="c29">\n</span><span class="c62">&nbsp;up: %d </span><span class="c29">\n</span><span class="c62">down: %d </span><span class="c29">\n</span><span class="c62">left: %d </span><span class="c29">\n</span><span class="c62">right: %d</span><span class="c29">\n</span><span class="c62">&quot;</span><span class="c0">, curr_x, curr_y, wall_up, wall_down, wall_left, wall_right</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c9">printf</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c62">&quot;treasure = %d and finished = %d</span><span class="c29">\n</span><span class="c62">&quot;</span><span class="c0">, treasure, finished</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Map from x,y used for mapping to x,y used for FPGA</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; real_x </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">3</span><span class="c16">-</span><span class="c0">curr_y</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; real_y </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c16">-</span><span class="c0">curr_x</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; real_pos </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">real_x </span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">4</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;real_y</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; current_data </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">((</span><span class="c0">rxInfo</span><span class="c5">[</span><span class="c9">1</span><span class="c5">]</span><span class="c0">&nbsp;</span><span class="c7">&lt;&lt;</span><span class="c0">&nbsp;</span><span class="c9">8</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c16">|</span><span class="c0">&nbsp;real_pos</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Send new data over to FPGA</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c31">if</span><span class="c0">&nbsp;</span><span class="c5">(</span><span class="c0">prev_data </span><span class="c16">!</span><span class="c7">=</span><span class="c0">&nbsp;current_data</span><span class="c5">)</span><span class="c0">&nbsp;</span><span class="c3">{</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; digitalFPGAWrite</span><span class="c5">(</span><span class="c0">current_data</span><span class="c5">)</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; prev_data </span><span class="c7">=</span><span class="c0">&nbsp;current_data</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0 c40">&nbsp;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2">// Now, resume listening so we catch the next packets.</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; &nbsp; radio.</span><span class="c26">startListening</span><span class="c5">()</span><span class="c21">;</span></li><li class="c6 c12"><span class="c0">&nbsp; &nbsp; </span><span class="c3">}</span></li><li class="c6 c12"><span class="c0">&nbsp; </span><span class="c3">}</span></li><li class="c6 c12"><span class="c113">}</span></li></ol></td></tr></tbody></table><h2 class="c36" id="h.f8n4zy6j16uu"><span class="c40 c67 c56">8.3 FPGA Code</span></h2><a id="t.479e186c7ec05a8ec72a7fad6fc47054de344d62"></a><a id="t.15"></a><table class="c85"><tbody><tr class="c48"><td class="c130" colspan="1" rowspan="1"><ol class="c44 lst-kix_k4q9goalbvhz-0 start" start="1"><li class="c6 c12"><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c22">// &nbsp;This code is generated by Terasic System Builder</span></li><li class="c6 c12"><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c22">//THIS PROJECT DEVELOPED BY CORNELL ECE 3400 STAFF. PLEASE</span></li><li class="c6 c12"><span class="c22">//DO NOT REUSE OR DISTRIBUTE THIS CODE WITHOUT PERMISSION</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c41">module</span><span class="c4">&nbsp;VGAlogic</span><span class="c35 c40">(</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">//////////// CLOCK //////////</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CLOCK_50</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">//////////// KEY //////////</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; KEY</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">////// GPIO_0, GPIO_0 connect to GPIO Default //////</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GPIO</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GPIO_IN</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4 c40">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LED</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// &nbsp;PORT declarations</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//////////// CLOCK //////////</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">input</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CLOCK_50</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//////////// KEY //////////</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">input</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">1</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; KEY</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">///// GPIO_0, GPIO_0 connect to GPIO Default //////////</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">inout</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">33</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GPIO</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">input</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">1</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GPIO_IN</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">output</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">7</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LED</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// &nbsp;REG/WIRE declarations</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CLOCK_25</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COORD_X</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COORD_Y</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">7</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reset</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_in</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">11</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_r_index</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">11</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pixel_w_index</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pixel_out</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_wen</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">2</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; treasure</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; treasure_x</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; treasure_y</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; finished</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// 0 if still running, 1 if finished</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CS</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOSI</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MISO</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SCLK</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bitCount </span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// to index what bit we are receiving of the transaction -- as of now, each txn is 2bytes --&gt; so 16 bits, so need 4 bits to index them</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">15</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;txnBits</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// bits received from Arduino</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; write_value</span><span class="c18">;</span><span class="c4">&nbsp; &nbsp; </span><span class="c22">// Determines if we are writing or not</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">10</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;count</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eye_bleed</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// PARAMETERS</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;L_BORDER </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d155</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;R_BORDER </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d288</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_BORDER </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d123</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;B_BORDER </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d288</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;W_WIDTH &nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d5</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Width of a wall</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;B_SIZE &nbsp; </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d32</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Size of a block</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d300</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Left start position for drawing treasure</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_STARTY </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d45</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Starting height of treasure indicators</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_HEIGHT </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d20</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Height of bars for indicating treasure</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_WIDTH &nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d5</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Width of bars for treasure indication</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_SPACE &nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d5</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Spacing between bars for treasure</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;T_RADIUS </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d14</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// The height and width of the drawn treasure at its location</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;F_CENT_X </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d375</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// X coordinate for center of the finished button</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;F_CENT_Y </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d200</span><span class="c18">;</span><span class="c4">&nbsp; </span><span class="c22">// Y coordinate for the center of the finishe button</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;F_RADIUS </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d50</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Radius of the finihsed button</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;F2_CENT_X </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d450</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// X coordinate for the center of second finished button</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;F2_CENT_Y </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d300</span><span class="c18">;</span><span class="c22">// Y coordinate for the center of the second finished button</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;F2_RADIUS </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d70</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">// Radius of the second finished signal</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// Colors</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_WALL </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b100_010_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_TALLY </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b001_101_11</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_F2_UNDONE </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b111_000_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_F2_DONE </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b000_111_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// Animation when not done</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_BG_NOT_DONE_1 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b111_111_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_NOT_DONE_1 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b000_000_11</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_BG_NOT_DONE_2 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b111_000_000</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_NOT_DONE_2 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b000_111_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// Animation when done</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_BG_DONE_1 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b001_111_11</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_DONE_1 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b110_000_11</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_BG_DONE_2 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b111_111_000</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_DONE_2 </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b001_111_11</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_TRES </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b001_001_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_VISTED </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b000_111_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_UNVISITED </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b111_111_00</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">parameter</span><span class="c4">&nbsp;C_UNAVAIL </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">8&#39;b111_000_01</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;VGADriver driver</span><span class="c35 c40">(</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .CLOCK</span><span class="c35">(</span><span class="c4">CLOCK_25</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .PIXEL_COLOR_IN</span><span class="c35">(</span><span class="c4">PIXEL_COLOR</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .PIXEL_X</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .PIXEL_Y</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .PIXEL_COLOR_OUT</span><span class="c35">({</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">9</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">11</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">13</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">15</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">17</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">19</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">21</span><span class="c35">]</span><span class="c18">,</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">23</span><span class="c35">]})</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .H_SYNC_NEG</span><span class="c35">(</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">7</span><span class="c35">])</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .V_SYNC_NEG</span><span class="c35">(</span><span class="c4">GPIO</span><span class="c35">[</span><span class="c13">5</span><span class="c35 c40">])</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;blockArray pixelArray</span><span class="c35 c40">(</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.clk</span><span class="c35">(</span><span class="c4">CLOCK_50</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.r_index</span><span class="c35">(</span><span class="c4">pixel_r_index</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.w_index</span><span class="c35">(</span><span class="c4">pixel_w_index</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.value</span><span class="c35">(</span><span class="c4">pixel_in</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.w_en</span><span class="c35">(</span><span class="c4">pixel_wen</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.out</span><span class="c35">(</span><span class="c4">pixel_out</span><span class="c35">)</span><span class="c18 c40">,</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.rst</span><span class="c35">(</span><span class="c4">reset</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// variables for SPI</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;CS </span><span class="c18">=</span><span class="c4">&nbsp;GPIO</span><span class="c35">[</span><span class="c13">29</span><span class="c35">]</span><span class="c18">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;SCLK </span><span class="c18">=</span><span class="c4">&nbsp;GPIO</span><span class="c35">[</span><span class="c13">31</span><span class="c35">]</span><span class="c18">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;MOSI </span><span class="c18">=</span><span class="c4">&nbsp;GPIO</span><span class="c35">[</span><span class="c13">33</span><span class="c35">]</span><span class="c18">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;LED</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;bitCount</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;LED</span><span class="c35">[</span><span class="c13">7</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b000</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// Variables for indexing</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;pixel_r_index</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;PIXEL_COORD_X</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">//shift by 5 for pixel-&gt;block transform</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;pixel_r_index</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;PIXEL_COORD_Y</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;x</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;PIXEL_COORD_X</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;y</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">=</span><span class="c4">&nbsp;PIXEL_COORD_Y</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">initial</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; bitCount </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">5&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; txnBits </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">16&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; treasure </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; treasure_x </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; treasure_y </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; pixel_w_index </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; finished </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c13">1&#39;b0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// SPI</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">reg</span><span class="c4">&nbsp;</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;SCKr</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c41">always</span><span class="c4">&nbsp;</span><span class="c18">@</span><span class="c35">(</span><span class="c41">posedge</span><span class="c4">&nbsp;CLOCK_50</span><span class="c35">)</span><span class="c4">&nbsp;SCKr </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">{</span><span class="c4">SCKr</span><span class="c35">[</span><span class="c13">3</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c18">,</span><span class="c4">&nbsp;SCLK</span><span class="c35">}</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">wire</span><span class="c4">&nbsp; &nbsp; &nbsp; SCLK_risingEdge </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">SCKr</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">1</span><span class="c35">]</span><span class="c18">==</span><span class="c13">4&#39;b0011</span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">// &nbsp;Structural coding</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c22">//=======================================================</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">always</span><span class="c4">&nbsp;</span><span class="c18">@</span><span class="c35">(</span><span class="c41">posedge</span><span class="c4">&nbsp;CLOCK_50</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; CLOCK_25 </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c18">~</span><span class="c4">CLOCK_25</span><span class="c18">;</span><span class="c4">&nbsp;</span><span class="c22">//VGA needs 25 MHz clock - FPGA has 50 MHz clock</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">reset</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;bitCount </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">5&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;txnBits </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">16&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;treasure </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b000</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;treasure_x </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;treasure_y </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pixel_w_index </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;finished </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">1&#39;b0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; count </span><span class="c18">&lt;=</span><span class="c4">&nbsp;count </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c13">1&#39;d1</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; eye_bleed </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">count</span><span class="c35">[</span><span class="c13">9</span><span class="c35">])</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">CS</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">bitCount </span><span class="c18">==</span><span class="c4">&nbsp;</span><span class="c13">5&#39;d16</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;CS</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_w_index</span><span class="c35">[</span><span class="c13">9</span><span class="c18">:</span><span class="c13">5</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">5&#39;d8</span><span class="c4">&nbsp;</span><span class="c18">-</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">7</span><span class="c18">:</span><span class="c13">4</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_w_index</span><span class="c35">[</span><span class="c13">4</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">5&#39;d8</span><span class="c4">&nbsp;</span><span class="c18">-</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">3</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_in</span><span class="c35">[</span><span class="c13">3</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&lt;=</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">11</span><span class="c18">:</span><span class="c13">8</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">// If the treasure value is nonzero, then update the treasure value</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; treasure </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">txnBits</span><span class="c35">[</span><span class="c13">14</span><span class="c18">:</span><span class="c13">12</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">!=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b000</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">14</span><span class="c18">:</span><span class="c13">12</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">:</span><span class="c4">&nbsp;treasure</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">14</span><span class="c18">:</span><span class="c13">12</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">!=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b000</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;treasure_x </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c13">5&#39;d8</span><span class="c4">&nbsp;</span><span class="c18">-</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">7</span><span class="c18">:</span><span class="c13">4</span><span class="c35">])</span><span class="c4">&nbsp;</span><span class="c18">&lt;&lt;</span><span class="c4">&nbsp;</span><span class="c13">5</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;treasure_y </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c13">5&#39;d8</span><span class="c4">&nbsp;</span><span class="c18">-</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">3</span><span class="c18">:</span><span class="c13">0</span><span class="c35">])</span><span class="c4">&nbsp;</span><span class="c18">&lt;&lt;</span><span class="c4">&nbsp;</span><span class="c13">5</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; finished </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">txnBits</span><span class="c35">[</span><span class="c13">15</span><span class="c35">])</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;txnBits</span><span class="c35">[</span><span class="c13">15</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">:</span><span class="c4">&nbsp;finished</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_in</span><span class="c35">[</span><span class="c13">4</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">1&#39;b1</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pixel_wen </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">1&#39;b1</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bitCount </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">5&#39;b00000</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; pixel_wen </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">1&#39;b0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">else</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;pixel_wen </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c13">1&#39;b0</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">SCLK_risingEdge</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bitCount </span><span class="c18">&lt;=</span><span class="c4">&nbsp;bitCount </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c13">5&#39;b00001</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; txnBits </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">{</span><span class="c4">txnBits</span><span class="c35">[</span><span class="c13">14</span><span class="c18">:</span><span class="c13">0</span><span class="c35">]</span><span class="c18">,</span><span class="c4">&nbsp;MOSI</span><span class="c35">}</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4 c40">&nbsp; &nbsp; &nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Setting output color</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Drawing the borders</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">((((</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;=</span><span class="c4">&nbsp;L_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&lt;=</span><span class="c4">&nbsp;L_BORDER </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">||</span><span class="c4">&nbsp; </span><span class="c22">// Brown for left border</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;=</span><span class="c4">&nbsp;R_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&lt;=</span><span class="c4">&nbsp;R_BORDER </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">&gt;=</span><span class="c4">&nbsp;T_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_Y </span><span class="c18">&lt;=</span><span class="c4">&nbsp;B_BORDER </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c18">||</span><span class="c4">&nbsp; </span><span class="c22">// Brown for &nbsp;right border</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c35">((</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">&gt;=</span><span class="c4">&nbsp;T_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_Y </span><span class="c18">&lt;=</span><span class="c4">&nbsp;T_BORDER </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">||</span><span class="c4">&nbsp; </span><span class="c22">// Brown for top border</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">&gt;=</span><span class="c4">&nbsp;B_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_Y </span><span class="c18">&lt;=</span><span class="c4">&nbsp;B_BORDER </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;=</span><span class="c4">&nbsp;L_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&lt;=</span><span class="c4">&nbsp;R_BORDER </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_WALL</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Drawing walls</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">pixel_out</span><span class="c35">[</span><span class="c13">2</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;x </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c22">// Left wall</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_WALL</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">pixel_out</span><span class="c35">[</span><span class="c13">3</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;x </span><span class="c18">+</span><span class="c4">&nbsp;B_SIZE </span><span class="c18">-</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c22">// Right wall</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_WALL</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">pixel_out</span><span class="c35">[</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">&lt;</span><span class="c4">&nbsp;y </span><span class="c18">+</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c22">// Top wall</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_WALL</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">pixel_out</span><span class="c35">[</span><span class="c13">1</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">&gt;</span><span class="c4">&nbsp;y </span><span class="c18">+</span><span class="c4">&nbsp;B_SIZE </span><span class="c18">-</span><span class="c4">&nbsp;W_WIDTH</span><span class="c35">))</span><span class="c4">&nbsp;</span><span class="c22">// Bottom wall</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_WALL</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Indicating if the space has been visited or not or unvailable</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">x </span><span class="c18">&gt;</span><span class="c4">&nbsp;L_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;x </span><span class="c18">&lt;</span><span class="c4">&nbsp;R_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;y </span><span class="c18">&lt;</span><span class="c4">&nbsp;B_BORDER </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;y </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_BORDER</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">pixel_out</span><span class="c35">[</span><span class="c13">4</span><span class="c35">])</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_VISTED </span><span class="c18">:</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">finished</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_UNAVAIL </span><span class="c18">:</span><span class="c4">&nbsp;C_UNVISITED</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Drawing the lines for treasure</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d6</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH </span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COORD_Y </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTY </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_Y </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTY </span><span class="c18">+</span><span class="c4">&nbsp;T_HEIGHT </span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;treasure </span><span class="c18">!=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b000</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c22">// Drawing Right most tally</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">&nbsp;treasure</span><span class="c35">[</span><span class="c13">0</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d6</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d6</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_TALLY</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c22">// Drawing third and fifth tally</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">&nbsp;treasure</span><span class="c35">[</span><span class="c13">1</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d2</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d2</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18 c40">||</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d4</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d4</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35 c40">)))</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_TALLY</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c22">// Drawing all other tallies</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">&nbsp;treasure</span><span class="c35">[</span><span class="c13">2</span><span class="c35">]</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX &nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18 c40">||</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d1</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d1</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18 c40">||</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d3</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d3</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18 c40">||</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d5</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;T_STARTX </span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">T_WIDTH </span><span class="c18">+</span><span class="c4">&nbsp;T_SPACE</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">*</span><span class="c4">&nbsp;</span><span class="c13">10&#39;d5</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_WIDTH</span><span class="c35 c40">)))</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_TALLY</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">PIXEL_COORD_X </span><span class="c18">-</span><span class="c4">&nbsp;F_CENT_X</span><span class="c35">)</span><span class="c18">**</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">-</span><span class="c4">&nbsp;F_CENT_Y</span><span class="c35">)</span><span class="c18">**</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">&lt;</span><span class="c4">&nbsp;F_RADIUS</span><span class="c18">**</span><span class="c13">2</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">finished</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_DONE_2</span><span class="c35">)</span><span class="c18">:</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_NOT_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_NOT_DONE_2</span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c41 c40">else</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">finished</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_BG_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_BG_DONE_2</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">:</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_BG_NOT_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_BG_NOT_DONE_2</span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Drawing the second finished circle</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c35">(</span><span class="c4">PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;F2_CENT_X </span><span class="c18">-</span><span class="c4">&nbsp;F2_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;F2_CENT_X </span><span class="c18">+</span><span class="c4">&nbsp;F2_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_Y </span><span class="c18">&gt;</span><span class="c4">&nbsp;F2_CENT_Y </span><span class="c18">-</span><span class="c4">&nbsp;F2_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_Y </span><span class="c18">&lt;</span><span class="c4">&nbsp;F2_CENT_Y </span><span class="c18">+</span><span class="c4">&nbsp;F2_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c35">((</span><span class="c4">PIXEL_COORD_X </span><span class="c18">-</span><span class="c4">&nbsp;F2_CENT_X</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">-</span><span class="c4">&nbsp;F2_CENT_Y</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">&lt;</span><span class="c4">&nbsp;F2_RADIUS</span><span class="c35 c40">))</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">finished</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_F2_DONE </span><span class="c18">:</span><span class="c4">&nbsp;C_F2_UNDONE</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">else</span><span class="c4">&nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">PIXEL_COORD_X </span><span class="c18">-</span><span class="c4">&nbsp;F_CENT_X</span><span class="c35">)</span><span class="c18">**</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">PIXEL_COORD_Y </span><span class="c18">-</span><span class="c4">&nbsp;F_CENT_Y</span><span class="c35">)</span><span class="c18">**</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">&lt;</span><span class="c4">&nbsp;F_RADIUS</span><span class="c18">**</span><span class="c13">2</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">finished</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_DONE_2</span><span class="c35">)</span><span class="c18">:</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_NOT_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_NOT_DONE_2</span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Background color</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">else</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">finished</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_BG_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_BG_DONE_2</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">:</span><span class="c4">&nbsp;</span><span class="c35">((</span><span class="c4">eye_bleed</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c18">?</span><span class="c4">&nbsp;C_BG_NOT_DONE_1 </span><span class="c18">:</span><span class="c4">&nbsp;C_BG_NOT_DONE_2</span><span class="c35">)</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c22">// Drawing the location of the treasure</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">treasure </span><span class="c18">!=</span><span class="c4">&nbsp;</span><span class="c13">3&#39;b000</span><span class="c35">)</span><span class="c4">&nbsp;</span><span class="c41 c40">begin</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp;</span><span class="c41">if</span><span class="c4">&nbsp;</span><span class="c35">(</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&gt;</span><span class="c4">&nbsp;treasure_x </span><span class="c18">+</span><span class="c4">&nbsp;B_SIZE</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">-</span><span class="c4">&nbsp;T_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_X </span><span class="c18">&lt;</span><span class="c4">&nbsp;treasure_x </span><span class="c18">+</span><span class="c4">&nbsp;B_SIZE</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18 c40">&amp;&amp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PIXEL_COORD_Y </span><span class="c18">&gt;</span><span class="c4">&nbsp;treasure_y </span><span class="c18">+</span><span class="c4">&nbsp;B_SIZE</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">-</span><span class="c4">&nbsp;T_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">&amp;&amp;</span><span class="c4">&nbsp;PIXEL_COORD_Y </span><span class="c18">&lt;</span><span class="c4">&nbsp;treasure_y </span><span class="c18">+</span><span class="c4">&nbsp;B_SIZE</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c18">+</span><span class="c4">&nbsp;T_RADIUS</span><span class="c18">/</span><span class="c13">2</span><span class="c4">&nbsp;</span><span class="c35 c40">)</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;PIXEL_COLOR </span><span class="c18">&lt;=</span><span class="c4">&nbsp;C_TRES</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp; &nbsp; </span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41 c40">end</span></li><li class="c6 c12"><span class="c40 c112">&nbsp;</span></li><li class="c6 c12"><span class="c4">&nbsp; &nbsp;</span><span class="c41">assign</span><span class="c4">&nbsp;reset </span><span class="c18">=</span><span class="c4">&nbsp;</span><span class="c18">~</span><span class="c4">KEY</span><span class="c35">[</span><span class="c13">0</span><span class="c35">]</span><span class="c18 c40">;</span></li><li class="c6 c12"><span class="c4 c40">&nbsp;</span></li><li class="c6 c12"><span class="c41">endmodule</span></li></ol></td></tr></tbody></table><p class="c33"><span class="c40 c73 c56"></span></p><div><p class="c49 c98"><span class="c19"></span></p></div></body></html>